var Lu=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},le="1.9.0",Ni=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Pu(r){var e=new Set([r]),t=new Set,n=r.match(Ni);if(!n)return function(){return!1};var o={major:+n[1],minor:+n[2],patch:+n[3],prerelease:n[4]};if(o.prerelease!=null)return function(c){return c===r};function i(s){return t.add(s),!1}function a(s){return e.add(s),!0}return function(c){if(e.has(c))return!0;if(t.has(c))return!1;var u=c.match(Ni);if(!u)return i(c);var l={major:+u[1],minor:+u[2],patch:+u[3],prerelease:u[4]};return l.prerelease!=null||o.major!==l.major?i(c):o.major===0?o.minor===l.minor&&o.patch<=l.patch?a(c):i(c):o.minor<=l.minor?a(c):i(c)}}var Nu=Pu(le),Cu=le.split(".")[0],qe=Symbol.for("opentelemetry.js.api."+Cu),Qe=Lu;function ir(r,e,t,n){var o;n===void 0&&(n=!1);var i=Qe[qe]=(o=Qe[qe])!==null&&o!==void 0?o:{version:le};if(!n&&i[r]){var a=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+r);return t.error(a.stack||a.message),!1}if(i.version!==le){var a=new Error("@opentelemetry/api: Registration of version v"+i.version+" for "+r+" does not match previously registered API v"+le);return t.error(a.stack||a.message),!1}return i[r]=e,t.debug("@opentelemetry/api: Registered a global for "+r+" v"+le+"."),!0}function de(r){var e,t,n=(e=Qe[qe])===null||e===void 0?void 0:e.version;if(!(!n||!Nu(n)))return(t=Qe[qe])===null||t===void 0?void 0:t[r]}function or(r,e){e.debug("@opentelemetry/api: Unregistering a global for "+r+" v"+le+".");var t=Qe[qe];t&&delete t[r]}var Iu=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Mu=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},xu=function(){function r(e){this._namespace=e.namespace||"DiagComponentLogger"}return r.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return je("debug",this._namespace,e)},r.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return je("error",this._namespace,e)},r.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return je("info",this._namespace,e)},r.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return je("warn",this._namespace,e)},r.prototype.verbose=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return je("verbose",this._namespace,e)},r}();function je(r,e,t){var n=de("diag");if(n)return t.unshift(e),n[r].apply(n,Mu([],Iu(t),!1))}var ut;(function(r){r[r.NONE=0]="NONE",r[r.ERROR=30]="ERROR",r[r.WARN=50]="WARN",r[r.INFO=60]="INFO",r[r.DEBUG=70]="DEBUG",r[r.VERBOSE=80]="VERBOSE",r[r.ALL=9999]="ALL"})(ut||(ut={}));function Du(r,e){r<ut.NONE?r=ut.NONE:r>ut.ALL&&(r=ut.ALL),e=e||{};function t(n,o){var i=e[n];return typeof i=="function"&&r>=o?i.bind(e):function(){}}return{error:t("error",ut.ERROR),warn:t("warn",ut.WARN),info:t("info",ut.INFO),debug:t("debug",ut.DEBUG),verbose:t("verbose",ut.VERBOSE)}}var ku=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Uu=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Bu="diag",Ft=function(){function r(){function e(o){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=de("diag");if(s)return s[o].apply(s,Uu([],ku(i),!1))}}var t=this,n=function(o,i){var a,s,c;if(i===void 0&&(i={logLevel:ut.INFO}),o===t){var u=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return t.error((a=u.stack)!==null&&a!==void 0?a:u.message),!1}typeof i=="number"&&(i={logLevel:i});var l=de("diag"),f=Du((s=i.logLevel)!==null&&s!==void 0?s:ut.INFO,o);if(l&&!i.suppressOverrideMessage){var m=(c=new Error().stack)!==null&&c!==void 0?c:"<failed to generate stacktrace>";l.warn("Current logger will be overwritten from "+m),f.warn("Current logger will overwrite one already registered from "+m)}return ir("diag",f,t,!0)};t.setLogger=n,t.disable=function(){or(Bu,t)},t.createComponentLogger=function(o){return new xu(o)},t.verbose=e("verbose"),t.debug=e("debug"),t.info=e("info"),t.warn=e("warn"),t.error=e("error")}return r.instance=function(){return this._instance||(this._instance=new r),this._instance},r}(),Gu=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Hu=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vu=function(){function r(e){this._entries=e?new Map(e):new Map}return r.prototype.getEntry=function(e){var t=this._entries.get(e);if(t)return Object.assign({},t)},r.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(e){var t=Gu(e,2),n=t[0],o=t[1];return[n,o]})},r.prototype.setEntry=function(e,t){var n=new r(this._entries);return n._entries.set(e,t),n},r.prototype.removeEntry=function(e){var t=new r(this._entries);return t._entries.delete(e),t},r.prototype.removeEntries=function(){for(var e,t,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];var i=new r(this._entries);try{for(var a=Hu(n),s=a.next();!s.done;s=a.next()){var c=s.value;i._entries.delete(c)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(t=a.return)&&t.call(a)}finally{if(e)throw e.error}}return i},r.prototype.clear=function(){return new r},r}(),ju=Symbol("BaggageEntryMetadata"),Fu=Ft.instance();function Xu(r){return r===void 0&&(r={}),new Vu(new Map(Object.entries(r)))}function $u(r){return typeof r!="string"&&(Fu.error("Cannot create baggage metadata from unknown type: "+typeof r),r=""),{__TYPE__:ju,toString:function(){return r}}}function ar(r){return Symbol.for(r)}var zu=function(){function r(e){var t=this;t._currentContext=e?new Map(e):new Map,t.getValue=function(n){return t._currentContext.get(n)},t.setValue=function(n,o){var i=new r(t._currentContext);return i._currentContext.set(n,o),i},t.deleteValue=function(n){var o=new r(t._currentContext);return o._currentContext.delete(n),o}}return r}(),Ht=new zu,ve=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Zu=function(){function r(){}return r.prototype.createGauge=function(e,t){return rs},r.prototype.createHistogram=function(e,t){return ns},r.prototype.createCounter=function(e,t){return es},r.prototype.createUpDownCounter=function(e,t){return is},r.prototype.createObservableGauge=function(e,t){return as},r.prototype.createObservableCounter=function(e,t){return os},r.prototype.createObservableUpDownCounter=function(e,t){return us},r.prototype.addBatchObservableCallback=function(e,t){},r.prototype.removeBatchObservableCallback=function(e){},r}(),jr=function(){function r(){}return r}(),Wu=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(jr),Yu=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n){},e}(jr),Ku=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(jr),qu=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n){},e}(jr),qn=function(){function r(){}return r.prototype.addCallback=function(e){},r.prototype.removeCallback=function(e){},r}(),Qu=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(qn),Ju=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(qn),ts=function(r){ve(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(qn),Io=new Zu,es=new Wu,rs=new Ku,ns=new qu,is=new Yu,os=new Qu,as=new Ju,us=new ts;function ss(){return Io}var ne;(function(r){r[r.INT=0]="INT",r[r.DOUBLE=1]="DOUBLE"})(ne||(ne={}));var cs={get:function(r,e){if(r!=null)return r[e]},keys:function(r){return r==null?[]:Object.keys(r)}},ls={set:function(r,e,t){r!=null&&(r[e]=t)}},fs=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ds=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},_s=function(){function r(){}return r.prototype.active=function(){return Ht},r.prototype.with=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];return t.call.apply(t,ds([n],fs(o),!1))},r.prototype.bind=function(e,t){return t},r.prototype.enable=function(){return this},r.prototype.disable=function(){return this},r}(),hs=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ps=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Jr="context",vs=new _s,Fr=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalContextManager=function(e){return ir(Jr,e,Ft.instance())},r.prototype.active=function(){return this._getContextManager().active()},r.prototype.with=function(e,t,n){for(var o,i=[],a=3;a<arguments.length;a++)i[a-3]=arguments[a];return(o=this._getContextManager()).with.apply(o,ps([e,t,n],hs(i),!1))},r.prototype.bind=function(e,t){return this._getContextManager().bind(e,t)},r.prototype._getContextManager=function(){return de(Jr)||vs},r.prototype.disable=function(){this._getContextManager().disable(),or(Jr,Ft.instance())},r}(),bt;(function(r){r[r.NONE=0]="NONE",r[r.SAMPLED=1]="SAMPLED"})(bt||(bt={}));var Mo="0000000000000000",xo="00000000000000000000000000000000",Do={traceId:xo,spanId:Mo,traceFlags:bt.NONE},Ze=function(){function r(e){e===void 0&&(e=Do),this._spanContext=e}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return this},r.prototype.setAttributes=function(e){return this},r.prototype.addEvent=function(e,t){return this},r.prototype.addLink=function(e){return this},r.prototype.addLinks=function(e){return this},r.prototype.setStatus=function(e){return this},r.prototype.updateName=function(e){return this},r.prototype.end=function(e){},r.prototype.isRecording=function(){return!1},r.prototype.recordException=function(e,t){},r}(),Qn=ar("OpenTelemetry Context Key SPAN");function Jn(r){return r.getValue(Qn)||void 0}function Es(){return Jn(Fr.getInstance().active())}function ti(r,e){return r.setValue(Qn,e)}function ys(r){return r.deleteValue(Qn)}function Ts(r,e){return ti(r,new Ze(e))}function ko(r){var e;return(e=Jn(r))===null||e===void 0?void 0:e.spanContext()}var gs=/^([0-9a-f]{32})$/i,ms=/^[0-9a-f]{16}$/i;function Xr(r){return gs.test(r)&&r!==xo}function ei(r){return ms.test(r)&&r!==Mo}function Be(r){return Xr(r.traceId)&&ei(r.spanId)}function Ss(r){return new Ze(r)}var tn=Fr.getInstance(),Uo=function(){function r(){}return r.prototype.startSpan=function(e,t,n){n===void 0&&(n=tn.active());var o=!!t?.root;if(o)return new Ze;var i=n&&ko(n);return Os(i)&&Be(i)?new Ze(i):new Ze},r.prototype.startActiveSpan=function(e,t,n,o){var i,a,s;if(!(arguments.length<2)){arguments.length===2?s=t:arguments.length===3?(i=t,s=n):(i=t,a=n,s=o);var c=a??tn.active(),u=this.startSpan(e,i,c),l=ti(c,u);return tn.with(l,s,void 0,u)}},r}();function Os(r){return typeof r=="object"&&typeof r.spanId=="string"&&typeof r.traceId=="string"&&typeof r.traceFlags=="number"}var bs=new Uo,ws=function(){function r(e,t,n,o){this._provider=e,this.name=t,this.version=n,this.options=o}return r.prototype.startSpan=function(e,t,n){return this._getTracer().startSpan(e,t,n)},r.prototype.startActiveSpan=function(e,t,n,o){var i=this._getTracer();return Reflect.apply(i.startActiveSpan,i,arguments)},r.prototype._getTracer=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateTracer(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):bs},r}(),As=function(){function r(){}return r.prototype.getTracer=function(e,t,n){return new Uo},r}(),Rs=new As,Ci=function(){function r(){}return r.prototype.getTracer=function(e,t,n){var o;return(o=this.getDelegateTracer(e,t,n))!==null&&o!==void 0?o:new ws(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Rs},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateTracer=function(e,t,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getTracer(e,t,n)},r}(),Ir;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ir||(Ir={}));var Je;(function(r){r[r.INTERNAL=0]="INTERNAL",r[r.SERVER=1]="SERVER",r[r.CLIENT=2]="CLIENT",r[r.PRODUCER=3]="PRODUCER",r[r.CONSUMER=4]="CONSUMER"})(Je||(Je={}));var Nn;(function(r){r[r.UNSET=0]="UNSET",r[r.OK=1]="OK",r[r.ERROR=2]="ERROR"})(Nn||(Nn={}));var $=Fr.getInstance(),R=Ft.instance(),Ls=function(){function r(){}return r.prototype.getMeter=function(e,t,n){return Io},r}(),Ps=new Ls,en="metrics",Ns=function(){function r(){}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalMeterProvider=function(e){return ir(en,e,Ft.instance())},r.prototype.getMeterProvider=function(){return de(en)||Ps},r.prototype.getMeter=function(e,t,n){return this.getMeterProvider().getMeter(e,t,n)},r.prototype.disable=function(){or(en,Ft.instance())},r}(),Bo=Ns.getInstance(),Cs=function(){function r(){}return r.prototype.inject=function(e,t){},r.prototype.extract=function(e,t){return e},r.prototype.fields=function(){return[]},r}(),ri=ar("OpenTelemetry Baggage Key");function Go(r){return r.getValue(ri)||void 0}function Is(){return Go(Fr.getInstance().active())}function Ms(r,e){return r.setValue(ri,e)}function xs(r){return r.deleteValue(ri)}var rn="propagation",Ds=new Cs,ks=function(){function r(){this.createBaggage=Xu,this.getBaggage=Go,this.getActiveBaggage=Is,this.setBaggage=Ms,this.deleteBaggage=xs}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalPropagator=function(e){return ir(rn,e,Ft.instance())},r.prototype.inject=function(e,t,n){return n===void 0&&(n=ls),this._getGlobalPropagator().inject(e,t,n)},r.prototype.extract=function(e,t,n){return n===void 0&&(n=cs),this._getGlobalPropagator().extract(e,t,n)},r.prototype.fields=function(){return this._getGlobalPropagator().fields()},r.prototype.disable=function(){or(rn,Ft.instance())},r.prototype._getGlobalPropagator=function(){return de(rn)||Ds},r}(),Ct=ks.getInstance(),nn="trace",Us=function(){function r(){this._proxyTracerProvider=new Ci,this.wrapSpanContext=Ss,this.isSpanContextValid=Be,this.deleteSpan=ys,this.getSpan=Jn,this.getActiveSpan=Es,this.getSpanContext=ko,this.setSpan=ti,this.setSpanContext=Ts}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalTracerProvider=function(e){var t=ir(nn,this._proxyTracerProvider,Ft.instance());return t&&this._proxyTracerProvider.setDelegate(e),t},r.prototype.getTracerProvider=function(){return de(nn)||this._proxyTracerProvider},r.prototype.getTracer=function(e,t){return this.getTracerProvider().getTracer(e,t)},r.prototype.disable=function(){or(nn,Ft.instance()),this._proxyTracerProvider=new Ci},r}(),it=Us.getInstance(),Ho=ar("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Vo(r){return r.setValue(Ho,!0)}function ni(r){return r.getValue(Ho)===!0}var Bs="=",Cn=";",In=",",on="baggage",Gs=180,Hs=4096,Vs=8192,js=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function Fs(r){return r.reduce(function(e,t){var n=""+e+(e!==""?In:"")+t;return n.length>Vs?e:n},"")}function Xs(r){return r.getAllEntries().map(function(e){var t=js(e,2),n=t[0],o=t[1],i=encodeURIComponent(n)+"="+encodeURIComponent(o.value);return o.metadata!==void 0&&(i+=Cn+o.metadata.toString()),i})}function $s(r){var e=r.split(Cn);if(!(e.length<=0)){var t=e.shift();if(t){var n=t.indexOf(Bs);if(!(n<=0)){var o=decodeURIComponent(t.substring(0,n).trim()),i=decodeURIComponent(t.substring(n+1).trim()),a;return e.length>0&&(a=$u(e.join(Cn))),{key:o,value:i,metadata:a}}}}}var zs=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=Ct.getBaggage(e);if(!(!o||ni(e))){var i=Xs(o).filter(function(s){return s.length<=Hs}).slice(0,Gs),a=Fs(i);a.length>0&&n.set(t,on,a)}},r.prototype.extract=function(e,t,n){var o=n.get(t,on),i=Array.isArray(o)?o.join(In):o;if(!i)return e;var a={};if(i.length===0)return e;var s=i.split(In);return s.forEach(function(c){var u=$s(c);if(u){var l={value:u.value};u.metadata&&(l.metadata=u.metadata),a[u.key]=l}}),Object.entries(a).length===0?e:Ct.setBaggage(e,Ct.createBaggage(a))},r.prototype.fields=function(){return[on]},r}(),jo=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zs=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function wr(r){var e,t,n={};if(typeof r!="object"||r==null)return n;try{for(var o=jo(Object.entries(r)),i=o.next();!i.done;i=o.next()){var a=Zs(i.value,2),s=a[0],c=a[1];if(!Ws(s)){R.warn("Invalid attribute key: "+s);continue}if(!Fo(c)){R.warn("Invalid attribute value set for key: "+s);continue}Array.isArray(c)?n[s]=c.slice():n[s]=c}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function Ws(r){return typeof r=="string"&&r.length>0}function Fo(r){return r==null?!0:Array.isArray(r)?Ys(r):Xo(r)}function Ys(r){var e,t,n;try{for(var o=jo(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(a!=null){if(!n){if(Xo(a)){n=typeof a;continue}return!1}if(typeof a!==n)return!1}}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return!0}function Xo(r){switch(typeof r){case"number":case"boolean":case"string":return!0}return!1}function Ks(){return function(r){R.error(qs(r))}}function qs(r){return typeof r=="string"?r:JSON.stringify(Qs(r))}function Qs(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var o=t[n];o&&(e[n]=String(o))}}),t=Object.getPrototypeOf(t);return e}var Js=Ks();function Kt(r){try{Js(r)}catch{}}var Gt;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(Gt||(Gt={}));var tc=",",ec=["OTEL_SDK_DISABLED"];function rc(r){return ec.indexOf(r)>-1}var nc=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function ic(r){return nc.indexOf(r)>-1}var oc=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function ac(r){return oc.indexOf(r)>-1}var Ar=1/0,Rr=128,uc=128,sc=128,$o={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ut.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:Ar,OTEL_ATTRIBUTE_COUNT_LIMIT:Rr,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:Ar,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:Rr,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:Ar,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:Rr,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:uc,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:sc,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:Gt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function cc(r,e,t){if(!(typeof t[r]>"u")){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function lc(r,e,t,n,o){if(n===void 0&&(n=-1/0),o===void 0&&(o=1/0),typeof t[r]<"u"){var i=Number(t[r]);isNaN(i)||(i<n?e[r]=n:i>o?e[r]=o:e[r]=i)}}function fc(r,e,t,n){n===void 0&&(n=tc);var o=t[r];typeof o=="string"&&(e[r]=o.split(n).map(function(i){return i.trim()}))}var dc={ALL:ut.ALL,VERBOSE:ut.VERBOSE,DEBUG:ut.DEBUG,INFO:ut.INFO,WARN:ut.WARN,ERROR:ut.ERROR,NONE:ut.NONE};function _c(r,e,t){var n=t[r];if(typeof n=="string"){var o=dc[n.toUpperCase()];o!=null&&(e[r]=o)}}function zo(r){var e={};for(var t in $o){var n=t;switch(n){case"OTEL_LOG_LEVEL":_c(n,e,r);break;default:if(rc(n))cc(n,e,r);else if(ic(n))lc(n,e,r);else if(ac(n))fc(n,e,r);else{var o=r[n];typeof o<"u"&&o!==null&&(e[n]=String(o))}}}return e}var Zo=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function Me(){var r=zo(Zo);return Object.assign({},$o,r)}function hc(){return zo(Zo)}var jt=performance,pc="1.29.0",vc="exception.type",Ec="exception.message",yc="exception.stacktrace",Tc="http.method",gc="http.url",mc="http.host",Sc="http.scheme",Oc="http.status_code",bc="http.user_agent",wc="http.request_content_length_uncompressed",Ac="http.response_content_length",Rc="http.response_content_length_uncompressed",an=vc,un=Ec,Lc=yc,Wo=Tc,We=gc,Yo=mc,Ko=Sc,qo=Oc,ii=bc,Qo=wc,Jo=Ac,ta=Rc,Pc="process.runtime.name",Nc="service.name",Cc="telemetry.sdk.name",Ic="telemetry.sdk.language",Mc="telemetry.sdk.version",ea=Pc,ra=Nc,xe=Cc,De=Ic,ke=Mc,xc="webjs",na=xc,Dc="service.name",kc="service.version",Ae,sn=(Ae={},Ae[xe]="opentelemetry",Ae[ea]="browser",Ae[De]=na,Ae[ke]=pc,Ae);var Uc=9,Bc=6,Gc=Math.pow(10,Bc),Mn=Math.pow(10,Uc);function Pe(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*Gc);return[t,n]}function ia(){var r=jt.timeOrigin;if(typeof r!="number"){var e=jt;r=e.timing&&e.timing.fetchStart}return r}function Hc(r){var e=Pe(ia()),t=Pe(typeof r=="number"?r:jt.now());return aa(e,t)}function Vc(r,e){var t=e[0]-r[0],n=e[1]-r[1];return n<0&&(t-=1,n+=Mn),[t,n]}function Ii(r){return r[0]*1e6+r[1]/1e3}function oa(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function Mi(r){return oa(r)||typeof r=="number"||r instanceof Date}function aa(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Mn&&(t[1]-=Mn,t[0]+=1),t}var tr;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(tr||(tr={}));var jc=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fc=function(){function r(e){e===void 0&&(e={});var t;this._propagators=(t=e.propagators)!==null&&t!==void 0?t:[],this._fields=Array.from(new Set(this._propagators.map(function(n){return typeof n.fields=="function"?n.fields():[]}).reduce(function(n,o){return n.concat(o)},[])))}return r.prototype.inject=function(e,t,n){var o,i;try{for(var a=jc(this._propagators),s=a.next();!s.done;s=a.next()){var c=s.value;try{c.inject(e,t,n)}catch(u){R.warn("Failed to inject with "+c.constructor.name+". Err: "+u.message)}}}catch(u){o={error:u}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}},r.prototype.extract=function(e,t,n){return this._propagators.reduce(function(o,i){try{return i.extract(o,t,n)}catch(a){R.warn("Failed to extract with "+i.constructor.name+". Err: "+a.message)}return o},e)},r.prototype.fields=function(){return this._fields.slice()},r}(),xn="[_0-9a-z-*/]",Xc="[a-z]"+xn+"{0,255}",$c="[a-z0-9]"+xn+"{0,240}@[a-z]"+xn+"{0,13}",zc=new RegExp("^(?:"+Xc+"|"+$c+")$"),Zc=/^[ -~]{0,255}[!-~]$/,Wc=/,|=/;function Yc(r){return zc.test(r)}function Kc(r){return Zc.test(r)&&!Wc.test(r)}var xi=32,qc=512,Di=",",ki="=",Qc=function(){function r(e){this._internalState=new Map,e&&this._parse(e)}return r.prototype.set=function(e,t){var n=this._clone();return n._internalState.has(e)&&n._internalState.delete(e),n._internalState.set(e,t),n},r.prototype.unset=function(e){var t=this._clone();return t._internalState.delete(e),t},r.prototype.get=function(e){return this._internalState.get(e)},r.prototype.serialize=function(){var e=this;return this._keys().reduce(function(t,n){return t.push(n+ki+e.get(n)),t},[]).join(Di)},r.prototype._parse=function(e){e.length>qc||(this._internalState=e.split(Di).reverse().reduce(function(t,n){var o=n.trim(),i=o.indexOf(ki);if(i!==-1){var a=o.slice(0,i),s=o.slice(i+1,n.length);Yc(a)&&Kc(s)&&t.set(a,s)}return t},new Map),this._internalState.size>xi&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,xi))))},r.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},r.prototype._clone=function(){var e=new r;return e._internalState=new Map(this._internalState),e},r}(),Lr="traceparent",cn="tracestate",Jc="00",tl="(?!ff)[\\da-f]{2}",el="(?![0]{32})[\\da-f]{32}",rl="(?![0]{16})[\\da-f]{16}",nl="[\\da-f]{2}",il=new RegExp("^\\s?("+tl+")-("+el+")-("+rl+")-("+nl+")(-.*)?\\s?$");function ol(r){var e=il.exec(r);return!e||e[1]==="00"&&e[5]?null:{traceId:e[2],spanId:e[3],traceFlags:parseInt(e[4],16)}}var al=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=it.getSpanContext(e);if(!(!o||ni(e)||!Be(o))){var i=Jc+"-"+o.traceId+"-"+o.spanId+"-0"+Number(o.traceFlags||bt.NONE).toString(16);n.set(t,Lr,i),o.traceState&&n.set(t,cn,o.traceState.serialize())}},r.prototype.extract=function(e,t,n){var o=n.get(t,Lr);if(!o)return e;var i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;var a=ol(i);if(!a)return e;a.isRemote=!0;var s=n.get(t,cn);if(s){var c=Array.isArray(s)?s.join(","):s;a.traceState=new Qc(typeof c=="string"?c:void 0)}return it.setSpanContext(e,a)},r.prototype.fields=function(){return[Lr,cn]},r}(),ul="[object Object]",sl="[object Null]",cl="[object Undefined]",ll=Function.prototype,ua=ll.toString,fl=ua.call(Object),dl=_l(Object.getPrototypeOf,Object),sa=Object.prototype,ca=sa.hasOwnProperty,se=Symbol?Symbol.toStringTag:void 0,la=sa.toString;function _l(r,e){return function(t){return r(e(t))}}function Ui(r){if(!hl(r)||pl(r)!==ul)return!1;var e=dl(r);if(e===null)return!0;var t=ca.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&ua.call(t)===fl}function hl(r){return r!=null&&typeof r=="object"}function pl(r){return r==null?r===void 0?cl:sl:se&&se in Object(r)?vl(r):El(r)}function vl(r){var e=ca.call(r,se),t=r[se],n=!1;try{r[se]=void 0,n=!0}catch{}var o=la.call(r);return n&&(e?r[se]=t:delete r[se]),o}function El(r){return la.call(r)}var yl=20;function Tl(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];for(var t=r.shift(),n=new WeakMap;r.length>0;)t=fa(t,r.shift(),0,n);return t}function ln(r){return Mr(r)?r.slice():r}function fa(r,e,t,n){t===void 0&&(t=0);var o;if(!(t>yl)){if(t++,Pr(r)||Pr(e)||da(e))o=ln(e);else if(Mr(r)){if(o=r.slice(),Mr(e))for(var i=0,a=e.length;i<a;i++)o.push(ln(e[i]));else if(Fe(e))for(var s=Object.keys(e),i=0,a=s.length;i<a;i++){var c=s[i];o[c]=ln(e[c])}}else if(Fe(r))if(Fe(e)){if(!gl(r,e))return e;o=Object.assign({},r);for(var s=Object.keys(e),i=0,a=s.length;i<a;i++){var c=s[i],u=e[c];if(Pr(u))typeof u>"u"?delete o[c]:o[c]=u;else{var l=o[c],f=u;if(Bi(r,c,n)||Bi(e,c,n))delete o[c];else{if(Fe(l)&&Fe(f)){var m=n.get(l)||[],D=n.get(f)||[];m.push({obj:r,key:c}),D.push({obj:e,key:c}),n.set(l,m),n.set(f,D)}o[c]=fa(o[c],u,t,n)}}}}else o=e;return o}}function Bi(r,e,t){for(var n=t.get(r[e])||[],o=0,i=n.length;o<i;o++){var a=n[o];if(a.key===e&&a.obj===r)return!0}return!1}function Mr(r){return Array.isArray(r)}function da(r){return typeof r=="function"}function Fe(r){return!Pr(r)&&!Mr(r)&&!da(r)&&typeof r=="object"}function Pr(r){return typeof r=="string"||typeof r=="number"||typeof r=="boolean"||typeof r>"u"||r instanceof Date||r instanceof RegExp||r===null}function gl(r,e){return!(!Ui(r)||!Ui(e))}var ml=function(){function r(){var e=this;this._promise=new Promise(function(t,n){e._resolve=t,e._reject=n})}return Object.defineProperty(r.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),r.prototype.resolve=function(e){this._resolve(e)},r.prototype.reject=function(e){this._reject(e)},r}(),Sl=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ol=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},_a=function(){function r(e,t){this._callback=e,this._that=t,this._isCalled=!1,this._deferred=new ml}return Object.defineProperty(r.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),r.prototype.call=function(){for(var e,t=this,n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((e=this._callback).call.apply(e,Ol([this._that],Sl(n),!1))).then(function(i){return t._deferred.resolve(i)},function(i){return t._deferred.reject(i)})}catch(i){this._deferred.reject(i)}}return this._deferred.promise},r}();function bl(r,e){return new Promise(function(t){$.with(Vo($.active()),function(){r.export(e,function(n){t(n)})})})}var wl={_export:bl},Al="exception",Dn=function(){return Dn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Dn.apply(this,arguments)},Rl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Gi=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Ll=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Pl=function(){function r(e,t,n,o,i,a,s,c,u,l){s===void 0&&(s=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Nn.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=n,this._spanContext=o,this.parentSpanId=a,this.kind=i,this.links=s;var f=Date.now();this._performanceStartTime=jt.now(),this._performanceOffset=f-(this._performanceStartTime+ia()),this._startTimeProvided=c!=null,this.startTime=this._getTime(c??f),this.resource=e.resource,this.instrumentationLibrary=e.instrumentationLibrary,this._spanLimits=e.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,l!=null&&this.setAttributes(l),this._spanProcessor=e.getActiveSpanProcessor(),this._spanProcessor.onStart(this,t)}return r.prototype.spanContext=function(){return this._spanContext},r.prototype.setAttribute=function(e,t){return t==null||this._isSpanEnded()?this:e.length===0?(R.warn("Invalid attribute key: "+e),this):Fo(t)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,e)?(this._droppedAttributesCount++,this):(this.attributes[e]=this._truncateToSize(t),this):(R.warn("Invalid attribute value set for key: "+e),this)},r.prototype.setAttributes=function(e){var t,n;try{for(var o=Rl(Object.entries(e)),i=o.next();!i.done;i=o.next()){var a=Gi(i.value,2),s=a[0],c=a[1];this.setAttribute(s,c)}}catch(u){t={error:u}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return this},r.prototype.addEvent=function(e,t,n){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return R.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&R.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),Mi(t)&&(Mi(n)||(n=t),t=void 0);var o=wr(t);return this.events.push({name:e,attributes:o,time:this._getTime(n),droppedAttributesCount:0}),this},r.prototype.addLink=function(e){return this.links.push(e),this},r.prototype.addLinks=function(e){var t;return(t=this.links).push.apply(t,Ll([],Gi(e),!1)),this},r.prototype.setStatus=function(e){return this._isSpanEnded()?this:(this.status=Dn({},e),this.status.message!=null&&typeof e.message!="string"&&(R.warn("Dropping invalid status.message of type '"+typeof e.message+"', expected 'string'"),delete this.status.message),this)},r.prototype.updateName=function(e){return this._isSpanEnded()?this:(this.name=e,this)},r.prototype.end=function(e){if(this._isSpanEnded()){R.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(e),this._duration=Vc(this.startTime,this.endTime),this._duration[0]<0&&(R.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&R.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},r.prototype._getTime=function(e){if(typeof e=="number"&&e<=jt.now())return Hc(e+this._performanceOffset);if(typeof e=="number")return Pe(e);if(e instanceof Date)return Pe(e.getTime());if(oa(e))return e;if(this._startTimeProvided)return Pe(Date.now());var t=jt.now()-this._performanceStartTime;return aa(this.startTime,Pe(t))},r.prototype.isRecording=function(){return this._ended===!1},r.prototype.recordException=function(e,t){var n={};typeof e=="string"?n[un]=e:e&&(e.code?n[an]=e.code.toString():e.name&&(n[an]=e.name),e.message&&(n[un]=e.message),e.stack&&(n[Lc]=e.stack)),n[an]||n[un]?this.addEvent(Al,n,t):R.warn("Failed to record an exception "+e)},Object.defineProperty(r.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),r.prototype._isSpanEnded=function(){return this._ended&&R.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},r.prototype._truncateToLimitUtil=function(e,t){return e.length<=t?e:e.substring(0,t)},r.prototype._truncateToSize=function(e){var t=this,n=this._attributeValueLengthLimit;return n<=0?(R.warn("Attribute value limit must be positive, got "+n),e):typeof e=="string"?this._truncateToLimitUtil(e,n):Array.isArray(e)?e.map(function(o){return typeof o=="string"?t._truncateToLimitUtil(o,n):o}):e},r}(),Ue;(function(r){r[r.NOT_RECORD=0]="NOT_RECORD",r[r.RECORD=1]="RECORD",r[r.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Ue||(Ue={}));var xr=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:Ue.NOT_RECORD}},r.prototype.toString=function(){return"AlwaysOffSampler"},r}(),Ie=function(){function r(){}return r.prototype.shouldSample=function(){return{decision:Ue.RECORD_AND_SAMPLED}},r.prototype.toString=function(){return"AlwaysOnSampler"},r}(),fn=function(){function r(e){var t,n,o,i;this._root=e.root,this._root||(Kt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new Ie),this._remoteParentSampled=(t=e.remoteParentSampled)!==null&&t!==void 0?t:new Ie,this._remoteParentNotSampled=(n=e.remoteParentNotSampled)!==null&&n!==void 0?n:new xr,this._localParentSampled=(o=e.localParentSampled)!==null&&o!==void 0?o:new Ie,this._localParentNotSampled=(i=e.localParentNotSampled)!==null&&i!==void 0?i:new xr}return r.prototype.shouldSample=function(e,t,n,o,i,a){var s=it.getSpanContext(e);return!s||!Be(s)?this._root.shouldSample(e,t,n,o,i,a):s.isRemote?s.traceFlags&bt.SAMPLED?this._remoteParentSampled.shouldSample(e,t,n,o,i,a):this._remoteParentNotSampled.shouldSample(e,t,n,o,i,a):s.traceFlags&bt.SAMPLED?this._localParentSampled.shouldSample(e,t,n,o,i,a):this._localParentNotSampled.shouldSample(e,t,n,o,i,a)},r.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},r}(),Hi=function(){function r(e){e===void 0&&(e=0),this._ratio=e,this._ratio=this._normalize(e),this._upperBound=Math.floor(this._ratio*4294967295)}return r.prototype.shouldSample=function(e,t){return{decision:Xr(t)&&this._accumulate(t)<this._upperBound?Ue.RECORD_AND_SAMPLED:Ue.NOT_RECORD}},r.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},r.prototype._normalize=function(e){return typeof e!="number"||isNaN(e)?0:e>=1?1:e<=0?0:e},r.prototype._accumulate=function(e){for(var t=0,n=0;n<e.length/8;n++){var o=n*8,i=parseInt(e.slice(o,o+8),16);t=(t^i)>>>0}return t},r}(),Nl=Me(),Cl=Gt.AlwaysOn,Re=1;function ha(){var r=Me();return{sampler:pa(Nl),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:r.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:r.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:r.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:r.OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:r.OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:r.OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT},mergeResourceWithDefaults:!0}}function pa(r){switch(r===void 0&&(r=Me()),r.OTEL_TRACES_SAMPLER){case Gt.AlwaysOn:return new Ie;case Gt.AlwaysOff:return new xr;case Gt.ParentBasedAlwaysOn:return new fn({root:new Ie});case Gt.ParentBasedAlwaysOff:return new fn({root:new xr});case Gt.TraceIdRatio:return new Hi(Vi(r));case Gt.ParentBasedTraceIdRatio:return new fn({root:new Hi(Vi(r))});default:return R.error('OTEL_TRACES_SAMPLER value "'+r.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+Cl+'".'),new Ie}}function Vi(r){if(r.OTEL_TRACES_SAMPLER_ARG===void 0||r.OTEL_TRACES_SAMPLER_ARG==="")return R.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Re+"."),Re;var e=Number(r.OTEL_TRACES_SAMPLER_ARG);return isNaN(e)?(R.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Re+"."),Re):e<0||e>1?(R.error("OTEL_TRACES_SAMPLER_ARG="+r.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Re+"."),Re):e}function Il(r){var e={sampler:pa()},t=ha(),n=Object.assign({},t,e,r);return n.generalLimits=Object.assign({},t.generalLimits,r.generalLimits||{}),n.spanLimits=Object.assign({},t.spanLimits,r.spanLimits||{}),n}function Ml(r){var e,t,n,o,i,a,s,c,u,l,f,m,D=Object.assign({},r.spanLimits),G=hc();return D.attributeCountLimit=(a=(i=(o=(t=(e=r.spanLimits)===null||e===void 0?void 0:e.attributeCountLimit)!==null&&t!==void 0?t:(n=r.generalLimits)===null||n===void 0?void 0:n.attributeCountLimit)!==null&&o!==void 0?o:G.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&i!==void 0?i:G.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&a!==void 0?a:Rr,D.attributeValueLengthLimit=(m=(f=(l=(c=(s=r.spanLimits)===null||s===void 0?void 0:s.attributeValueLengthLimit)!==null&&c!==void 0?c:(u=r.generalLimits)===null||u===void 0?void 0:u.attributeValueLengthLimit)!==null&&l!==void 0?l:G.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&f!==void 0?f:G.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&m!==void 0?m:Ar,Object.assign({},r,{spanLimits:D})}var xl=function(){function r(e,t){this._exporter=e,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var n=Me();this._maxExportBatchSize=typeof t?.maxExportBatchSize=="number"?t.maxExportBatchSize:n.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof t?.maxQueueSize=="number"?t.maxQueueSize:n.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof t?.scheduledDelayMillis=="number"?t.scheduledDelayMillis:n.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof t?.exportTimeoutMillis=="number"?t.exportTimeoutMillis:n.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new _a(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(R.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return r.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){this._shutdownOnce.isCalled||e.spanContext().traceFlags&bt.SAMPLED&&this._addToBuffer(e)},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){var e=this;return Promise.resolve().then(function(){return e.onShutdown()}).then(function(){return e._flushAll()}).then(function(){return e._exporter.shutdown()})},r.prototype._addToBuffer=function(e){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&R.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(R.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(e),this._maybeStartTimer()},r.prototype._flushAll=function(){var e=this;return new Promise(function(t,n){for(var o=[],i=Math.ceil(e._finishedSpans.length/e._maxExportBatchSize),a=0,s=i;a<s;a++)o.push(e._flushOneBatch());Promise.all(o).then(function(){t()}).catch(n)})},r.prototype._flushOneBatch=function(){var e=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(t,n){var o=setTimeout(function(){n(new Error("Timeout"))},e._exportTimeoutMillis);$.with(Vo($.active()),function(){var i;e._finishedSpans.length<=e._maxExportBatchSize?(i=e._finishedSpans,e._finishedSpans=[]):i=e._finishedSpans.splice(0,e._maxExportBatchSize);for(var a=function(){return e._exporter.export(i,function(f){var m;clearTimeout(o),f.code===tr.SUCCESS?t():n((m=f.error)!==null&&m!==void 0?m:new Error("BatchSpanProcessor: span export failed"))})},s=null,c=0,u=i.length;c<u;c++){var l=i[c];l.resource.asyncAttributesPending&&l.resource.waitForAsyncAttributes&&(s??(s=[]),s.push(l.resource.waitForAsyncAttributes()))}s===null?a():Promise.all(s).then(a,function(f){Kt(f),n(f)})})})},r.prototype._maybeStartTimer=function(){var e=this;if(!this._isExporting){var t=function(){e._isExporting=!0,e._flushOneBatch().finally(function(){e._isExporting=!1,e._finishedSpans.length>0&&(e._clearTimer(),e._maybeStartTimer())}).catch(function(n){e._isExporting=!1,Kt(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(function(){return t()},this._scheduledDelayMillis),this._timer,void 0)}},r.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},r}(),Dl=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),va=function(r){Dl(e,r);function e(t,n){var o=r.call(this,t,n)||this;return o.onInit(n),o}return e.prototype.onInit=function(t){var n=this;t?.disableAutoFlushOnDocumentHide!==!0&&typeof document<"u"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&n.forceFlush().catch(function(o){Kt(o)})},this._pageHideListener=function(){n.forceFlush().catch(function(o){Kt(o)})},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},e.prototype.onShutdown=function(){typeof document<"u"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},e}(xl),kl=8,Ul=16,Bl=function(){function r(){this.generateTraceId=ji(Ul),this.generateSpanId=ji(kl)}return r}(),hr=Array(32);function ji(r){return function(){for(var t=0;t<r*2;t++)hr[t]=Math.floor(Math.random()*16)+48,hr[t]>=58&&(hr[t]+=39);return String.fromCharCode.apply(null,hr.slice(0,r*2))}}var Gl=function(){function r(e,t,n){this._tracerProvider=n;var o=Il(t);this._sampler=o.sampler,this._generalLimits=o.generalLimits,this._spanLimits=o.spanLimits,this._idGenerator=t.idGenerator||new Bl,this.resource=n.resource,this.instrumentationLibrary=e}return r.prototype.startSpan=function(e,t,n){var o,i,a;t===void 0&&(t={}),n===void 0&&(n=$.active()),t.root&&(n=it.deleteSpan(n));var s=it.getSpan(n);if(ni(n)){R.debug("Instrumentation suppressed, returning Noop Span");var c=it.wrapSpanContext(Do);return c}var u=s?.spanContext(),l=this._idGenerator.generateSpanId(),f,m,D;!u||!it.isSpanContextValid(u)?f=this._idGenerator.generateTraceId():(f=u.traceId,m=u.traceState,D=u.spanId);var G=(o=t.kind)!==null&&o!==void 0?o:Je.INTERNAL,rt=((i=t.links)!==null&&i!==void 0?i:[]).map(function(ae){return{context:ae.context,attributes:wr(ae.attributes)}}),dt=wr(t.attributes),Q=this._sampler.shouldSample(n,f,e,G,dt,rt);m=(a=Q.traceState)!==null&&a!==void 0?a:m;var B=Q.decision===Ir.RECORD_AND_SAMPLED?bt.SAMPLED:bt.NONE,St={traceId:f,spanId:l,traceFlags:B,traceState:m};if(Q.decision===Ir.NOT_RECORD){R.debug("Recording is off, propagating context in a non-recording span");var c=it.wrapSpanContext(St);return c}var Dt=wr(Object.assign(dt,Q.attributes)),yt=new Pl(this,n,e,St,G,D,rt,t.startTime,void 0,Dt);return yt},r.prototype.startActiveSpan=function(e,t,n,o){var i,a,s;if(!(arguments.length<2)){arguments.length===2?s=t:arguments.length===3?(i=t,s=n):(i=t,a=n,s=o);var c=a??$.active(),u=this.startSpan(e,i,c),l=it.setSpan(c,u);return $.with(l,s,void 0,u)}},r.prototype.getGeneralLimits=function(){return this._generalLimits},r.prototype.getSpanLimits=function(){return this._spanLimits},r.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},r}();function Hl(){return"unknown_service"}var ee=function(){return ee=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},ee.apply(this,arguments)},Vl=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},jl=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Fl=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Dr=function(){function r(e,t){var n=this,o;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=t?.then(function(i){return n._attributes=Object.assign({},n._attributes,i),n.asyncAttributesPending=!1,i},function(i){return R.debug("a resource's async attributes promise rejected: %s",i),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[ra]=Hl(),e[De]=sn[De],e[xe]=sn[xe],e[ke]=sn[ke],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&R.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return Vl(this,void 0,void 0,function(){return jl(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var o=ee(ee({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var s,c=Fl(a,2),u=c[0],l=c[1];return ee(ee(ee(ee({},t._syncAttributes),u),(s=e._syncAttributes)!==null&&s!==void 0?s:e.attributes),l)});return new r(o,i)},r.EMPTY=new r({}),r}(),pr=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Fi=function(){function r(e){this._spanProcessors=e}return r.prototype.forceFlush=function(){var e,t,n=[];try{for(var o=pr(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a.forceFlush())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return new Promise(function(s){Promise.all(n).then(function(){s()}).catch(function(c){Kt(c||new Error("MultiSpanProcessor: forceFlush failed")),s()})})},r.prototype.onStart=function(e,t){var n,o;try{for(var i=pr(this._spanProcessors),a=i.next();!a.done;a=i.next()){var s=a.value;s.onStart(e,t)}}catch(c){n={error:c}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},r.prototype.onEnd=function(e){var t,n;try{for(var o=pr(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;a.onEnd(e)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}},r.prototype.shutdown=function(){var e,t,n=[];try{for(var o=pr(this._spanProcessors),i=o.next();!i.done;i=o.next()){var a=i.value;n.push(a.shutdown())}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return new Promise(function(s,c){Promise.all(n).then(function(){s()},c)})},r}(),Xl=function(){function r(){}return r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){},r.prototype.shutdown=function(){return Promise.resolve()},r.prototype.forceFlush=function(){return Promise.resolve()},r}(),$l=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},zl=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},ce;(function(r){r[r.resolved=0]="resolved",r[r.timeout=1]="timeout",r[r.error=2]="error",r[r.unresolved=3]="unresolved"})(ce||(ce={}));var Zl=function(){function r(e){e===void 0&&(e={});var t,n;this._registeredSpanProcessors=[],this._tracers=new Map;var o=Tl({},ha(),Ml(e));if(this.resource=(t=o.resource)!==null&&t!==void 0?t:Dr.empty(),o.mergeResourceWithDefaults&&(this.resource=Dr.default().merge(this.resource)),this._config=Object.assign({},o,{resource:this.resource}),!((n=e.spanProcessors)===null||n===void 0)&&n.length)this._registeredSpanProcessors=zl([],$l(e.spanProcessors),!1),this.activeSpanProcessor=new Fi(this._registeredSpanProcessors);else{var i=this._buildExporterFromEnv();if(i!==void 0){var a=new va(i);this.activeSpanProcessor=a}else this.activeSpanProcessor=new Xl}}return r.prototype.getTracer=function(e,t,n){var o=e+"@"+(t||"")+":"+(n?.schemaUrl||"");return this._tracers.has(o)||this._tracers.set(o,new Gl({name:e,version:t,schemaUrl:n?.schemaUrl},this._config,this)),this._tracers.get(o)},r.prototype.addSpanProcessor=function(e){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(t){return R.error("Error while trying to shutdown current span processor",t)}),this._registeredSpanProcessors.push(e),this.activeSpanProcessor=new Fi(this._registeredSpanProcessors)},r.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},r.prototype.register=function(e){e===void 0&&(e={}),it.setGlobalTracerProvider(this),e.propagator===void 0&&(e.propagator=this._buildPropagatorFromEnv()),e.contextManager&&$.setGlobalContextManager(e.contextManager),e.propagator&&Ct.setGlobalPropagator(e.propagator)},r.prototype.forceFlush=function(){var e=this._config.forceFlushTimeoutMillis,t=this._registeredSpanProcessors.map(function(n){return new Promise(function(o){var i,a=setTimeout(function(){o(new Error("Span processor did not completed within timeout period of "+e+" ms")),i=ce.timeout},e);n.forceFlush().then(function(){clearTimeout(a),i!==ce.timeout&&(i=ce.resolved,o(i))}).catch(function(s){clearTimeout(a),i=ce.error,o(s)})})});return new Promise(function(n,o){Promise.all(t).then(function(i){var a=i.filter(function(s){return s!==ce.resolved});a.length>0?o(a):n()}).catch(function(i){return o([i])})})},r.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},r.prototype._getPropagator=function(e){var t;return(t=this.constructor._registeredPropagators.get(e))===null||t===void 0?void 0:t()},r.prototype._getSpanExporter=function(e){var t;return(t=this.constructor._registeredExporters.get(e))===null||t===void 0?void 0:t()},r.prototype._buildPropagatorFromEnv=function(){var e=this,t=Array.from(new Set(Me().OTEL_PROPAGATORS)),n=t.map(function(i){var a=e._getPropagator(i);return a||R.warn('Propagator "'+i+'" requested through environment variable is unavailable.'),a}),o=n.reduce(function(i,a){return a&&i.push(a),i},[]);if(o.length!==0)return t.length===1?o[0]:new Fc({propagators:o})},r.prototype._buildExporterFromEnv=function(){var e=Me().OTEL_TRACES_EXPORTER;if(!(e==="none"||e==="")){var t=this._getSpanExporter(e);return t||R.error('Exporter "'+e+'" requested through environment variable is unavailable.'),t}},r._registeredPropagators=new Map([["tracecontext",function(){return new al}],["baggage",function(){return new zs}]]),r._registeredExporters=new Map,r}(),Wl=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Yl=function(){function r(){}return r.prototype.export=function(e,t){return this._sendSpans(e,t)},r.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},r.prototype.forceFlush=function(){return Promise.resolve()},r.prototype._exportInfo=function(e){var t;return{resource:{attributes:e.resource.attributes},instrumentationScope:e.instrumentationLibrary,traceId:e.spanContext().traceId,parentId:e.parentSpanId,traceState:(t=e.spanContext().traceState)===null||t===void 0?void 0:t.serialize(),name:e.name,id:e.spanContext().spanId,kind:e.kind,timestamp:Ii(e.startTime),duration:Ii(e.duration),attributes:e.attributes,status:e.status,events:e.events,links:e.links}},r.prototype._sendSpans=function(e,t){var n,o;try{for(var i=Wl(e),a=i.next();!a.done;a=i.next()){var s=a.value;console.dir(this._exportInfo(s),{depth:3})}}catch(c){n={error:c}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}if(t)return t({code:tr.SUCCESS})},r}(),Kl=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},ql=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ql=function(){function r(e){this._exporter=e,this._shutdownOnce=new _a(this._shutdown,this),this._unresolvedExports=new Set}return r.prototype.forceFlush=function(){return Kl(this,void 0,void 0,function(){return ql(this,function(e){switch(e.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return e.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},r.prototype.onStart=function(e,t){},r.prototype.onEnd=function(e){var t=this,n,o;if(!this._shutdownOnce.isCalled&&e.spanContext().traceFlags&bt.SAMPLED){var i=function(){return wl._export(t._exporter,[e]).then(function(s){var c;s.code!==tr.SUCCESS&&Kt((c=s.error)!==null&&c!==void 0?c:new Error("SimpleSpanProcessor: span export failed (status "+s+")"))}).catch(function(s){Kt(s)})};if(e.resource.asyncAttributesPending){var a=(o=(n=e.resource).waitForAsyncAttributes)===null||o===void 0?void 0:o.call(n).then(function(){return a!=null&&t._unresolvedExports.delete(a),i()},function(s){return Kt(s)});a!=null&&this._unresolvedExports.add(a)}else i()}},r.prototype.shutdown=function(){return this._shutdownOnce.call()},r.prototype._shutdown=function(){return this._exporter.shutdown()},r}(),Jl=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},tf=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},ef=function(){function r(){this._enabled=!1,this._currentContext=Ht}return r.prototype._bindFunction=function(e,t){e===void 0&&(e=Ht);var n=this,o=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.with(e,function(){return t.apply(i,a)})};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),o},r.prototype.active=function(){return this._currentContext},r.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):t},r.prototype.disable=function(){return this._currentContext=Ht,this._enabled=!1,this},r.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=Ht,this)},r.prototype.with=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=this._currentContext;this._currentContext=e||Ht;try{return t.call.apply(t,tf([n],Jl(o),!1))}finally{this._currentContext=a}},r}(),rf=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nf=function(r){rf(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,t)||this;if(t.contextManager)throw"contextManager should be defined in register method not in constructor";if(t.propagator)throw"propagator should be defined in register method not in constructor";return n}return e.prototype.register=function(t){t===void 0&&(t={}),t.contextManager===void 0&&(t.contextManager=new ef),t.contextManager&&t.contextManager.enable(),r.prototype.register.call(this,t)},e}(Zl),ot;(function(r){r.CONNECT_END="connectEnd",r.CONNECT_START="connectStart",r.DECODED_BODY_SIZE="decodedBodySize",r.DOM_COMPLETE="domComplete",r.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",r.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",r.DOM_INTERACTIVE="domInteractive",r.DOMAIN_LOOKUP_END="domainLookupEnd",r.DOMAIN_LOOKUP_START="domainLookupStart",r.ENCODED_BODY_SIZE="encodedBodySize",r.FETCH_START="fetchStart",r.LOAD_EVENT_END="loadEventEnd",r.LOAD_EVENT_START="loadEventStart",r.NAVIGATION_START="navigationStart",r.REDIRECT_END="redirectEnd",r.REDIRECT_START="redirectStart",r.REQUEST_START="requestStart",r.RESPONSE_END="responseEnd",r.RESPONSE_START="responseStart",r.SECURE_CONNECTION_START="secureConnectionStart",r.UNLOAD_EVENT_END="unloadEventEnd",r.UNLOAD_EVENT_START="unloadEventStart"})(ot||(ot={}));function ie(r,e){return e in r}function Ot(r,e,t,n){var o=void 0,i=void 0;ie(t,e)&&typeof t[e]=="number"&&(o=t[e]);var a=ot.FETCH_START;if(ie(t,a)&&typeof t[a]=="number"&&(i=t[a]),o!==void 0&&i!==void 0&&o>=i)return r.addEvent(e,o),r}function Xi(r,e){Ot(r,ot.FETCH_START,e),Ot(r,ot.DOMAIN_LOOKUP_START,e),Ot(r,ot.DOMAIN_LOOKUP_END,e),Ot(r,ot.CONNECT_START,e),ie(e,"name")&&e.name.startsWith("https:")&&Ot(r,ot.SECURE_CONNECTION_START,e),Ot(r,ot.CONNECT_END,e),Ot(r,ot.REQUEST_START,e),Ot(r,ot.RESPONSE_START,e),Ot(r,ot.RESPONSE_END,e);var t=e[ot.ENCODED_BODY_SIZE];t!==void 0&&r.setAttribute(Jo,t);var n=e[ot.DECODED_BODY_SIZE];n!==void 0&&t!==n&&r.setAttribute(ta,n)}function of(r){return r===void 0&&(r={}),typeof r.addEventListener=="function"&&typeof r.removeEventListener=="function"}var $i="OT_ZONE_CONTEXT",af=function(){function r(){this._enabled=!1,this._zoneCounter=0}return r.prototype._activeContextFromZone=function(e){return e&&e.get($i)||Ht},r.prototype._bindFunction=function(e,t){var n=this,o=function(){for(var i=this,a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];return n.with(e,function(){return t.apply(i,a)})};return Object.defineProperty(o,"length",{enumerable:!1,configurable:!0,writable:!1,value:t.length}),o},r.prototype._bindListener=function(e,t){var n=t;return n.__ot_listeners!==void 0||(n.__ot_listeners={},typeof n.addEventListener=="function"&&(n.addEventListener=this._patchAddEventListener(n,n.addEventListener,e)),typeof n.removeEventListener=="function"&&(n.removeEventListener=this._patchRemoveEventListener(n,n.removeEventListener))),t},r.prototype._createZoneName=function(){this._zoneCounter++;var e=Math.random();return this._zoneCounter+"-"+e},r.prototype._createZone=function(e,t){var n;return Zone.current.fork({name:e,properties:(n={},n[$i]=t,n)})},r.prototype._getActiveZone=function(){return Zone.current},r.prototype._patchAddEventListener=function(e,t,n){var o=this;return function(i,a,s){e.__ot_listeners===void 0&&(e.__ot_listeners={});var c=e.__ot_listeners[i];c===void 0&&(c=new WeakMap,e.__ot_listeners[i]=c);var u=o.bind(n,a);return c.set(a,u),t.call(this,i,u,s)}},r.prototype._patchRemoveEventListener=function(e,t){return function(n,o){if(e.__ot_listeners===void 0||e.__ot_listeners[n]===void 0)return t.call(this,n,o);var i=e.__ot_listeners[n],a=i.get(o);return i.delete(o),t.call(this,n,a||o)}},r.prototype.active=function(){if(!this._enabled)return Ht;var e=this._getActiveZone(),t=this._activeContextFromZone(e);return t||Ht},r.prototype.bind=function(e,t){return e===void 0&&(e=this.active()),typeof t=="function"?this._bindFunction(e,t):(of(t)&&this._bindListener(e,t),t)},r.prototype.disable=function(){return this._enabled=!1,this},r.prototype.enable=function(){return this._enabled=!0,this},r.prototype.with=function(e,t,n){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i];var a=this._createZoneName(),s=this._createZone(a,e);return s.run(t,n,o)},r}(),zi={},Zi;function uf(){if(Zi)return zi;Zi=1;/**
 * @license Angular v<unknown>
 * (c) 2010-2024 Google LLC. https://angular.io/
 * License: MIT
 */const r=globalThis;function e(d){return(r.__Zone_symbol_prefix||"__zone_symbol__")+d}function t(){const d=r.performance;function h(tt){d&&d.mark&&d.mark(tt)}function g(tt,E){d&&d.measure&&d.measure(tt,E)}h("Zone");class _{static{this.__symbol__=e}static assertZonePatched(){if(r.Promise!==W.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let E=_.current;for(;E.parent;)E=E.parent;return E}static get current(){return H.zone}static get currentTask(){return z}static __load_patch(E,y,v=!1){if(W.hasOwnProperty(E)){const C=r[e("forceDuplicateZoneCheck")]===!0;if(!v&&C)throw Error("Already loaded patch: "+E)}else if(!r["__Zone_disable_"+E]){const C="Zone:"+E;h(C),W[E]=y(r,_,j),g(C,C)}}get parent(){return this._parent}get name(){return this._name}constructor(E,y){this._parent=E,this._name=y?y.name||"unnamed":"<root>",this._properties=y&&y.properties||{},this._zoneDelegate=new b(this,this._parent&&this._parent._zoneDelegate,y)}get(E){const y=this.getZoneWith(E);if(y)return y._properties[E]}getZoneWith(E){let y=this;for(;y;){if(y._properties.hasOwnProperty(E))return y;y=y._parent}return null}fork(E){if(!E)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,E)}wrap(E,y){if(typeof E!="function")throw new Error("Expecting function got: "+E);const v=this._zoneDelegate.intercept(this,E,y),C=this;return function(){return C.runGuarded(v,this,arguments,y)}}run(E,y,v,C){H={parent:H,zone:this};try{return this._zoneDelegate.invoke(this,E,y,v,C)}finally{H=H.parent}}runGuarded(E,y=null,v,C){H={parent:H,zone:this};try{try{return this._zoneDelegate.invoke(this,E,y,v,C)}catch(lt){if(this._zoneDelegate.handleError(this,lt))throw lt}}finally{H=H.parent}}runTask(E,y,v){if(E.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(E.zone||At).name+"; Execution: "+this.name+")");const C=E,{type:lt,data:{isPeriodic:Pt=!1,isRefreshable:et=!1}={}}=E;if(E.state===gt&&(lt===Et||lt===I))return;const Qt=E.state!=at;Qt&&C._transitionTo(at,A);const ue=z;z=C,H={parent:H,zone:this};try{lt==I&&E.data&&!Pt&&!et&&(E.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,C,y,v)}catch(Lt){if(this._zoneDelegate.handleError(this,Lt))throw Lt}}finally{const Lt=E.state;if(Lt!==gt&&Lt!==mt)if(lt==Et||Pt||et&&Lt===k)Qt&&C._transitionTo(A,at,k);else{const Oe=C._zoneDelegates;this._updateTaskCount(C,-1),Qt&&C._transitionTo(gt,at,gt),et&&(C._zoneDelegates=Oe)}H=H.parent,z=ue}}scheduleTask(E){if(E.zone&&E.zone!==this){let v=this;for(;v;){if(v===E.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${E.zone.name}`);v=v.parent}}E._transitionTo(k,gt);const y=[];E._zoneDelegates=y,E._zone=this;try{E=this._zoneDelegate.scheduleTask(this,E)}catch(v){throw E._transitionTo(mt,k,gt),this._zoneDelegate.handleError(this,v),v}return E._zoneDelegates===y&&this._updateTaskCount(E,1),E.state==k&&E._transitionTo(A,k),E}scheduleMicroTask(E,y,v,C){return this.scheduleTask(new P(_t,E,y,v,C,void 0))}scheduleMacroTask(E,y,v,C,lt){return this.scheduleTask(new P(I,E,y,v,C,lt))}scheduleEventTask(E,y,v,C,lt){return this.scheduleTask(new P(Et,E,y,v,C,lt))}cancelTask(E){if(E.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(E.zone||At).name+"; Execution: "+this.name+")");if(!(E.state!==A&&E.state!==at)){E._transitionTo(ct,A,at);try{this._zoneDelegate.cancelTask(this,E)}catch(y){throw E._transitionTo(mt,ct),this._zoneDelegate.handleError(this,y),y}return this._updateTaskCount(E,-1),E._transitionTo(gt,ct),E.runCount=-1,E}}_updateTaskCount(E,y){const v=E._zoneDelegates;y==-1&&(E._zoneDelegates=null);for(let C=0;C<v.length;C++)v[C]._updateTaskCount(E.type,y)}}const T={name:"",onHasTask:(tt,E,y,v)=>tt.hasTask(y,v),onScheduleTask:(tt,E,y,v)=>tt.scheduleTask(y,v),onInvokeTask:(tt,E,y,v,C,lt)=>tt.invokeTask(y,v,C,lt),onCancelTask:(tt,E,y,v)=>tt.cancelTask(y,v)};class b{get zone(){return this._zone}constructor(E,y,v){this._taskCounts={microTask:0,macroTask:0,eventTask:0},this._zone=E,this._parentDelegate=y,this._forkZS=v&&(v&&v.onFork?v:y._forkZS),this._forkDlgt=v&&(v.onFork?y:y._forkDlgt),this._forkCurrZone=v&&(v.onFork?this._zone:y._forkCurrZone),this._interceptZS=v&&(v.onIntercept?v:y._interceptZS),this._interceptDlgt=v&&(v.onIntercept?y:y._interceptDlgt),this._interceptCurrZone=v&&(v.onIntercept?this._zone:y._interceptCurrZone),this._invokeZS=v&&(v.onInvoke?v:y._invokeZS),this._invokeDlgt=v&&(v.onInvoke?y:y._invokeDlgt),this._invokeCurrZone=v&&(v.onInvoke?this._zone:y._invokeCurrZone),this._handleErrorZS=v&&(v.onHandleError?v:y._handleErrorZS),this._handleErrorDlgt=v&&(v.onHandleError?y:y._handleErrorDlgt),this._handleErrorCurrZone=v&&(v.onHandleError?this._zone:y._handleErrorCurrZone),this._scheduleTaskZS=v&&(v.onScheduleTask?v:y._scheduleTaskZS),this._scheduleTaskDlgt=v&&(v.onScheduleTask?y:y._scheduleTaskDlgt),this._scheduleTaskCurrZone=v&&(v.onScheduleTask?this._zone:y._scheduleTaskCurrZone),this._invokeTaskZS=v&&(v.onInvokeTask?v:y._invokeTaskZS),this._invokeTaskDlgt=v&&(v.onInvokeTask?y:y._invokeTaskDlgt),this._invokeTaskCurrZone=v&&(v.onInvokeTask?this._zone:y._invokeTaskCurrZone),this._cancelTaskZS=v&&(v.onCancelTask?v:y._cancelTaskZS),this._cancelTaskDlgt=v&&(v.onCancelTask?y:y._cancelTaskDlgt),this._cancelTaskCurrZone=v&&(v.onCancelTask?this._zone:y._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;const C=v&&v.onHasTask,lt=y&&y._hasTaskZS;(C||lt)&&(this._hasTaskZS=C?v:T,this._hasTaskDlgt=y,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,v.onScheduleTask||(this._scheduleTaskZS=T,this._scheduleTaskDlgt=y,this._scheduleTaskCurrZone=this._zone),v.onInvokeTask||(this._invokeTaskZS=T,this._invokeTaskDlgt=y,this._invokeTaskCurrZone=this._zone),v.onCancelTask||(this._cancelTaskZS=T,this._cancelTaskDlgt=y,this._cancelTaskCurrZone=this._zone))}fork(E,y){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,E,y):new _(E,y)}intercept(E,y,v){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,E,y,v):y}invoke(E,y,v,C,lt){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,E,y,v,C,lt):y.apply(v,C)}handleError(E,y){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,E,y):!0}scheduleTask(E,y){let v=y;if(this._scheduleTaskZS)this._hasTaskZS&&v._zoneDelegates.push(this._hasTaskDlgtOwner),v=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,E,y),v||(v=y);else if(y.scheduleFn)y.scheduleFn(y);else if(y.type==_t)vt(y);else throw new Error("Task is missing scheduleFn.");return v}invokeTask(E,y,v,C){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,E,y,v,C):y.callback.apply(v,C)}cancelTask(E,y){let v;if(this._cancelTaskZS)v=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,E,y);else{if(!y.cancelFn)throw Error("Task is not cancelable");v=y.cancelFn(y)}return v}hasTask(E,y){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,E,y)}catch(v){this.handleError(E,v)}}_updateTaskCount(E,y){const v=this._taskCounts,C=v[E],lt=v[E]=C+y;if(lt<0)throw new Error("More tasks executed then were scheduled.");if(C==0||lt==0){const Pt={microTask:v.microTask>0,macroTask:v.macroTask>0,eventTask:v.eventTask>0,change:E};this.hasTask(this._zone,Pt)}}}class P{constructor(E,y,v,C,lt,Pt){if(this._zone=null,this.runCount=0,this._zoneDelegates=null,this._state="notScheduled",this.type=E,this.source=y,this.data=C,this.scheduleFn=lt,this.cancelFn=Pt,!v)throw new Error("callback is not defined");this.callback=v;const et=this;E===Et&&C&&C.useG?this.invoke=P.invokeTask:this.invoke=function(){return P.invokeTask.call(r,et,this,arguments)}}static invokeTask(E,y,v){E||(E=this),Rt++;try{return E.runCount++,E.zone.runTask(E,y,v)}finally{Rt==1&&wt(),Rt--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(gt,k)}_transitionTo(E,y,v){if(this._state===y||this._state===v)this._state=E,E==gt&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${E}', expecting state '${y}'${v?" or '"+v+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}const N=e("setTimeout"),x=e("Promise"),X=e("then");let L=[],V=!1,J;function st(tt){if(J||r[x]&&(J=r[x].resolve(0)),J){let E=J[X];E||(E=J.then),E.call(J,tt)}else r[N](tt,0)}function vt(tt){Rt===0&&L.length===0&&st(wt),tt&&L.push(tt)}function wt(){if(!V){for(V=!0;L.length;){const tt=L;L=[];for(let E=0;E<tt.length;E++){const y=tt[E];try{y.zone.runTask(y,null,null)}catch(v){j.onUnhandledError(v)}}}j.microtaskDrainDone(),V=!1}}const At={name:"NO ZONE"},gt="notScheduled",k="scheduling",A="scheduled",at="running",ct="canceling",mt="unknown",_t="microTask",I="macroTask",Et="eventTask",W={},j={symbol:e,currentZoneFrame:()=>H,onUnhandledError:Tt,microtaskDrainDone:Tt,scheduleMicroTask:vt,showUncaughtError:()=>!_[e("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:Tt,patchMethod:()=>Tt,bindArguments:()=>[],patchThen:()=>Tt,patchMacroTask:()=>Tt,patchEventPrototype:()=>Tt,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>Tt,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>Tt,wrapWithCurrentZone:()=>Tt,filterProperties:()=>[],attachOriginToPatched:()=>Tt,_redefineProperty:()=>Tt,patchCallbacks:()=>Tt,nativeScheduleMicroTask:st};let H={parent:null,zone:new _(null,null)},z=null,Rt=0;function Tt(){}return g("Zone","Zone"),_}function n(){const d=globalThis,h=d[e("forceDuplicateZoneCheck")]===!0;if(d.Zone&&(h||typeof d.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return d.Zone??=t(),d.Zone}const o=Object.getOwnPropertyDescriptor,i=Object.defineProperty,a=Object.getPrototypeOf,s=Object.create,c=Array.prototype.slice,u="addEventListener",l="removeEventListener",f=e(u),m=e(l),D="true",G="false",rt=e("");function dt(d,h){return Zone.current.wrap(d,h)}function Q(d,h,g,_,T){return Zone.current.scheduleMacroTask(d,h,g,_,T)}const B=e,St=typeof window<"u",Dt=St?window:void 0,yt=St&&Dt||globalThis,ae="removeAttribute";function Ge(d,h){for(let g=d.length-1;g>=0;g--)typeof d[g]=="function"&&(d[g]=dt(d[g],h+"_"+g));return d}function sr(d,h){const g=d.constructor.name;for(let _=0;_<h.length;_++){const T=h[_],b=d[T];if(b){const P=o(d,T);if(!ge(P))continue;d[T]=(N=>{const x=function(){return N.apply(this,Ge(arguments,g+"."+T))};return $t(x,N),x})(b)}}}function ge(d){return d?d.writable===!1?!1:!(typeof d.get=="function"&&typeof d.set>"u"):!0}const cr=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,lr=!("nw"in yt)&&typeof yt.process<"u"&&yt.process.toString()==="[object process]",Wr=!lr&&!cr&&!!(St&&Dt.HTMLElement),li=typeof yt.process<"u"&&yt.process.toString()==="[object process]"&&!cr&&!!(St&&Dt.HTMLElement),fr={},cu=B("enable_beforeunload"),fi=function(d){if(d=d||yt.event,!d)return;let h=fr[d.type];h||(h=fr[d.type]=B("ON_PROPERTY"+d.type));const g=this||d.target||yt,_=g[h];let T;if(Wr&&g===Dt&&d.type==="error"){const b=d;T=_&&_.call(this,b.message,b.filename,b.lineno,b.colno,b.error),T===!0&&d.preventDefault()}else T=_&&_.apply(this,arguments),d.type==="beforeunload"&&yt[cu]&&typeof T=="string"?d.returnValue=T:T!=null&&!T&&d.preventDefault();return T};function di(d,h,g){let _=o(d,h);if(!_&&g&&o(g,h)&&(_={enumerable:!0,configurable:!0}),!_||!_.configurable)return;const T=B("on"+h+"patched");if(d.hasOwnProperty(T)&&d[T])return;delete _.writable,delete _.value;const b=_.get,P=_.set,N=h.slice(2);let x=fr[N];x||(x=fr[N]=B("ON_PROPERTY"+N)),_.set=function(X){let L=this;if(!L&&d===yt&&(L=yt),!L)return;typeof L[x]=="function"&&L.removeEventListener(N,fi),P&&P.call(L,null),L[x]=X,typeof X=="function"&&L.addEventListener(N,fi,!1)},_.get=function(){let X=this;if(!X&&d===yt&&(X=yt),!X)return null;const L=X[x];if(L)return L;if(b){let V=b.call(this);if(V)return _.set.call(this,V),typeof X[ae]=="function"&&X.removeAttribute(h),V}return null},i(d,h,_),d[T]=!0}function _i(d,h,g){if(h)for(let _=0;_<h.length;_++)di(d,"on"+h[_],g);else{const _=[];for(const T in d)T.slice(0,2)=="on"&&_.push(T);for(let T=0;T<_.length;T++)di(d,_[T],g)}}const It=B("originalInstance");function He(d){const h=yt[d];if(!h)return;yt[B(d)]=h,yt[d]=function(){const T=Ge(arguments,d);switch(T.length){case 0:this[It]=new h;break;case 1:this[It]=new h(T[0]);break;case 2:this[It]=new h(T[0],T[1]);break;case 3:this[It]=new h(T[0],T[1],T[2]);break;case 4:this[It]=new h(T[0],T[1],T[2],T[3]);break;default:throw new Error("Arg list too long.")}},$t(yt[d],h);const g=new h(function(){});let _;for(_ in g)d==="XMLHttpRequest"&&_==="responseBlob"||function(T){typeof g[T]=="function"?yt[d].prototype[T]=function(){return this[It][T].apply(this[It],arguments)}:i(yt[d].prototype,T,{set:function(b){typeof b=="function"?(this[It][T]=dt(b,d+"."+T),$t(this[It][T],b)):this[It][T]=b},get:function(){return this[It][T]}})}(_);for(_ in h)_!=="prototype"&&h.hasOwnProperty(_)&&(yt[d][_]=h[_])}function Xt(d,h,g){let _=d;for(;_&&!_.hasOwnProperty(h);)_=a(_);!_&&d[h]&&(_=d);const T=B(h);let b=null;if(_&&(!(b=_[T])||!_.hasOwnProperty(T))){b=_[T]=_[h];const P=_&&o(_,h);if(ge(P)){const N=g(b,T,h);_[h]=function(){return N(this,arguments)},$t(_[h],b)}}return b}function lu(d,h,g){let _=null;function T(b){const P=b.data;return P.args[P.cbIdx]=function(){b.invoke.apply(this,arguments)},_.apply(P.target,P.args),b}_=Xt(d,h,b=>function(P,N){const x=g(P,N);return x.cbIdx>=0&&typeof N[x.cbIdx]=="function"?Q(x.name,N[x.cbIdx],x,T):b.apply(P,N)})}function $t(d,h){d[B("OriginalDelegate")]=h}let hi=!1,Yr=!1;function fu(){try{const d=Dt.navigator.userAgent;if(d.indexOf("MSIE ")!==-1||d.indexOf("Trident/")!==-1)return!0}catch{}return!1}function du(){if(hi)return Yr;hi=!0;try{const d=Dt.navigator.userAgent;(d.indexOf("MSIE ")!==-1||d.indexOf("Trident/")!==-1||d.indexOf("Edge/")!==-1)&&(Yr=!0)}catch{}return Yr}function pi(d){return typeof d=="function"}function vi(d){return typeof d=="number"}let me=!1;if(typeof window<"u")try{const d=Object.defineProperty({},"passive",{get:function(){me=!0}});window.addEventListener("test",d,d),window.removeEventListener("test",d,d)}catch{me=!1}const _u={useG:!0},Nt={},Ei={},yi=new RegExp("^"+rt+"(\\w+)(true|false)$"),Ti=B("propagationStopped");function gi(d,h){const g=(h?h(d):d)+G,_=(h?h(d):d)+D,T=rt+g,b=rt+_;Nt[d]={},Nt[d][G]=T,Nt[d][D]=b}function hu(d,h,g,_){const T=_&&_.add||u,b=_&&_.rm||l,P=_&&_.listeners||"eventListeners",N=_&&_.rmAll||"removeAllListeners",x=B(T),X="."+T+":",L="prependListener",V="."+L+":",J=function(k,A,at){if(k.isRemoved)return;const ct=k.callback;typeof ct=="object"&&ct.handleEvent&&(k.callback=I=>ct.handleEvent(I),k.originalDelegate=ct);let mt;try{k.invoke(k,A,[at])}catch(I){mt=I}const _t=k.options;if(_t&&typeof _t=="object"&&_t.once){const I=k.originalDelegate?k.originalDelegate:k.callback;A[b].call(A,at.type,I,_t)}return mt};function st(k,A,at){if(A=A||d.event,!A)return;const ct=k||A.target||d,mt=ct[Nt[A.type][at?D:G]];if(mt){const _t=[];if(mt.length===1){const I=J(mt[0],ct,A);I&&_t.push(I)}else{const I=mt.slice();for(let Et=0;Et<I.length&&!(A&&A[Ti]===!0);Et++){const W=J(I[Et],ct,A);W&&_t.push(W)}}if(_t.length===1)throw _t[0];for(let I=0;I<_t.length;I++){const Et=_t[I];h.nativeScheduleMicroTask(()=>{throw Et})}}}const vt=function(k){return st(this,k,!1)},wt=function(k){return st(this,k,!0)};function At(k,A){if(!k)return!1;let at=!0;A&&A.useG!==void 0&&(at=A.useG);const ct=A&&A.vh;let mt=!0;A&&A.chkDup!==void 0&&(mt=A.chkDup);let _t=!1;A&&A.rt!==void 0&&(_t=A.rt);let I=k;for(;I&&!I.hasOwnProperty(T);)I=a(I);if(!I&&k[T]&&(I=k),!I||I[x])return!1;const Et=A&&A.eventNameToString,W={},j=I[x]=I[T],H=I[B(b)]=I[b],z=I[B(P)]=I[P],Rt=I[B(N)]=I[N];let Tt;A&&A.prepend&&(Tt=I[B(A.prepend)]=I[A.prepend]);function tt(p,O){return!me&&typeof p=="object"&&p?!!p.capture:!me||!O?p:typeof p=="boolean"?{capture:p,passive:!0}:p?typeof p=="object"&&p.passive!==!1?{...p,passive:!0}:p:{passive:!0}}const E=function(p){if(!W.isExisting)return j.call(W.target,W.eventName,W.capture?wt:vt,W.options)},y=function(p){if(!p.isRemoved){const O=Nt[p.eventName];let U;O&&(U=O[p.capture?D:G]);const F=U&&p.target[U];if(F){for(let M=0;M<F.length;M++)if(F[M]===p){F.splice(M,1),p.isRemoved=!0,p.removeAbortListener&&(p.removeAbortListener(),p.removeAbortListener=null),F.length===0&&(p.allRemoved=!0,p.target[U]=null);break}}}if(p.allRemoved)return H.call(p.target,p.eventName,p.capture?wt:vt,p.options)},v=function(p){return j.call(W.target,W.eventName,p.invoke,W.options)},C=function(p){return Tt.call(W.target,W.eventName,p.invoke,W.options)},lt=function(p){return H.call(p.target,p.eventName,p.invoke,p.options)},Pt=at?E:v,et=at?y:lt,Qt=function(p,O){const U=typeof O;return U==="function"&&p.callback===O||U==="object"&&p.originalDelegate===O},ue=A&&A.diff?A.diff:Qt,Lt=Zone[B("UNPATCHED_EVENTS")],Oe=d[B("PASSIVE_EVENTS")];function w(p){if(typeof p=="object"&&p!==null){const O={...p};return p.signal&&(O.signal=p.signal),O}return p}const S=function(p,O,U,F,M=!1,Y=!1){return function(){const K=this||d;let q=arguments[0];A&&A.transferEventName&&(q=A.transferEventName(q));let ht=arguments[1];if(!ht)return p.apply(this,arguments);if(lr&&q==="uncaughtException")return p.apply(this,arguments);let pt=!1;if(typeof ht!="function"){if(!ht.handleEvent)return p.apply(this,arguments);pt=!0}if(ct&&!ct(p,ht,K,arguments))return;const Jt=me&&!!Oe&&Oe.indexOf(q)!==-1,kt=w(tt(arguments[2],Jt)),be=kt?.signal;if(be?.aborted)return;if(Lt){for(let Ut=0;Ut<Lt.length;Ut++)if(q===Lt[Ut])return Jt?p.call(K,q,ht,kt):p.apply(this,arguments)}const qr=kt?typeof kt=="boolean"?!0:kt.capture:!1,wi=kt&&typeof kt=="object"?kt.once:!1,Ru=Zone.current;let Qr=Nt[q];Qr||(gi(q,Et),Qr=Nt[q]);const Ai=Qr[qr?D:G];let we=K[Ai],Ri=!1;if(we){if(Ri=!0,mt){for(let Ut=0;Ut<we.length;Ut++)if(ue(we[Ut],ht))return}}else we=K[Ai]=[];let _r;const Li=K.constructor.name,Pi=Ei[Li];Pi&&(_r=Pi[q]),_r||(_r=Li+O+(Et?Et(q):q)),W.options=kt,wi&&(W.options.once=!1),W.target=K,W.capture=qr,W.eventName=q,W.isExisting=Ri;const Ve=at?_u:void 0;Ve&&(Ve.taskData=W),be&&(W.options.signal=void 0);const Mt=Ru.scheduleEventTask(_r,ht,Ve,U,F);if(be){W.options.signal=be;const Ut=()=>Mt.zone.cancelTask(Mt);p.call(be,"abort",Ut,{once:!0}),Mt.removeAbortListener=()=>be.removeEventListener("abort",Ut)}if(W.target=null,Ve&&(Ve.taskData=null),wi&&(W.options.once=!0),!me&&typeof Mt.options=="boolean"||(Mt.options=kt),Mt.target=K,Mt.capture=qr,Mt.eventName=q,pt&&(Mt.originalDelegate=ht),Y?we.unshift(Mt):we.push(Mt),M)return K}};return I[T]=S(j,X,Pt,et,_t),Tt&&(I[L]=S(Tt,V,C,et,_t,!0)),I[b]=function(){const p=this||d;let O=arguments[0];A&&A.transferEventName&&(O=A.transferEventName(O));const U=arguments[2],F=U?typeof U=="boolean"?!0:U.capture:!1,M=arguments[1];if(!M)return H.apply(this,arguments);if(ct&&!ct(H,M,p,arguments))return;const Y=Nt[O];let K;Y&&(K=Y[F?D:G]);const q=K&&p[K];if(q)for(let ht=0;ht<q.length;ht++){const pt=q[ht];if(ue(pt,M)){if(q.splice(ht,1),pt.isRemoved=!0,q.length===0&&(pt.allRemoved=!0,p[K]=null,!F&&typeof O=="string")){const Jt=rt+"ON_PROPERTY"+O;p[Jt]=null}return pt.zone.cancelTask(pt),_t?p:void 0}}return H.apply(this,arguments)},I[P]=function(){const p=this||d;let O=arguments[0];A&&A.transferEventName&&(O=A.transferEventName(O));const U=[],F=mi(p,Et?Et(O):O);for(let M=0;M<F.length;M++){const Y=F[M];let K=Y.originalDelegate?Y.originalDelegate:Y.callback;U.push(K)}return U},I[N]=function(){const p=this||d;let O=arguments[0];if(O){A&&A.transferEventName&&(O=A.transferEventName(O));const U=Nt[O];if(U){const F=U[G],M=U[D],Y=p[F],K=p[M];if(Y){const q=Y.slice();for(let ht=0;ht<q.length;ht++){const pt=q[ht];let Jt=pt.originalDelegate?pt.originalDelegate:pt.callback;this[b].call(this,O,Jt,pt.options)}}if(K){const q=K.slice();for(let ht=0;ht<q.length;ht++){const pt=q[ht];let Jt=pt.originalDelegate?pt.originalDelegate:pt.callback;this[b].call(this,O,Jt,pt.options)}}}}else{const U=Object.keys(p);for(let F=0;F<U.length;F++){const M=U[F],Y=yi.exec(M);let K=Y&&Y[1];K&&K!=="removeListener"&&this[N].call(this,K)}this[N].call(this,"removeListener")}if(_t)return this},$t(I[T],j),$t(I[b],H),Rt&&$t(I[N],Rt),z&&$t(I[P],z),!0}let gt=[];for(let k=0;k<g.length;k++)gt[k]=At(g[k],_);return gt}function mi(d,h){if(!h){const b=[];for(let P in d){const N=yi.exec(P);let x=N&&N[1];if(x&&(!h||x===h)){const X=d[P];if(X)for(let L=0;L<X.length;L++)b.push(X[L])}}return b}let g=Nt[h];g||(gi(h),g=Nt[h]);const _=d[g[G]],T=d[g[D]];return _?T?_.concat(T):_.slice():T?T.slice():[]}function pu(d,h){const g=d.Event;g&&g.prototype&&h.patchMethod(g.prototype,"stopImmediatePropagation",_=>function(T,b){T[Ti]=!0,_&&_.apply(T,b)})}function vu(d,h){h.patchMethod(d,"queueMicrotask",g=>function(_,T){Zone.current.scheduleMicroTask("queueMicrotask",T[0])})}const dr=B("zoneTask");function Se(d,h,g,_){let T=null,b=null;h+=_,g+=_;const P={};function N(X){const L=X.data;L.args[0]=function(){return X.invoke.apply(this,arguments)};const V=T.apply(d,L.args);return vi(V)?L.handleId=V:(L.handle=V,L.isRefreshable=pi(V.refresh)),X}function x(X){const{handle:L,handleId:V}=X.data;return b.call(d,L??V)}T=Xt(d,h,X=>function(L,V){if(pi(V[0])){const J={isRefreshable:!1,isPeriodic:_==="Interval",delay:_==="Timeout"||_==="Interval"?V[1]||0:void 0,args:V},st=V[0];V[0]=function(){try{return st.apply(this,arguments)}finally{const{handle:at,handleId:ct,isPeriodic:mt,isRefreshable:_t}=J;!mt&&!_t&&(ct?delete P[ct]:at&&(at[dr]=null))}};const vt=Q(h,V[0],J,N,x);if(!vt)return vt;const{handleId:wt,handle:At,isRefreshable:gt,isPeriodic:k}=vt.data;if(wt)P[wt]=vt;else if(At&&(At[dr]=vt,gt&&!k)){const A=At.refresh;At.refresh=function(){const{zone:at,state:ct}=vt;return ct==="notScheduled"?(vt._state="scheduled",at._updateTaskCount(vt,1)):ct==="running"&&(vt._state="scheduling"),A.call(this)}}return At??wt??vt}else return X.apply(d,V)}),b=Xt(d,g,X=>function(L,V){const J=V[0];let st;vi(J)?(st=P[J],delete P[J]):(st=J?.[dr],st?J[dr]=null:st=J),st?.type?st.cancelFn&&st.zone.cancelTask(st):X.apply(d,V)})}function Eu(d,h){const{isBrowser:g,isMix:_}=h.getGlobalObjects();if(!g&&!_||!d.customElements||!("customElements"in d))return;const T=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];h.patchCallbacks(h,d.customElements,"customElements","define",T)}function yu(d,h){if(Zone[h.symbol("patchEventTarget")])return;const{eventNames:g,zoneSymbolEventNames:_,TRUE_STR:T,FALSE_STR:b,ZONE_SYMBOL_PREFIX:P}=h.getGlobalObjects();for(let x=0;x<g.length;x++){const X=g[x],L=X+b,V=X+T,J=P+L,st=P+V;_[X]={},_[X][b]=J,_[X][T]=st}const N=d.EventTarget;if(!(!N||!N.prototype))return h.patchEventTarget(d,h,[N&&N.prototype]),!0}function Tu(d,h){h.patchEventPrototype(d,h)}function Si(d,h,g){if(!g||g.length===0)return h;const _=g.filter(b=>b.target===d);if(!_||_.length===0)return h;const T=_[0].ignoreProperties;return h.filter(b=>T.indexOf(b)===-1)}function Oi(d,h,g,_){if(!d)return;const T=Si(d,h,g);_i(d,T,_)}function Kr(d){return Object.getOwnPropertyNames(d).filter(h=>h.startsWith("on")&&h.length>2).map(h=>h.substring(2))}function gu(d,h){if(lr&&!li||Zone[d.symbol("patchEvents")])return;const g=h.__Zone_ignore_on_properties;let _=[];if(Wr){const T=window;_=_.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);const b=fu()?[{target:T,ignoreProperties:["error"]}]:[];Oi(T,Kr(T),g&&g.concat(b),a(T))}_=_.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let T=0;T<_.length;T++){const b=h[_[T]];b&&b.prototype&&Oi(b.prototype,Kr(b.prototype),g)}}function mu(d){d.__load_patch("legacy",h=>{const g=h[d.__symbol__("legacyPatch")];g&&g()}),d.__load_patch("timers",h=>{const g="set",_="clear";Se(h,g,_,"Timeout"),Se(h,g,_,"Interval"),Se(h,g,_,"Immediate")}),d.__load_patch("requestAnimationFrame",h=>{Se(h,"request","cancel","AnimationFrame"),Se(h,"mozRequest","mozCancel","AnimationFrame"),Se(h,"webkitRequest","webkitCancel","AnimationFrame")}),d.__load_patch("blocking",(h,g)=>{const _=["alert","prompt","confirm"];for(let T=0;T<_.length;T++){const b=_[T];Xt(h,b,(P,N,x)=>function(X,L){return g.current.run(P,h,L,x)})}}),d.__load_patch("EventTarget",(h,g,_)=>{Tu(h,_),yu(h,_);const T=h.XMLHttpRequestEventTarget;T&&T.prototype&&_.patchEventTarget(h,_,[T.prototype])}),d.__load_patch("MutationObserver",(h,g,_)=>{He("MutationObserver"),He("WebKitMutationObserver")}),d.__load_patch("IntersectionObserver",(h,g,_)=>{He("IntersectionObserver")}),d.__load_patch("FileReader",(h,g,_)=>{He("FileReader")}),d.__load_patch("on_property",(h,g,_)=>{gu(_,h)}),d.__load_patch("customElements",(h,g,_)=>{Eu(h,_)}),d.__load_patch("XHR",(h,g)=>{X(h);const _=B("xhrTask"),T=B("xhrSync"),b=B("xhrListener"),P=B("xhrScheduled"),N=B("xhrURL"),x=B("xhrErrorBeforeScheduled");function X(L){const V=L.XMLHttpRequest;if(!V)return;const J=V.prototype;function st(j){return j[_]}let vt=J[f],wt=J[m];if(!vt){const j=L.XMLHttpRequestEventTarget;if(j){const H=j.prototype;vt=H[f],wt=H[m]}}const At="readystatechange",gt="scheduled";function k(j){const H=j.data,z=H.target;z[P]=!1,z[x]=!1;const Rt=z[b];vt||(vt=z[f],wt=z[m]),Rt&&wt.call(z,At,Rt);const Tt=z[b]=()=>{if(z.readyState===z.DONE)if(!H.aborted&&z[P]&&j.state===gt){const E=z[g.__symbol__("loadfalse")];if(z.status!==0&&E&&E.length>0){const y=j.invoke;j.invoke=function(){const v=z[g.__symbol__("loadfalse")];for(let C=0;C<v.length;C++)v[C]===j&&v.splice(C,1);!H.aborted&&j.state===gt&&y.call(j)},E.push(j)}else j.invoke()}else!H.aborted&&z[P]===!1&&(z[x]=!0)};return vt.call(z,At,Tt),z[_]||(z[_]=j),Et.apply(z,H.args),z[P]=!0,j}function A(){}function at(j){const H=j.data;return H.aborted=!0,W.apply(H.target,H.args)}const ct=Xt(J,"open",()=>function(j,H){return j[T]=H[2]==!1,j[N]=H[1],ct.apply(j,H)}),mt="XMLHttpRequest.send",_t=B("fetchTaskAborting"),I=B("fetchTaskScheduling"),Et=Xt(J,"send",()=>function(j,H){if(g.current[I]===!0||j[T])return Et.apply(j,H);{const z={target:j,url:j[N],isPeriodic:!1,args:H,aborted:!1},Rt=Q(mt,A,z,k,at);j&&j[x]===!0&&!z.aborted&&Rt.state===gt&&Rt.invoke()}}),W=Xt(J,"abort",()=>function(j,H){const z=st(j);if(z&&typeof z.type=="string"){if(z.cancelFn==null||z.data&&z.data.aborted)return;z.zone.cancelTask(z)}else if(g.current[_t]===!0)return W.apply(j,H)})}}),d.__load_patch("geolocation",h=>{h.navigator&&h.navigator.geolocation&&sr(h.navigator.geolocation,["getCurrentPosition","watchPosition"])}),d.__load_patch("PromiseRejectionEvent",(h,g)=>{function _(T){return function(b){mi(h,T).forEach(N=>{const x=h.PromiseRejectionEvent;if(x){const X=new x(T,{promise:b.promise,reason:b.rejection});N.invoke(X)}})}}h.PromiseRejectionEvent&&(g[B("unhandledPromiseRejectionHandler")]=_("unhandledrejection"),g[B("rejectionHandledHandler")]=_("rejectionhandled"))}),d.__load_patch("queueMicrotask",(h,g,_)=>{vu(h,_)})}function Su(d){d.__load_patch("ZoneAwarePromise",(h,g,_)=>{const T=Object.getOwnPropertyDescriptor,b=Object.defineProperty;function P(w){if(w&&w.toString===Object.prototype.toString){const S=w.constructor&&w.constructor.name;return(S||"")+": "+JSON.stringify(w)}return w?w.toString():Object.prototype.toString.call(w)}const N=_.symbol,x=[],X=h[N("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,L=N("Promise"),V=N("then"),J="__creationTrace__";_.onUnhandledError=w=>{if(_.showUncaughtError()){const S=w&&w.rejection;S?console.error("Unhandled Promise rejection:",S instanceof Error?S.message:S,"; Zone:",w.zone.name,"; Task:",w.task&&w.task.source,"; Value:",S,S instanceof Error?S.stack:void 0):console.error(w)}},_.microtaskDrainDone=()=>{for(;x.length;){const w=x.shift();try{w.zone.runGuarded(()=>{throw w.throwOriginal?w.rejection:w})}catch(S){vt(S)}}};const st=N("unhandledPromiseRejectionHandler");function vt(w){_.onUnhandledError(w);try{const S=g[st];typeof S=="function"&&S.call(this,w)}catch{}}function wt(w){return w&&w.then}function At(w){return w}function gt(w){return et.reject(w)}const k=N("state"),A=N("value"),at=N("finally"),ct=N("parentPromiseValue"),mt=N("parentPromiseState"),_t="Promise.then",I=null,Et=!0,W=!1,j=0;function H(w,S){return p=>{try{tt(w,S,p)}catch(O){tt(w,!1,O)}}}const z=function(){let w=!1;return function(p){return function(){w||(w=!0,p.apply(null,arguments))}}},Rt="Promise resolved with itself",Tt=N("currentTaskTrace");function tt(w,S,p){const O=z();if(w===p)throw new TypeError(Rt);if(w[k]===I){let U=null;try{(typeof p=="object"||typeof p=="function")&&(U=p&&p.then)}catch(F){return O(()=>{tt(w,!1,F)})(),w}if(S!==W&&p instanceof et&&p.hasOwnProperty(k)&&p.hasOwnProperty(A)&&p[k]!==I)y(p),tt(w,p[k],p[A]);else if(S!==W&&typeof U=="function")try{U.call(p,O(H(w,S)),O(H(w,!1)))}catch(F){O(()=>{tt(w,!1,F)})()}else{w[k]=S;const F=w[A];if(w[A]=p,w[at]===at&&S===Et&&(w[k]=w[mt],w[A]=w[ct]),S===W&&p instanceof Error){const M=g.currentTask&&g.currentTask.data&&g.currentTask.data[J];M&&b(p,Tt,{configurable:!0,enumerable:!1,writable:!0,value:M})}for(let M=0;M<F.length;)v(w,F[M++],F[M++],F[M++],F[M++]);if(F.length==0&&S==W){w[k]=j;let M=p;try{throw new Error("Uncaught (in promise): "+P(p)+(p&&p.stack?`
`+p.stack:""))}catch(Y){M=Y}X&&(M.throwOriginal=!0),M.rejection=p,M.promise=w,M.zone=g.current,M.task=g.currentTask,x.push(M),_.scheduleMicroTask()}}}return w}const E=N("rejectionHandledHandler");function y(w){if(w[k]===j){try{const S=g[E];S&&typeof S=="function"&&S.call(this,{rejection:w[A],promise:w})}catch{}w[k]=W;for(let S=0;S<x.length;S++)w===x[S].promise&&x.splice(S,1)}}function v(w,S,p,O,U){y(w);const F=w[k],M=F?typeof O=="function"?O:At:typeof U=="function"?U:gt;S.scheduleMicroTask(_t,()=>{try{const Y=w[A],K=!!p&&at===p[at];K&&(p[ct]=Y,p[mt]=F);const q=S.run(M,void 0,K&&M!==gt&&M!==At?[]:[Y]);tt(p,!0,q)}catch(Y){tt(p,!1,Y)}},p)}const C="function ZoneAwarePromise() { [native code] }",lt=function(){},Pt=h.AggregateError;class et{static toString(){return C}static resolve(S){return S instanceof et?S:tt(new this(null),Et,S)}static reject(S){return tt(new this(null),W,S)}static withResolvers(){const S={};return S.promise=new et((p,O)=>{S.resolve=p,S.reject=O}),S}static any(S){if(!S||typeof S[Symbol.iterator]!="function")return Promise.reject(new Pt([],"All promises were rejected"));const p=[];let O=0;try{for(let M of S)O++,p.push(et.resolve(M))}catch{return Promise.reject(new Pt([],"All promises were rejected"))}if(O===0)return Promise.reject(new Pt([],"All promises were rejected"));let U=!1;const F=[];return new et((M,Y)=>{for(let K=0;K<p.length;K++)p[K].then(q=>{U||(U=!0,M(q))},q=>{F.push(q),O--,O===0&&(U=!0,Y(new Pt(F,"All promises were rejected")))})})}static race(S){let p,O,U=new this((Y,K)=>{p=Y,O=K});function F(Y){p(Y)}function M(Y){O(Y)}for(let Y of S)wt(Y)||(Y=this.resolve(Y)),Y.then(F,M);return U}static all(S){return et.allWithCallback(S)}static allSettled(S){return(this&&this.prototype instanceof et?this:et).allWithCallback(S,{thenCallback:O=>({status:"fulfilled",value:O}),errorCallback:O=>({status:"rejected",reason:O})})}static allWithCallback(S,p){let O,U,F=new this((q,ht)=>{O=q,U=ht}),M=2,Y=0;const K=[];for(let q of S){wt(q)||(q=this.resolve(q));const ht=Y;try{q.then(pt=>{K[ht]=p?p.thenCallback(pt):pt,M--,M===0&&O(K)},pt=>{p?(K[ht]=p.errorCallback(pt),M--,M===0&&O(K)):U(pt)})}catch(pt){U(pt)}M++,Y++}return M-=2,M===0&&O(K),F}constructor(S){const p=this;if(!(p instanceof et))throw new Error("Must be an instanceof Promise.");p[k]=I,p[A]=[];try{const O=z();S&&S(O(H(p,Et)),O(H(p,W)))}catch(O){tt(p,!1,O)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return et}then(S,p){let O=this.constructor?.[Symbol.species];(!O||typeof O!="function")&&(O=this.constructor||et);const U=new O(lt),F=g.current;return this[k]==I?this[A].push(F,U,S,p):v(this,F,U,S,p),U}catch(S){return this.then(null,S)}finally(S){let p=this.constructor?.[Symbol.species];(!p||typeof p!="function")&&(p=et);const O=new p(lt);O[at]=at;const U=g.current;return this[k]==I?this[A].push(U,O,S,S):v(this,U,O,S,S),O}}et.resolve=et.resolve,et.reject=et.reject,et.race=et.race,et.all=et.all;const Qt=h[L]=h.Promise;h.Promise=et;const ue=N("thenPatched");function Lt(w){const S=w.prototype,p=T(S,"then");if(p&&(p.writable===!1||!p.configurable))return;const O=S.then;S[V]=O,w.prototype.then=function(U,F){return new et((Y,K)=>{O.call(this,Y,K)}).then(U,F)},w[ue]=!0}_.patchThen=Lt;function Oe(w){return function(S,p){let O=w.apply(S,p);if(O instanceof et)return O;let U=O.constructor;return U[ue]||Lt(U),O}}return Qt&&(Lt(Qt),Xt(h,"fetch",w=>Oe(w))),Promise[g.__symbol__("uncaughtPromiseErrors")]=x,et})}function Ou(d){d.__load_patch("toString",h=>{const g=Function.prototype.toString,_=B("OriginalDelegate"),T=B("Promise"),b=B("Error"),P=function(){if(typeof this=="function"){const L=this[_];if(L)return typeof L=="function"?g.call(L):Object.prototype.toString.call(L);if(this===Promise){const V=h[T];if(V)return g.call(V)}if(this===Error){const V=h[b];if(V)return g.call(V)}}return g.call(this)};P[_]=g,Function.prototype.toString=P;const N=Object.prototype.toString,x="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?x:N.call(this)}})}function bu(d,h,g,_,T){const b=Zone.__symbol__(_);if(h[b])return;const P=h[b]=h[_];h[_]=function(N,x,X){return x&&x.prototype&&T.forEach(function(L){const V=`${g}.${_}::`+L,J=x.prototype;try{if(J.hasOwnProperty(L)){const st=d.ObjectGetOwnPropertyDescriptor(J,L);st&&st.value?(st.value=d.wrapWithCurrentZone(st.value,V),d._redefineProperty(x.prototype,L,st)):J[L]&&(J[L]=d.wrapWithCurrentZone(J[L],V))}else J[L]&&(J[L]=d.wrapWithCurrentZone(J[L],V))}catch{}}),P.call(h,N,x,X)},d.attachOriginToPatched(h[_],P)}function wu(d){d.__load_patch("util",(h,g,_)=>{const T=Kr(h);_.patchOnProperties=_i,_.patchMethod=Xt,_.bindArguments=Ge,_.patchMacroTask=lu;const b=g.__symbol__("BLACK_LISTED_EVENTS"),P=g.__symbol__("UNPATCHED_EVENTS");h[P]&&(h[b]=h[P]),h[b]&&(g[b]=g[P]=h[b]),_.patchEventPrototype=pu,_.patchEventTarget=hu,_.isIEOrEdge=du,_.ObjectDefineProperty=i,_.ObjectGetOwnPropertyDescriptor=o,_.ObjectCreate=s,_.ArraySlice=c,_.patchClass=He,_.wrapWithCurrentZone=dt,_.filterProperties=Si,_.attachOriginToPatched=$t,_._redefineProperty=Object.defineProperty,_.patchCallbacks=bu,_.getGlobalObjects=()=>({globalSources:Ei,zoneSymbolEventNames:Nt,eventNames:T,isBrowser:Wr,isMix:li,isNode:lr,TRUE_STR:D,FALSE_STR:G,ZONE_SYMBOL_PREFIX:rt,ADD_EVENT_LISTENER_STR:u,REMOVE_EVENT_LISTENER_STR:l})})}function Au(d){Su(d),Ou(d),wu(d)}const bi=n();return Au(bi),mu(bi),zi}uf();var Ea=function(){function r(){}return r.prototype.emit=function(e){},r}(),sf=new Ea,cf=function(){function r(){}return r.prototype.getLogger=function(e,t,n){return new Ea},r}(),ya=new cf,lf=function(){function r(e,t,n,o){this._provider=e,this.name=t,this.version=n,this.options=o}return r.prototype.emit=function(e){this._getLogger().emit(e)},r.prototype._getLogger=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):sf},r}(),Wi=function(){function r(){}return r.prototype.getLogger=function(e,t,n){var o;return(o=this.getDelegateLogger(e,t,n))!==null&&o!==void 0?o:new lf(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:ya},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateLogger=function(e,t,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,t,n)},r}(),ff=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},vr=Symbol.for("io.opentelemetry.js.api.logs"),Xe=ff;function df(r,e,t){return function(n){return n===r?e:t}}var Yi=1,_f=function(){function r(){this._proxyLoggerProvider=new Wi}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalLoggerProvider=function(e){return Xe[vr]?this.getLoggerProvider():(Xe[vr]=df(Yi,e,ya),this._proxyLoggerProvider.setDelegate(e),e)},r.prototype.getLoggerProvider=function(){var e,t;return(t=(e=Xe[vr])===null||e===void 0?void 0:e.call(Xe,Yi))!==null&&t!==void 0?t:this._proxyLoggerProvider},r.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},r.prototype.disable=function(){delete Xe[vr],this._proxyLoggerProvider=new Wi},r}(),hf=_f.getInstance();function pf(r,e,t,n){for(var o=0,i=r.length;o<i;o++){var a=r[o];e&&a.setTracerProvider(e),t&&a.setMeterProvider(t),n&&a.setLoggerProvider&&a.setLoggerProvider(n),a.getConfig().enabled||a.enable()}}function vf(r){r.forEach(function(e){return e.disable()})}function Ef(r){var e,t,n=r.tracerProvider||it.getTracerProvider(),o=r.meterProvider||Bo.getMeterProvider(),i=r.loggerProvider||hf.getLoggerProvider(),a=(t=(e=r.instrumentations)===null||e===void 0?void 0:e.flat())!==null&&t!==void 0?t:[];return pf(a,n,o,i),function(){vf(a)}}var dn,Ki;function yf(){if(Ki)return dn;Ki=1;function r(c){return typeof c=="function"}var e=console.error.bind(console);function t(c,u,l){var f=!!c[u]&&c.propertyIsEnumerable(u);Object.defineProperty(c,u,{configurable:!0,enumerable:f,writable:!0,value:l})}function n(c){c&&c.logger&&(r(c.logger)?e=c.logger:e("new logger isn't a function, not replacing"))}function o(c,u,l){if(!c||!c[u]){e("no original function "+u+" to wrap");return}if(!l){e("no wrapper function"),e(new Error().stack);return}if(!r(c[u])||!r(l)){e("original object and wrapper must be functions");return}var f=c[u],m=l(f,u);return t(m,"__original",f),t(m,"__unwrap",function(){c[u]===m&&t(c,u,f)}),t(m,"__wrapped",!0),t(c,u,m),m}function i(c,u,l){if(c)Array.isArray(c)||(c=[c]);else{e("must provide one or more modules to patch"),e(new Error().stack);return}if(!(u&&Array.isArray(u))){e("must provide one or more functions to wrap on modules");return}c.forEach(function(f){u.forEach(function(m){o(f,m,l)})})}function a(c,u){if(!c||!c[u]){e("no function to unwrap."),e(new Error().stack);return}if(!c[u].__unwrap)e("no original to unwrap to -- has "+u+" already been unwrapped?");else return c[u].__unwrap()}function s(c,u){if(c)Array.isArray(c)||(c=[c]);else{e("must provide one or more modules to patch"),e(new Error().stack);return}if(!(u&&Array.isArray(u))){e("must provide one or more functions to unwrap on modules");return}c.forEach(function(l){u.forEach(function(f){a(l,f)})})}return n.wrap=o,n.massWrap=i,n.unwrap=a,n.massUnwrap=s,dn=n,dn}var Er=yf(),Ta=ar("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Tf(r){return r.setValue(Ta,!0)}function oi(r){return r.getValue(Ta)===!0}function gf(){return function(r){R.error(mf(r))}}function mf(r){return typeof r=="string"?r:JSON.stringify(Sf(r))}function Sf(r){for(var e={},t=r;t!==null;)Object.getOwnPropertyNames(t).forEach(function(n){if(!e[n]){var o=t[n];o&&(e[n]=String(o))}}),t=Object.getPrototypeOf(t);return e}var Of=gf();function qi(r){try{Of(r)}catch{}}var kn;(function(r){r.AlwaysOff="always_off",r.AlwaysOn="always_on",r.ParentBasedAlwaysOff="parentbased_always_off",r.ParentBasedAlwaysOn="parentbased_always_on",r.ParentBasedTraceIdRatio="parentbased_traceidratio",r.TraceIdRatio="traceidratio"})(kn||(kn={}));var bf=",",wf=["OTEL_SDK_DISABLED"];function Af(r){return wf.indexOf(r)>-1}var Rf=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function Lf(r){return Rf.indexOf(r)>-1}var Pf=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS","OTEL_SEMCONV_STABILITY_OPT_IN"];function Nf(r){return Pf.indexOf(r)>-1}var _n=1/0,hn=128,Cf=128,If=128,ga={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:ut.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:_n,OTEL_ATTRIBUTE_COUNT_LIMIT:hn,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:_n,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:hn,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:_n,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:hn,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:Cf,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:If,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:kn.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative",OTEL_SEMCONV_STABILITY_OPT_IN:[]};function Mf(r,e,t){if(!(typeof t[r]>"u")){var n=String(t[r]);e[r]=n.toLowerCase()==="true"}}function xf(r,e,t,n,o){if(n===void 0&&(n=-1/0),o===void 0&&(o=1/0),typeof t[r]<"u"){var i=Number(t[r]);isNaN(i)||(i<n?e[r]=n:i>o?e[r]=o:e[r]=i)}}function Df(r,e,t,n){n===void 0&&(n=bf);var o=t[r];typeof o=="string"&&(e[r]=o.split(n).map(function(i){return i.trim()}))}var kf={ALL:ut.ALL,VERBOSE:ut.VERBOSE,DEBUG:ut.DEBUG,INFO:ut.INFO,WARN:ut.WARN,ERROR:ut.ERROR,NONE:ut.NONE};function Uf(r,e,t){var n=t[r];if(typeof n=="string"){var o=kf[n.toUpperCase()];o!=null&&(e[r]=o)}}function Bf(r){var e={};for(var t in ga){var n=t;switch(n){case"OTEL_LOG_LEVEL":Uf(n,e,r);break;default:if(Af(n))Mf(n,e,r);else if(Lf(n))xf(n,e,r);else if(Nf(n))Df(n,e,r);else{var o=r[n];typeof o<"u"&&o!==null&&(e[n]=String(o))}}}return e}var Nr=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{};function Gf(){var r=Bf(Nr);return Object.assign({},ga,r)}function Qi(r){return r>=48&&r<=57?r-48:r>=97&&r<=102?r-87:r-55}function ai(r){for(var e=new Uint8Array(r.length/2),t=0,n=0;n<r.length;n+=2){var o=Qi(r.charCodeAt(n)),i=Qi(r.charCodeAt(n+1));e[t++]=o<<4|i}return e}var er=performance,Hf="1.30.1",Le,pn=(Le={},Le[xe]="opentelemetry",Le[ea]="browser",Le[De]=na,Le[ke]=Hf,Le);var Vf=9,jf=6,Ff=Math.pow(10,jf),Un=Math.pow(10,Vf);function oe(r){var e=r/1e3,t=Math.trunc(e),n=Math.round(r%1e3*Ff);return[t,n]}function ma(){var r=er.timeOrigin;if(typeof r!="number"){var e=er;r=e.timing&&e.timing.fetchStart}return r}function _e(r){var e=oe(ma()),t=oe(typeof r=="number"?r:er.now());return $f(e,t)}function Ye(r){if(Xf(r))return r;if(typeof r=="number")return r<ma()?_e(r):oe(r);if(r instanceof Date)return oe(r.getTime());throw TypeError("Invalid input type")}function Yt(r){return r[0]*Un+r[1]}function yr(r){return r[0]*1e6+r[1]/1e3}function Xf(r){return Array.isArray(r)&&r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"}function $f(r,e){var t=[r[0]+e[0],r[1]+e[1]];return t[1]>=Un&&(t[1]-=Un,t[0]+=1),t}var Bt;(function(r){r[r.SUCCESS=0]="SUCCESS",r[r.FAILED=1]="FAILED"})(Bt||(Bt={}));var zf=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Sa(r,e){return typeof e=="string"?r===e:!!r.match(e)}function Oa(r,e){var t,n;if(!e)return!1;try{for(var o=zf(e),i=o.next();!i.done;i=o.next()){var a=i.value;if(Sa(r,a))return!0}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!1}function Zf(r,e){return new Promise(function(t){$.with(Tf($.active()),function(){r.export(e,function(n){t(n)})})})}var Wf={_export:Zf},kr=ar("OpenTelemetry Context Key B3 Debug Flag"),Cr="b3",Bn="x-b3-traceid",Gn="x-b3-spanid",Hn="x-b3-sampled",Yf="x-b3-parentspanid",Vn="x-b3-flags",Kf=new Set([!0,"true","True","1",1]),qf=new Set([!1,"false","False","0",0]);function Qf(r){return r===bt.SAMPLED||r===bt.NONE}function Jf(r){return Array.isArray(r)?r[0]:r}function $r(r,e,t){var n=e.get(r,t);return Jf(n)}function td(r,e){var t=$r(r,e,Bn);return typeof t=="string"?t.padStart(32,"0"):""}function ed(r,e){var t=$r(r,e,Gn);return typeof t=="string"?t:""}function ba(r,e){var t=$r(r,e,Vn);return t==="1"?"1":void 0}function rd(r,e){var t=$r(r,e,Hn),n=ba(r,e);if(n==="1"||Kf.has(t))return bt.SAMPLED;if(t===void 0||qf.has(t))return bt.NONE}var nd=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=it.getSpanContext(e);if(!(!o||!Be(o)||oi(e))){var i=e.getValue(kr);n.set(t,Bn,o.traceId),n.set(t,Gn,o.spanId),i==="1"?n.set(t,Vn,i):o.traceFlags!==void 0&&n.set(t,Hn,(bt.SAMPLED&o.traceFlags)===bt.SAMPLED?"1":"0")}},r.prototype.extract=function(e,t,n){var o=td(t,n),i=ed(t,n),a=rd(t,n),s=ba(t,n);return Xr(o)&&ei(i)&&Qf(a)?(e=e.setValue(kr,s),it.setSpanContext(e,{traceId:o,spanId:i,isRemote:!0,traceFlags:a})):e},r.prototype.fields=function(){return[Bn,Gn,Vn,Hn,Yf]},r}(),id=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},od=/((?:[0-9a-f]{16}){1,2})-([0-9a-f]{16})(?:-([01d](?![0-9a-f])))?(?:-([0-9a-f]{16}))?/,ad="0".repeat(16),ud=new Set(["d","1"]),sd="d";function cd(r){return r.length===32?r:""+ad+r}function ld(r){return r&&ud.has(r)?bt.SAMPLED:bt.NONE}var fd=function(){function r(){}return r.prototype.inject=function(e,t,n){var o=it.getSpanContext(e);if(!(!o||!Be(o)||oi(e))){var i=e.getValue(kr)||o.traceFlags&1,a=o.traceId+"-"+o.spanId+"-"+i;n.set(t,Cr,a)}},r.prototype.extract=function(e,t,n){var o=n.get(t,Cr),i=Array.isArray(o)?o[0]:o;if(typeof i!="string")return e;var a=i.match(od);if(!a)return e;var s=id(a,4),c=s[1],u=s[2],l=s[3],f=cd(c);if(!Xr(f)||!ei(u))return e;var m=ld(l);return l===sd&&(e=e.setValue(kr,l)),it.setSpanContext(e,{traceId:f,spanId:u,isRemote:!0,traceFlags:m})},r.prototype.fields=function(){return[Cr]},r}(),jn;(function(r){r[r.SINGLE_HEADER=0]="SINGLE_HEADER",r[r.MULTI_HEADER=1]="MULTI_HEADER"})(jn||(jn={}));var dd=function(){function r(e){e===void 0&&(e={}),this._b3MultiPropagator=new nd,this._b3SinglePropagator=new fd,e.injectEncoding===jn.MULTI_HEADER?(this._inject=this._b3MultiPropagator.inject,this._fields=this._b3MultiPropagator.fields()):(this._inject=this._b3SinglePropagator.inject,this._fields=this._b3SinglePropagator.fields())}return r.prototype.inject=function(e,t,n){oi(e)||this._inject(e,t,n)},r.prototype.extract=function(e,t,n){var o=n.get(t,Cr),i=Array.isArray(o)?o[0]:o;return i?this._b3SinglePropagator.extract(e,t,n):this._b3MultiPropagator.extract(e,t,n)},r.prototype.fields=function(){return this._fields},r}(),wa=function(){function r(){}return r.prototype.emit=function(e){},r}(),_d=new wa,hd=function(){function r(){}return r.prototype.getLogger=function(e,t,n){return new wa},r}(),Aa=new hd,pd=function(){function r(e,t,n,o){this._provider=e,this.name=t,this.version=n,this.options=o}return r.prototype.emit=function(e){this._getLogger().emit(e)},r.prototype._getLogger=function(){if(this._delegate)return this._delegate;var e=this._provider.getDelegateLogger(this.name,this.version,this.options);return e?(this._delegate=e,this._delegate):_d},r}(),Ji=function(){function r(){}return r.prototype.getLogger=function(e,t,n){var o;return(o=this.getDelegateLogger(e,t,n))!==null&&o!==void 0?o:new pd(this,e,t,n)},r.prototype.getDelegate=function(){var e;return(e=this._delegate)!==null&&e!==void 0?e:Aa},r.prototype.setDelegate=function(e){this._delegate=e},r.prototype.getDelegateLogger=function(e,t,n){var o;return(o=this._delegate)===null||o===void 0?void 0:o.getLogger(e,t,n)},r}(),vd=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},Tr=Symbol.for("io.opentelemetry.js.api.logs"),$e=vd;function Ed(r,e,t){return function(n){return n===r?e:t}}var to=1,yd=function(){function r(){this._proxyLoggerProvider=new Ji}return r.getInstance=function(){return this._instance||(this._instance=new r),this._instance},r.prototype.setGlobalLoggerProvider=function(e){return $e[Tr]?this.getLoggerProvider():($e[Tr]=Ed(to,e,Aa),this._proxyLoggerProvider.setDelegate(e),e)},r.prototype.getLoggerProvider=function(){var e,t;return(t=(e=$e[Tr])===null||e===void 0?void 0:e.call($e,to))!==null&&t!==void 0?t:this._proxyLoggerProvider},r.prototype.getLogger=function(e,t,n){return this.getLoggerProvider().getLogger(e,t,n)},r.prototype.disable=function(){delete $e[Tr],this._proxyLoggerProvider=new Ji},r}(),Td=yd.getInstance(),Fn=function(){return Fn=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},Fn.apply(this,arguments)},gd=function(){function r(e,t,n){this.instrumentationName=e,this.instrumentationVersion=t,this._config={},this._wrap=Er.wrap,this._unwrap=Er.unwrap,this._massWrap=Er.massWrap,this._massUnwrap=Er.massUnwrap,this.setConfig(n),this._diag=R.createComponentLogger({namespace:e}),this._tracer=it.getTracer(e,t),this._meter=Bo.getMeter(e,t),this._logger=Td.getLogger(e,t),this._updateMetricInstruments()}return Object.defineProperty(r.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),r.prototype.setMeterProvider=function(e){this._meter=e.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r.prototype.setLoggerProvider=function(e){this._logger=e.getLogger(this.instrumentationName,this.instrumentationVersion)},r.prototype.getModuleDefinitions=function(){var e,t=(e=this.init())!==null&&e!==void 0?e:[];return Array.isArray(t)?t:[t]},r.prototype._updateMetricInstruments=function(){},r.prototype.getConfig=function(){return this._config},r.prototype.setConfig=function(e){this._config=Fn({enabled:!0},e)},r.prototype.setTracerProvider=function(e){this._tracer=e.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(r.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),r.prototype._runSpanCustomizationHook=function(e,t,n,o){if(e)try{e(n,o)}catch(i){this._diag.error("Error running span customization hook due to exception in handler",{triggerName:t},i)}},r}(),md=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ur=function(r){md(e,r);function e(t,n,o){var i=r.call(this,t,n,o)||this;return i._config.enabled&&i.enable(),i}return e}(gd);function Ur(r,e,t){var n,o;try{o=r()}catch(i){n=i}finally{if(e(n,o),n&&!t)throw n;return o}}function nt(r){return typeof r=="function"&&typeof r.__original=="function"&&typeof r.__unwrap=="function"&&r.__wrapped===!0}var Ke;(function(r){r.DOCUMENT_LOAD="documentLoad",r.DOCUMENT_FETCH="documentFetch",r.RESOURCE_FETCH="resourceFetch"})(Ke||(Ke={}));var Sd="0.44.0",Od="@opentelemetry/instrumentation-document-load",Br;(function(r){r.FIRST_PAINT="firstPaint",r.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(Br||(Br={}));var bd=function(){var r,e,t={},n=(e=(r=jt).getEntriesByType)===null||e===void 0?void 0:e.call(r,"navigation")[0];if(n){var o=Object.values(ot);o.forEach(function(s){if(ie(n,s)){var c=n[s];typeof c=="number"&&(t[s]=c)}})}else{var i=jt,a=i.timing;if(a){var o=Object.values(ot);o.forEach(function(c){if(ie(a,c)){var u=a[c];typeof u=="number"&&(t[c]=u)}})}}return t},eo={"first-paint":Br.FIRST_PAINT,"first-contentful-paint":Br.FIRST_CONTENTFUL_PAINT},wd=function(r){var e,t,n=(t=(e=jt).getEntriesByType)===null||t===void 0?void 0:t.call(e,"paint");n&&n.forEach(function(o){var i=o.name,a=o.startTime;ie(eo,i)&&r.addEvent(eo[i],a)})},Ad=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rd=function(r){Ad(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,Od,Sd,t)||this;return n.component="document-load",n.version="1",n.moduleName=n.component,n}return e.prototype.init=function(){},e.prototype._onDocumentLoaded=function(){var t=this;window.setTimeout(function(){t._collectPerformance()})},e.prototype._addResourcesSpans=function(t){var n=this,o,i,a=(i=(o=jt).getEntriesByType)===null||i===void 0?void 0:i.call(o,"resource");a&&a.forEach(function(s){n._initResourceSpan(s,t)})},e.prototype._collectPerformance=function(){var t=this,n=Array.from(document.getElementsByTagName("meta")).find(function(a){return a.getAttribute("name")===Lr}),o=bd(),i=n&&n.content||"";$.with(Ct.extract(Ht,{traceparent:i}),function(){var a,s=t._startSpan(Ke.DOCUMENT_LOAD,ot.FETCH_START,o);s&&($.with(it.setSpan($.active(),s),function(){var c=t._startSpan(Ke.DOCUMENT_FETCH,ot.FETCH_START,o);c&&(c.setAttribute(We,location.href),$.with(it.setSpan($.active(),c),function(){var u;t.getConfig().ignoreNetworkEvents||Xi(c,o),t._addCustomAttributesOnSpan(c,(u=t.getConfig().applyCustomAttributesOnSpan)===null||u===void 0?void 0:u.documentFetch),t._endSpan(c,ot.RESPONSE_END,o)}))}),s.setAttribute(We,location.href),s.setAttribute(ii,navigator.userAgent),t._addResourcesSpans(s),t.getConfig().ignoreNetworkEvents||(Ot(s,ot.FETCH_START,o),Ot(s,ot.UNLOAD_EVENT_START,o),Ot(s,ot.UNLOAD_EVENT_END,o),Ot(s,ot.DOM_INTERACTIVE,o),Ot(s,ot.DOM_CONTENT_LOADED_EVENT_START,o),Ot(s,ot.DOM_CONTENT_LOADED_EVENT_END,o),Ot(s,ot.DOM_COMPLETE,o),Ot(s,ot.LOAD_EVENT_START,o),Ot(s,ot.LOAD_EVENT_END,o)),t.getConfig().ignorePerformancePaintEvents||wd(s),t._addCustomAttributesOnSpan(s,(a=t.getConfig().applyCustomAttributesOnSpan)===null||a===void 0?void 0:a.documentLoad),t._endSpan(s,ot.LOAD_EVENT_END,o))})},e.prototype._endSpan=function(t,n,o){t&&(ie(o,n)?t.end(o[n]):t.end())},e.prototype._initResourceSpan=function(t,n){var o,i=this._startSpan(Ke.RESOURCE_FETCH,ot.FETCH_START,t,n);i&&(i.setAttribute(We,t.name),this.getConfig().ignoreNetworkEvents||Xi(i,t),this._addCustomAttributesOnResourceSpan(i,t,(o=this.getConfig().applyCustomAttributesOnSpan)===null||o===void 0?void 0:o.resourceFetch),this._endSpan(i,ot.RESPONSE_END,t))},e.prototype._startSpan=function(t,n,o,i){if(ie(o,n)&&typeof o[n]=="number"){var a=this.tracer.startSpan(t,{startTime:o[n]},i?it.setSpan($.active(),i):void 0);return a}},e.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},e.prototype._addCustomAttributesOnSpan=function(t,n){var o=this;n&&Ur(function(){return n(t)},function(i){i&&o._diag.error("addCustomAttributesOnSpan",i)},!0)},e.prototype._addCustomAttributesOnResourceSpan=function(t,n,o){var i=this;o&&Ur(function(){return o(t,n)},function(a){a&&i._diag.error("addCustomAttributesOnResourceSpan",a)},!0)},e.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},e.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},e}(ur);function Ld(){return"unknown_service"}var re=function(){return re=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},re.apply(this,arguments)},Pd=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Nd=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Cd=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ro=function(){function r(e,t){var n=this,o;this._attributes=e,this.asyncAttributesPending=t!=null,this._syncAttributes=(o=this._attributes)!==null&&o!==void 0?o:{},this._asyncAttributesPromise=t?.then(function(i){return n._attributes=Object.assign({},n._attributes,i),n.asyncAttributesPending=!1,i},function(i){return R.debug("a resource's async attributes promise rejected: %s",i),n.asyncAttributesPending=!1,{}})}return r.empty=function(){return r.EMPTY},r.default=function(){var e;return new r((e={},e[ra]=Ld(),e[De]=pn[De],e[xe]=pn[xe],e[ke]=pn[ke],e))},Object.defineProperty(r.prototype,"attributes",{get:function(){var e;return this.asyncAttributesPending&&R.error("Accessing resource attributes before async attributes settled"),(e=this._attributes)!==null&&e!==void 0?e:{}},enumerable:!1,configurable:!0}),r.prototype.waitForAsyncAttributes=function(){return Pd(this,void 0,void 0,function(){return Nd(this,function(e){switch(e.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},r.prototype.merge=function(e){var t=this,n;if(!e)return this;var o=re(re({},this._syncAttributes),(n=e._syncAttributes)!==null&&n!==void 0?n:e.attributes);if(!this._asyncAttributesPromise&&!e._asyncAttributesPromise)return new r(o);var i=Promise.all([this._asyncAttributesPromise,e._asyncAttributesPromise]).then(function(a){var s,c=Cd(a,2),u=c[0],l=c[1];return re(re(re(re({},t._syncAttributes),u),(s=e._syncAttributes)!==null&&s!==void 0?s:e.attributes),l)});return new r(o,i)},r.EMPTY=new r({}),r}(),ft;(function(r){r.CONNECT_END="connectEnd",r.CONNECT_START="connectStart",r.DECODED_BODY_SIZE="decodedBodySize",r.DOM_COMPLETE="domComplete",r.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",r.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",r.DOM_INTERACTIVE="domInteractive",r.DOMAIN_LOOKUP_END="domainLookupEnd",r.DOMAIN_LOOKUP_START="domainLookupStart",r.ENCODED_BODY_SIZE="encodedBodySize",r.FETCH_START="fetchStart",r.LOAD_EVENT_END="loadEventEnd",r.LOAD_EVENT_START="loadEventStart",r.NAVIGATION_START="navigationStart",r.REDIRECT_END="redirectEnd",r.REDIRECT_START="redirectStart",r.REQUEST_START="requestStart",r.RESPONSE_END="responseEnd",r.RESPONSE_START="responseStart",r.SECURE_CONNECTION_START="secureConnectionStart",r.UNLOAD_EVENT_END="unloadEventEnd",r.UNLOAD_EVENT_START="unloadEventStart"})(ft||(ft={}));var vn;function Id(){return vn||(vn=document.createElement("a")),vn}function Xn(r,e){return e in r}function zt(r,e,t,n){var o=void 0,i=void 0;Xn(t,e)&&typeof t[e]=="number"&&(o=t[e]);var a=ft.FETCH_START;if(Xn(t,a)&&typeof t[a]=="number"&&(i=t[a]),o!==void 0&&i!==void 0&&o>=i)return r.addEvent(e,o),r}function Gr(r,e,t){t===void 0&&(t=!1),t||(zt(r,ft.FETCH_START,e),zt(r,ft.DOMAIN_LOOKUP_START,e),zt(r,ft.DOMAIN_LOOKUP_END,e),zt(r,ft.CONNECT_START,e),Xn(e,"name")&&e.name.startsWith("https:")&&zt(r,ft.SECURE_CONNECTION_START,e),zt(r,ft.CONNECT_END,e),zt(r,ft.REQUEST_START,e),zt(r,ft.RESPONSE_START,e),zt(r,ft.RESPONSE_END,e));var n=e[ft.ENCODED_BODY_SIZE];n!==void 0&&r.setAttribute(Jo,n);var o=e[ft.DECODED_BODY_SIZE];o!==void 0&&n!==o&&r.setAttribute(ta,o)}function Md(r){return r.slice().sort(function(e,t){var n=e[ft.FETCH_START],o=t[ft.FETCH_START];return n>o?1:n<o?-1:0})}function Ra(){return typeof location<"u"?location.origin:void 0}function La(r,e,t,n,o,i){o===void 0&&(o=new WeakSet);var a=Wt(r);r=a.toString();var s=Dd(r,e,t,n,o,i);if(s.length===0)return{mainRequest:void 0};if(s.length===1)return{mainRequest:s[0]};var c=Md(s);if(a.origin!==Ra()&&c.length>1){var u=c[0],l=xd(c,u[ft.RESPONSE_END],t),f=u[ft.RESPONSE_END],m=l[ft.FETCH_START];return m<f&&(l=u,u=void 0),{corsPreFlightRequest:u,mainRequest:l}}else return{mainRequest:s[0]}}function xd(r,e,t){for(var n=Yt(t),o=Yt(Ye(e)),i=r[1],a,s=r.length,c=1;c<s;c++){var u=r[c],l=Yt(Ye(u[ft.FETCH_START])),f=Yt(Ye(u[ft.RESPONSE_END])),m=n-f;l>=o&&(!a||m<a)&&(a=m,i=u)}return i}function Dd(r,e,t,n,o,i){var a=Yt(e),s=Yt(t),c=n.filter(function(u){var l=Yt(Ye(u[ft.FETCH_START])),f=Yt(Ye(u[ft.RESPONSE_END]));return u.initiatorType.toLowerCase()===(i||"xmlhttprequest")&&u.name===r&&l>=a&&f<=s});return c.length>0&&(c=c.filter(function(u){return!o.has(u)})),c}function Wt(r){if(typeof URL=="function")return new URL(r,typeof document<"u"?document.baseURI:typeof location<"u"?location.href:void 0);var e=Id();return e.href=r,e}function ui(r,e){if(r.nodeType===Node.DOCUMENT_NODE)return"/";var t=Ud(r,e);if(e&&t.indexOf("@id")>0)return t;var n="";return r.parentNode&&(n+=ui(r.parentNode,!1)),n+=t,n}function kd(r){if(!r.parentNode)return 0;var e=[r.nodeType];r.nodeType===Node.CDATA_SECTION_NODE&&e.push(Node.TEXT_NODE);var t=Array.from(r.parentNode.childNodes);return t=t.filter(function(n){var o=n.localName;return e.indexOf(n.nodeType)>=0&&o===r.localName}),t.length>=1?t.indexOf(r)+1:0}function Ud(r,e){var t=r.nodeType,n=kd(r),o="";if(t===Node.ELEMENT_NODE){var i=r.getAttribute("id");if(e&&i)return'//*[@id="'+i+'"]';o=r.localName}else if(t===Node.TEXT_NODE||t===Node.CDATA_SECTION_NODE)o="text()";else if(t===Node.COMMENT_NODE)o="comment()";else return"";return o&&n>1?"/"+o+"["+n+"]":"/"+o}function Pa(r,e){var t=e||[];(typeof t=="string"||t instanceof RegExp)&&(t=[t]);var n=Wt(r);return n.origin===Ra()?!0:t.some(function(o){return Sa(r,o)})}var Hr;(function(r){r.COMPONENT="component",r.HTTP_ERROR_NAME="http.error_name",r.HTTP_STATUS_TEXT="http.status_text"})(Hr||(Hr={}));var Bd=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Gd=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Hd=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Vd=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Na=R.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-fetch/utils"});function jd(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];if(r[0]instanceof URL||typeof r[0]=="string"){var t=r[1];if(!t?.body)return Promise.resolve();if(t.body instanceof ReadableStream){var n=Fd(t.body),o=n.body,i=n.length;return t.body=o,i}else return Promise.resolve(Xd(t.body))}else{var a=r[0];return a?.body?a.clone().text().then(function(s){return $n(s)}):Promise.resolve()}}function Fd(r){if(!r.pipeThrough)return Na.warn("Platform has ReadableStream but not pipeThrough!"),{body:r,length:Promise.resolve(void 0)};var e=0,t,n=new Promise(function(i){t=i}),o=new TransformStream({start:function(){},transform:function(i,a){return Bd(this,void 0,void 0,function(){var s;return Gd(this,function(c){switch(c.label){case 0:return[4,i];case 1:return s=c.sent(),e+=s.byteLength,a.enqueue(i),[2]}})})},flush:function(){t(e)}});return{body:r.pipeThrough(o),length:n}}function Xd(r){if(typeof Document<"u"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return zd(r);if(r instanceof URLSearchParams)return $n(r.toString());if(typeof r=="string")return $n(r);Na.warn("unknown body type")}var $d=new TextEncoder;function $n(r){return $d.encode(r).byteLength}function zd(r){var e,t,n=0;try{for(var o=Hd(r.entries()),i=o.next();!i.done;i=o.next()){var a=Vd(i.value,2),s=a[0],c=a[1];n+=s.length,c instanceof Blob?n+=c.size:n+=c.length}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}var no="0.57.2",Zd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Wd=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Yd=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},En,Kd=300,io=typeof process=="object"&&((En=process.release)===null||En===void 0?void 0:En.name)==="node",qd=function(r){Zd(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-fetch",no,t)||this;return n.component="fetch",n.version=no,n.moduleName=n.component,n._usedResources=new WeakSet,n._tasksCount=0,n}return e.prototype.init=function(){},e.prototype._addChildSpan=function(t,n){var o=this.tracer.startSpan("CORS Preflight",{startTime:n[ft.FETCH_START]},it.setSpan($.active(),t));Gr(o,n,this.getConfig().ignoreNetworkEvents),o.end(n[ft.RESPONSE_END])},e.prototype._addFinalSpanAttributes=function(t,n){var o=Wt(n.url);t.setAttribute(qo,n.status),n.statusText!=null&&t.setAttribute(Hr.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(Yo,o.host),t.setAttribute(Ko,o.protocol.replace(":","")),typeof navigator<"u"&&t.setAttribute(ii,navigator.userAgent)},e.prototype._addHeaders=function(t,n){if(!Pa(n,this.getConfig().propagateTraceHeaderCorsUrls)){var o={};Ct.inject($.active(),o),Object.keys(o).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(t instanceof Request)Ct.inject($.active(),t.headers,{set:function(i,a,s){return i.set(a,typeof s=="string"?s:String(s))}});else if(t.headers instanceof Headers)Ct.inject($.active(),t.headers,{set:function(i,a,s){return i.set(a,typeof s=="string"?s:String(s))}});else if(t.headers instanceof Map)Ct.inject($.active(),t.headers,{set:function(i,a,s){return i.set(a,typeof s=="string"?s:String(s))}});else{var o={};Ct.inject($.active(),o),t.headers=Object.assign({},o,t.headers||{})}},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},e.prototype._createSpan=function(t,n){var o;if(n===void 0&&(n={}),Oa(t,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var i=(n.method||"GET").toUpperCase(),a="HTTP "+i;return this.tracer.startSpan(a,{kind:Je.CLIENT,attributes:(o={},o[Hr.COMPONENT]=this.moduleName,o[Wo]=i,o[We]=t,o)})},e.prototype._findResourceAndAddNetworkEvents=function(t,n,o){var i=n.entries;if(!i.length){if(!performance.getEntriesByType)return;i=performance.getEntriesByType("resource")}var a=La(n.spanUrl,n.startTime,o,i,this._usedResources,"fetch");if(a.mainRequest){var s=a.mainRequest;this._markResourceAsUsed(s);var c=a.corsPreFlightRequest;c&&(this._addChildSpan(t,c),this._markResourceAsUsed(c)),Gr(t,s,this.getConfig().ignoreNetworkEvents)}},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._endSpan=function(t,n,o){var i=this,a=oe(Date.now()),s=_e();this._addFinalSpanAttributes(t,o),setTimeout(function(){var c;(c=n.observer)===null||c===void 0||c.disconnect(),i._findResourceAndAddNetworkEvents(t,n,s),i._tasksCount--,i._clearResources(),t.end(a)},Kd)},e.prototype._patchConstructor=function(){var t=this;return function(n){var o=t;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=this,u=Wt(a[0]instanceof Request?a[0].url:String(a[0])).href,l=a[0]instanceof Request?a[0]:a[1]||{},f=o._createSpan(u,l);if(!f)return n.apply(this,a);var m=o._prepareSpanData(u);o.getConfig().measureRequestSize&&jd.apply(void 0,Yd([],Wd(a),!1)).then(function(Q){Q&&f.setAttribute(Qo,Q)}).catch(function(Q){o._diag.warn("getFetchBodyLength",Q)});function D(Q,B){o._applyAttributesAfterFetch(Q,l,B),o._endSpan(Q,m,{status:B.status||0,statusText:B.message,url:u})}function G(Q,B){o._applyAttributesAfterFetch(Q,l,B),B.status>=200&&B.status<400?o._endSpan(Q,m,B):o._endSpan(Q,m,{status:B.status,statusText:B.statusText,url:u})}function rt(Q,B,St){try{var Dt=St.clone(),yt=St.clone(),ae=Dt.body;if(ae){var Ge=ae.getReader(),sr=function(){Ge.read().then(function(ge){var cr=ge.done;cr?G(Q,yt):sr()},function(ge){D(Q,ge)})};sr()}else G(Q,St)}finally{B(St)}}function dt(Q,B,St){try{D(Q,St)}finally{B(St)}}return new Promise(function(Q,B){return $.with(it.setSpan($.active(),f),function(){return o._addHeaders(l,u),o._tasksCount++,n.apply(c,l instanceof Request?[l]:[u,l]).then(rt.bind(c,f,Q),dt.bind(c,f,B))})})}}},e.prototype._applyAttributesAfterFetch=function(t,n,o){var i=this,a=this.getConfig().applyCustomAttributesOnSpan;a&&Ur(function(){return a(t,n,o)},function(s){s&&i._diag.error("applyCustomAttributesOnSpan",s)},!0)},e.prototype._prepareSpanData=function(t){var n=_e(),o=[];if(typeof PerformanceObserver!="function")return{entries:o,startTime:n,spanUrl:t};var i=new PerformanceObserver(function(a){var s=a.getEntries();s.forEach(function(c){c.initiatorType==="fetch"&&c.name===t&&o.push(c)})});return i.observe({entryTypes:["resource"]}),{entries:o,observer:i,startTime:n,spanUrl:t}},e.prototype.enable=function(){if(io){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}nt(fetch)&&(this._unwrap(Nr,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Nr,"fetch",this._patchConstructor())},e.prototype.disable=function(){io||(this._unwrap(Nr,"fetch"),this._usedResources=new WeakSet)},e}(ur),Ne;(function(r){r.EVENT_TYPE="event_type",r.TARGET_ELEMENT="target_element",r.TARGET_XPATH="target_xpath",r.HTTP_URL="http.url"})(Ne||(Ne={}));var oo="0.44.0",Qd="@opentelemetry/instrumentation-user-interaction",Jd=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),t_="OT_ZONE_CONTEXT",e_="Navigation:",r_=["click"];function n_(){return!1}var i_=function(r){Jd(e,r);function e(t){t===void 0&&(t={});var n,o=r.call(this,Qd,oo,t)||this;return o.version=oo,o.moduleName="user-interaction",o._spansData=new WeakMap,o._wrappedListeners=new WeakMap,o._eventsSpanMap=new WeakMap,o._eventNames=new Set((n=t?.eventNames)!==null&&n!==void 0?n:r_),o._shouldPreventSpanCreation=typeof t?.shouldPreventSpanCreation=="function"?t.shouldPreventSpanCreation:n_,o}return e.prototype.init=function(){},e.prototype._checkForTimeout=function(t,n){var o=this._spansData.get(n);o&&(t.source==="setTimeout"?o.hrTimeLastTimeout=_e():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(o.hrTimeLastTimeout=void 0))},e.prototype._allowEventName=function(t){return this._eventNames.has(t)},e.prototype._createSpan=function(t,n,o){var i;if(t instanceof HTMLElement&&t.getAttribute&&!t.hasAttribute("disabled")&&this._allowEventName(n)){var a=ui(t,!0);try{var s=this.tracer.startSpan(n,{attributes:(i={},i[Ne.EVENT_TYPE]=n,i[Ne.TARGET_ELEMENT]=t.tagName,i[Ne.TARGET_XPATH]=a,i[Ne.HTTP_URL]=window.location.href,i)},o?it.setSpan($.active(),o):void 0);return this._shouldPreventSpanCreation(n,t,s)===!0?void 0:(this._spansData.set(s,{taskCount:0}),s)}catch(c){this._diag.error("failed to start create new user interaction span",c)}}},e.prototype._decrementTask=function(t){var n=this._spansData.get(t);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(t,n.hrTimeLastTimeout))},e.prototype._getCurrentSpan=function(t){var n=t.get(t_);return n&&it.getSpan(n)},e.prototype._incrementTask=function(t){var n=this._spansData.get(t);n&&n.taskCount++},e.prototype.addPatchedListener=function(t,n,o,i){var a=this._wrappedListeners.get(o);a||(a=new Map,this._wrappedListeners.set(o,a));var s=a.get(n);return s||(s=new Map,a.set(n,s)),s.has(t)?!1:(s.set(t,i),!0)},e.prototype.removePatchedListener=function(t,n,o){var i=this._wrappedListeners.get(o);if(i){var a=i.get(n);if(a){var s=a.get(t);return s&&(a.delete(t),a.size===0&&(i.delete(n),i.size===0&&this._wrappedListeners.delete(o))),s}}},e.prototype._invokeListener=function(t,n,o){return typeof t=="function"?t.apply(n,o):t.handleEvent(o[0])},e.prototype._patchAddEventListener=function(){var t=this;return function(n){return function(i,a,s){if(!a)return n.call(this,i,a,s);var c=s&&typeof s=="object"&&s.once,u=function(){for(var l=this,f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];var D,G=f[0],rt=G?.target;G&&(D=t._eventsSpanMap.get(G)),c&&t.removePatchedListener(this,i,a);var dt=t._createSpan(rt,i,D);return dt?(G&&t._eventsSpanMap.set(G,dt),$.with(it.setSpan($.active(),dt),function(){var Q=t._invokeListener(a,l,f);return dt.end(),Q})):t._invokeListener(a,this,f)};if(t.addPatchedListener(this,i,a,u))return n.call(this,i,u,s)}}},e.prototype._patchRemoveEventListener=function(){var t=this;return function(n){return function(i,a,s){var c=t.removePatchedListener(this,i,a);return c?n.call(this,i,c,s):n.call(this,i,a,s)}}},e.prototype._getPatchableEventTargets=function(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]},e.prototype._patchHistoryApi=function(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())},e.prototype._patchHistoryMethod=function(){var t=this;return function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=""+location.pathname+location.hash+location.search,c=n.apply(this,i),u=""+location.pathname+location.hash+location.search;return s!==u&&t._updateInteractionName(u),c}}},e.prototype._unpatchHistoryApi=function(){nt(history.replaceState)&&this._unwrap(history,"replaceState"),nt(history.pushState)&&this._unwrap(history,"pushState"),nt(history.back)&&this._unwrap(history,"back"),nt(history.forward)&&this._unwrap(history,"forward"),nt(history.go)&&this._unwrap(history,"go")},e.prototype._updateInteractionName=function(t){var n=it.getSpan($.active());n&&typeof n.updateName=="function"&&n.updateName(e_+" "+t)},e.prototype._patchZoneCancelTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,s=t._getCurrentSpan(a);return s&&t._shouldCountTask(i,a)&&t._decrementTask(s),n.call(this,i)}}},e.prototype._patchZoneScheduleTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,s=t._getCurrentSpan(a);return s&&t._shouldCountTask(i,a)&&(t._incrementTask(s),t._checkForTimeout(i,s)),n.call(this,i)}}},e.prototype._patchZoneRunTask=function(){var t=this;return function(n){return function(i,a,s){var c=Array.isArray(s)&&s[0]instanceof Event?s[0]:void 0,u=c?.target,l,f=this;if(u){if(l=t._createSpan(u,i.eventName),l)return t._incrementTask(l),f.run(function(){try{return $.with(it.setSpan($.active(),l),function(){var m=Zone.current;return i._zone=m,n.call(m,i,a,s)})}finally{t._decrementTask(l)}})}else l=t._getCurrentSpan(f);try{return n.call(f,i,a,s)}finally{l&&t._shouldCountTask(i,f)&&t._decrementTask(l)}}}},e.prototype._shouldCountTask=function(t,n){if(t._zone&&(n=t._zone),!n||!t.data||t.data.isPeriodic)return!1;var o=this._getCurrentSpan(n);return!o||!this._spansData.get(o)?!1:t.type==="macroTask"||t.type==="microTask"},e.prototype._tryToEndSpan=function(t,n){if(t){var o=this._spansData.get(t);o&&(t.end(n),this._spansData.delete(t))}},e.prototype.enable=function(){var t=this,n=this._getZoneWithPrototype();if(this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!n),n)nt(n.prototype.runTask)&&(this._unwrap(n.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),nt(n.prototype.scheduleTask)&&(this._unwrap(n.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),nt(n.prototype.cancelTask)&&(this._unwrap(n.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(n.prototype,"runTask",this._patchZoneRunTask()),this._wrap(n.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(n.prototype,"cancelTask",this._patchZoneCancelTask());else{this._zonePatched=!1;var o=this._getPatchableEventTargets();o.forEach(function(i){nt(i.addEventListener)&&(t._unwrap(i,"addEventListener"),t._diag.debug("removing previous patch from method addEventListener")),nt(i.removeEventListener)&&(t._unwrap(i,"removeEventListener"),t._diag.debug("removing previous patch from method removeEventListener")),t._wrap(i,"addEventListener",t._patchAddEventListener()),t._wrap(i,"removeEventListener",t._patchRemoveEventListener())})}this._patchHistoryApi()},e.prototype.disable=function(){var t=this,n=this._getZoneWithPrototype();if(this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!n),n&&this._zonePatched)nt(n.prototype.runTask)&&this._unwrap(n.prototype,"runTask"),nt(n.prototype.scheduleTask)&&this._unwrap(n.prototype,"scheduleTask"),nt(n.prototype.cancelTask)&&this._unwrap(n.prototype,"cancelTask");else{var o=this._getPatchableEventTargets();o.forEach(function(i){nt(i.addEventListener)&&t._unwrap(i,"addEventListener"),nt(i.removeEventListener)&&t._unwrap(i,"removeEventListener")})}this._unpatchHistoryApi()},e.prototype._getZoneWithPrototype=function(){var t=window;return t.Zone},e}(ur),Zt;(function(r){r.METHOD_OPEN="open",r.METHOD_SEND="send",r.EVENT_ABORT="abort",r.EVENT_ERROR="error",r.EVENT_LOAD="loaded",r.EVENT_TIMEOUT="timeout"})(Zt||(Zt={}));var o_=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},a_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},u_=R.createComponentLogger({namespace:"@opentelemetry/opentelemetry-instrumentation-xml-http-request/utils"});function s_(r){if(typeof Document<"u"&&r instanceof Document)return new XMLSerializer().serializeToString(document).length;if(r instanceof Blob)return r.size;if(r.byteLength!==void 0)return r.byteLength;if(r instanceof FormData)return l_(r);if(r instanceof URLSearchParams)return ao(r.toString());if(typeof r=="string")return ao(r);u_.warn("unknown body type")}var c_=new TextEncoder;function ao(r){return c_.encode(r).byteLength}function l_(r){var e,t,n=0;try{for(var o=o_(r.entries()),i=o.next();!i.done;i=o.next()){var a=a_(i.value,2),s=a[0],c=a[1];n+=s.length,c instanceof Blob?n+=c.size:n+=c.length}}catch(u){e={error:u}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}var uo="0.57.2",zn;(function(r){r.HTTP_STATUS_TEXT="http.status_text"})(zn||(zn={}));var f_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),d_=300,__=function(r){f_(e,r);function e(t){t===void 0&&(t={});var n=r.call(this,"@opentelemetry/instrumentation-xml-http-request",uo,t)||this;return n.component="xml-http-request",n.version=uo,n.moduleName=n.component,n._tasksCount=0,n._xhrMem=new WeakMap,n._usedResources=new WeakSet,n}return e.prototype.init=function(){},e.prototype._addHeaders=function(t,n){var o=Wt(n).href;if(!Pa(o,this.getConfig().propagateTraceHeaderCorsUrls)){var i={};Ct.inject($.active(),i),Object.keys(i).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var a={};Ct.inject($.active(),a),Object.keys(a).forEach(function(s){t.setRequestHeader(s,String(a[s]))})},e.prototype._addChildSpan=function(t,n){var o=this;$.with(it.setSpan($.active(),t),function(){var i=o.tracer.startSpan("CORS Preflight",{startTime:n[ft.FETCH_START]});Gr(i,n,o.getConfig().ignoreNetworkEvents),i.end(n[ft.RESPONSE_END])})},e.prototype._addFinalSpanAttributes=function(t,n,o){if(typeof o=="string"){var i=Wt(o);n.status!==void 0&&t.setAttribute(qo,n.status),n.statusText!==void 0&&t.setAttribute(zn.HTTP_STATUS_TEXT,n.statusText),t.setAttribute(Yo,i.host),t.setAttribute(Ko,i.protocol.replace(":","")),t.setAttribute(ii,navigator.userAgent)}},e.prototype._applyAttributesAfterXHR=function(t,n){var o=this,i=this.getConfig().applyCustomAttributesOnSpan;typeof i=="function"&&Ur(function(){return i(t,n)},function(a){a&&o._diag.error("applyCustomAttributesOnSpan",a)},!0)},e.prototype._addResourceObserver=function(t,n){var o=this._xhrMem.get(t);!o||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(o.createdResources={observer:new PerformanceObserver(function(i){var a=i.getEntries(),s=Wt(n);a.forEach(function(c){c.initiatorType==="xmlhttprequest"&&c.name===s.href&&o.createdResources&&o.createdResources.entries.push(c)})}),entries:[]},o.createdResources.observer.observe({entryTypes:["resource"]}))},e.prototype._clearResources=function(){this._tasksCount===0&&this.getConfig().clearTimingResources&&(er.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},e.prototype._findResourceAndAddNetworkEvents=function(t,n,o,i,a){if(!(!o||!i||!a||!t.createdResources)){var s=t.createdResources.entries;(!s||!s.length)&&(s=er.getEntriesByType("resource"));var c=La(Wt(o).href,i,a,s,this._usedResources);if(c.mainRequest){var u=c.mainRequest;this._markResourceAsUsed(u);var l=c.corsPreFlightRequest;l&&(this._addChildSpan(n,l),this._markResourceAsUsed(l)),Gr(n,u,this.getConfig().ignoreNetworkEvents)}}},e.prototype._cleanPreviousSpanInformation=function(t){var n=this._xhrMem.get(t);if(n){var o=n.callbackToRemoveEvents;o&&o(),this._xhrMem.delete(t)}},e.prototype._createSpan=function(t,n,o){var i;if(Oa(n,this.getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var a=o.toUpperCase(),s=this.tracer.startSpan(a,{kind:Je.CLIENT,attributes:(i={},i[Wo]=o,i[We]=Wt(n).toString(),i)});return s.addEvent(Zt.METHOD_OPEN),this._cleanPreviousSpanInformation(t),this._xhrMem.set(t,{span:s,spanUrl:n}),s},e.prototype._markResourceAsUsed=function(t){this._usedResources.add(t)},e.prototype._patchOpen=function(){var t=this;return function(n){var o=t;return function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];var c=a[0],u=a[1];return o._createSpan(this,u,c),n.apply(this,a)}}},e.prototype._patchSend=function(){var t=this;function n(l,f,m,D){var G=f.callbackToRemoveEvents;typeof G=="function"&&G();var rt=f.span,dt=f.spanUrl,Q=f.sendStartTime;rt&&(t._findResourceAndAddNetworkEvents(f,rt,dt,Q,m),rt.addEvent(l,D),t._addFinalSpanAttributes(rt,f,dt),rt.end(D),t._tasksCount--),t._clearResources()}function o(l,f){var m=t._xhrMem.get(f);if(m){m.status=f.status,m.statusText=f.statusText,t._xhrMem.delete(f),m.span&&t._applyAttributesAfterXHR(m.span,f);var D=_e(),G=Date.now();setTimeout(function(){n(l,m,D,G)},d_)}}function i(){o(Zt.EVENT_ERROR,this)}function a(){o(Zt.EVENT_ABORT,this)}function s(){o(Zt.EVENT_TIMEOUT,this)}function c(){this.status<299?o(Zt.EVENT_LOAD,this):o(Zt.EVENT_ERROR,this)}function u(l){l.removeEventListener("abort",a),l.removeEventListener("error",i),l.removeEventListener("load",c),l.removeEventListener("timeout",s);var f=t._xhrMem.get(l);f&&(f.callbackToRemoveEvents=void 0)}return function(l){return function(){for(var m=this,D=[],G=0;G<arguments.length;G++)D[G]=arguments[G];var rt=t._xhrMem.get(this);if(!rt)return l.apply(this,D);var dt=rt.span,Q=rt.spanUrl;if(dt&&Q){if(t.getConfig().measureRequestSize&&D?.[0]){var B=D[0],St=s_(B);St!==void 0&&dt.setAttribute(Qo,St)}$.with(it.setSpan($.active(),dt),function(){t._tasksCount++,rt.sendStartTime=_e(),dt.addEvent(Zt.METHOD_SEND),m.addEventListener("abort",a),m.addEventListener("error",i),m.addEventListener("load",c),m.addEventListener("timeout",s),rt.callbackToRemoveEvents=function(){u(m),rt.createdResources&&rt.createdResources.observer.disconnect()},t._addHeaders(m,Q),t._addResourceObserver(m,Q)})}return l.apply(this,D)}}},e.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),nt(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),nt(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},e.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},e}(ur),yn={"@opentelemetry/instrumentation-document-load":Rd,"@opentelemetry/instrumentation-fetch":qd,"@opentelemetry/instrumentation-user-interaction":i_,"@opentelemetry/instrumentation-xml-http-request":__};function h_(r){var e;r===void 0&&(r={});for(var t=0,n=Object.keys(r);t<n.length;t++){var o=n[t];if(!Object.prototype.hasOwnProperty.call(yn,o)){R.error('Provided instrumentation name "'+o+'" not found');continue}}for(var i=[],a=0,s=Object.keys(yn);a<s.length;a++){var c=s[a],u=yn[c],l=(e=r[c])!==null&&e!==void 0?e:{};if(l.enabled===!1){R.debug("Disabling instrumentation for "+c);continue}try{R.debug("Loading instrumentation for "+c),i.push(new u(l))}catch(f){R.error(f)}}return i}var xt;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE"})(xt||(xt={}));var Vt;(function(r){r[r.HISTOGRAM=0]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=1]="EXPONENTIAL_HISTOGRAM",r[r.GAUGE=2]="GAUGE",r[r.SUM=3]="SUM"})(Vt||(Vt={}));var p_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),so=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},co=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},v_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},E_=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},y_=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function T_(r){return r!=null}function Ca(r){var e=Object.keys(r);return e.length===0?"":(e=e.sort(),JSON.stringify(e.map(function(t){return[t,r[t]]})))}function g_(r){var e,t;return r.name+":"+((e=r.version)!==null&&e!==void 0?e:"")+":"+((t=r.schemaUrl)!==null&&t!==void 0?t:"")}var Ia=function(r){p_(e,r);function e(t){var n=r.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return e}(Error);function rr(r,e){var t,n=new Promise(function(i,a){t=setTimeout(function(){a(new Ia("Operation timed out."))},e)});return Promise.race([r,n]).then(function(o){return clearTimeout(t),o},function(o){throw clearTimeout(t),o})}function m_(r){return so(this,void 0,void 0,function(){var e=this;return co(this,function(t){return[2,Promise.all(r.map(function(n){return so(e,void 0,void 0,function(){var o,i;return co(this,function(a){switch(a.label){case 0:return a.trys.push([0,2,,3]),[4,n];case 1:return o=a.sent(),[2,{status:"fulfilled",value:o}];case 2:return i=a.sent(),[2,{status:"rejected",reason:i}];case 3:return[2]}})})}))]})})}function S_(r){return r.status==="rejected"}function lo(r,e){var t=[];return r.forEach(function(n){t.push.apply(t,E_([],v_(e(n)),!1))}),t}function O_(r,e){var t,n;if(r.size!==e.size)return!1;try{for(var o=y_(r),i=o.next();!i.done;i=o.next()){var a=i.value;if(!e.has(a))return!1}}catch(s){t={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return!0}function b_(r,e){for(var t=0,n=r.length-1,o=r.length;n>=t;){var i=t+Math.trunc((n-t)/2);r[i]<e?t=i+1:(o=i,n=i-1)}return o}function w_(r,e){return r.toLowerCase()===e.toLowerCase()}var he;(function(r){r[r.DROP=0]="DROP",r[r.SUM=1]="SUM",r[r.LAST_VALUE=2]="LAST_VALUE",r[r.HISTOGRAM=3]="HISTOGRAM",r[r.EXPONENTIAL_HISTOGRAM=4]="EXPONENTIAL_HISTOGRAM"})(he||(he={}));var A_=function(){function r(){this.kind=he.DROP}return r.prototype.createAccumulation=function(){},r.prototype.merge=function(e,t){},r.prototype.diff=function(e,t){},r.prototype.toMetricData=function(e,t,n,o){},r}(),Z;(function(r){r.COUNTER="COUNTER",r.GAUGE="GAUGE",r.HISTOGRAM="HISTOGRAM",r.UP_DOWN_COUNTER="UP_DOWN_COUNTER",r.OBSERVABLE_COUNTER="OBSERVABLE_COUNTER",r.OBSERVABLE_GAUGE="OBSERVABLE_GAUGE",r.OBSERVABLE_UP_DOWN_COUNTER="OBSERVABLE_UP_DOWN_COUNTER"})(Z||(Z={}));function te(r,e,t){var n,o,i,a;return N_(r)||R.warn('Invalid metric name: "'+r+'". The metric name should be a ASCII string with a length no greater than 255 characters.'),{name:r,type:e,description:(n=t?.description)!==null&&n!==void 0?n:"",unit:(o=t?.unit)!==null&&o!==void 0?o:"",valueType:(i=t?.valueType)!==null&&i!==void 0?i:ne.DOUBLE,advice:(a=t?.advice)!==null&&a!==void 0?a:{}}}function R_(r,e){var t,n;return{name:(t=r.name)!==null&&t!==void 0?t:e.name,description:(n=r.description)!==null&&n!==void 0?n:e.description,type:e.type,unit:e.unit,valueType:e.valueType,advice:e.advice}}function L_(r,e){return w_(r.name,e.name)&&r.unit===e.unit&&r.type===e.type&&r.valueType===e.valueType}var P_=/^[a-z][a-z0-9_.\-/]{0,254}$/i;function N_(r){return r.match(P_)!=null}var C_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function I_(r){var e=r.map(function(){return 0});return e.push(0),{buckets:{boundaries:r,counts:e},sum:0,count:0,hasMinMax:!1,min:1/0,max:-1/0}}var Tn=function(){function r(e,t,n,o){n===void 0&&(n=!0),o===void 0&&(o=I_(t)),this.startTime=e,this._boundaries=t,this._recordMinMax=n,this._current=o}return r.prototype.record=function(e){if(!Number.isNaN(e)){this._current.count+=1,this._current.sum+=e,this._recordMinMax&&(this._current.min=Math.min(e,this._current.min),this._current.max=Math.max(e,this._current.max),this._current.hasMinMax=!0);var t=b_(this._boundaries,e);this._current.buckets.counts[t]+=1}},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),Ma=function(){function r(e,t){this._boundaries=e,this._recordMinMax=t,this.kind=he.HISTOGRAM}return r.prototype.createAccumulation=function(e){return new Tn(e,this._boundaries,this._recordMinMax)},r.prototype.merge=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,s=new Array(i.length),c=0;c<i.length;c++)s[c]=i[c]+a[c];var u=1/0,l=-1/0;return this._recordMinMax&&(n.hasMinMax&&o.hasMinMax?(u=Math.min(n.min,o.min),l=Math.max(n.max,o.max)):n.hasMinMax?(u=n.min,l=n.max):o.hasMinMax&&(u=o.min,l=o.max)),new Tn(e.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:s},count:n.count+o.count,sum:n.sum+o.sum,hasMinMax:this._recordMinMax&&(n.hasMinMax||o.hasMinMax),min:u,max:l})},r.prototype.diff=function(e,t){for(var n=e.toPointValue(),o=t.toPointValue(),i=n.buckets.counts,a=o.buckets.counts,s=new Array(i.length),c=0;c<i.length;c++)s[c]=a[c]-i[c];return new Tn(t.startTime,n.buckets.boundaries,this._recordMinMax,{buckets:{boundaries:n.buckets.boundaries,counts:s},count:o.count-n.count,sum:o.sum-n.sum,hasMinMax:!1,min:1/0,max:-1/0})},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:Vt.HISTOGRAM,dataPoints:n.map(function(i){var a=C_(i,2),s=a[0],c=a[1],u=c.toPointValue(),l=e.type===Z.GAUGE||e.type===Z.UP_DOWN_COUNTER||e.type===Z.OBSERVABLE_GAUGE||e.type===Z.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:c.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:l?void 0:u.sum,buckets:u.buckets,count:u.count}}})}},r}(),gn=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},mn=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},fo=function(){function r(e,t,n,o){e===void 0&&(e=new M_),t===void 0&&(t=0),n===void 0&&(n=0),o===void 0&&(o=0),this.backing=e,this.indexBase=t,this.indexStart=n,this.indexEnd=o}return Object.defineProperty(r.prototype,"offset",{get:function(){return this.indexStart},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"length",{get:function(){return this.backing.length===0||this.indexEnd===this.indexStart&&this.at(0)===0?0:this.indexEnd-this.indexStart+1},enumerable:!1,configurable:!0}),r.prototype.counts=function(){var e=this;return Array.from({length:this.length},function(t,n){return e.at(n)})},r.prototype.at=function(e){var t=this.indexBase-this.indexStart;return e<t&&(e+=this.backing.length),e-=t,this.backing.countAt(e)},r.prototype.incrementBucket=function(e,t){this.backing.increment(e,t)},r.prototype.decrementBucket=function(e,t){this.backing.decrement(e,t)},r.prototype.trim=function(){for(var e=0;e<this.length;e++)if(this.at(e)!==0){this.indexStart+=e;break}else if(e===this.length-1){this.indexStart=this.indexEnd=this.indexBase=0;return}for(var e=this.length-1;e>=0;e--)if(this.at(e)!==0){this.indexEnd-=this.length-e-1;break}this._rotate()},r.prototype.downscale=function(e){this._rotate();for(var t=1+this.indexEnd-this.indexStart,n=1<<e,o=0,i=0,a=this.indexStart;a<=this.indexEnd;){var s=a%n;s<0&&(s+=n);for(var c=s;c<n&&o<t;c++)this._relocateBucket(i,o),o++,a++;i++}this.indexStart>>=e,this.indexEnd>>=e,this.indexBase=this.indexStart},r.prototype.clone=function(){return new r(this.backing.clone(),this.indexBase,this.indexStart,this.indexEnd)},r.prototype._rotate=function(){var e=this.indexBase-this.indexStart;e!==0&&(e>0?(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,e),this.backing.reverse(e,this.backing.length)):(this.backing.reverse(0,this.backing.length),this.backing.reverse(0,this.backing.length+e)),this.indexBase=this.indexStart)},r.prototype._relocateBucket=function(e,t){e!==t&&this.incrementBucket(e,this.backing.emptyBucket(t))},r}(),M_=function(){function r(e){e===void 0&&(e=[0]),this._counts=e}return Object.defineProperty(r.prototype,"length",{get:function(){return this._counts.length},enumerable:!1,configurable:!0}),r.prototype.countAt=function(e){return this._counts[e]},r.prototype.growTo=function(e,t,n){var o=new Array(e).fill(0);o.splice.apply(o,mn([n,this._counts.length-t],gn(this._counts.slice(t)),!1)),o.splice.apply(o,mn([0,t],gn(this._counts.slice(0,t)),!1)),this._counts=o},r.prototype.reverse=function(e,t){for(var n=Math.floor((e+t)/2)-e,o=0;o<n;o++){var i=this._counts[e+o];this._counts[e+o]=this._counts[t-o-1],this._counts[t-o-1]=i}},r.prototype.emptyBucket=function(e){var t=this._counts[e];return this._counts[e]=0,t},r.prototype.increment=function(e,t){this._counts[e]+=t},r.prototype.decrement=function(e,t){this._counts[e]>=t?this._counts[e]-=t:this._counts[e]=0},r.prototype.clone=function(){return new r(mn([],gn(this._counts),!1))},r}(),x_=52,D_=2146435072,k_=1048575,si=1023,xa=-si+1,Da=si,Zn=Math.pow(2,-1022);function ka(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=(t&D_)>>20;return n-si}function Ua(r){var e=new DataView(new ArrayBuffer(8));e.setFloat64(0,r);var t=e.getUint32(0),n=e.getUint32(4),o=(t&k_)*Math.pow(2,32);return o+n}function Wn(r,e){return r===0||r===Number.POSITIVE_INFINITY||r===Number.NEGATIVE_INFINITY||Number.isNaN(r)?r:r*Math.pow(2,e)}function U_(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,r++,r}var B_=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nr=function(r){B_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Error),G_=function(){function r(e){this._shift=-e}return r.prototype.mapToIndex=function(e){if(e<Zn)return this._minNormalLowerBoundaryIndex();var t=ka(e),n=this._rightShift(Ua(e)-1,x_);return t+n>>this._shift},r.prototype.lowerBoundary=function(e){var t=this._minNormalLowerBoundaryIndex();if(e<t)throw new nr("underflow: "+e+" is < minimum lower boundary: "+t);var n=this._maxNormalLowerBoundaryIndex();if(e>n)throw new nr("overflow: "+e+" is > maximum lower boundary: "+n);return Wn(1,e<<this._shift)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._shift===0?0:-this._shift},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){var e=xa>>this._shift;return this._shift<2&&e--,e},r.prototype._maxNormalLowerBoundaryIndex=function(){return Da>>this._shift},r.prototype._rightShift=function(e,t){return Math.floor(e*Math.pow(2,-t))},r}(),H_=function(){function r(e){this._scale=e,this._scaleFactor=Wn(Math.LOG2E,e),this._inverseFactor=Wn(Math.LN2,-e)}return r.prototype.mapToIndex=function(e){if(e<=Zn)return this._minNormalLowerBoundaryIndex()-1;if(Ua(e)===0){var t=ka(e);return(t<<this._scale)-1}var n=Math.floor(Math.log(e)*this._scaleFactor),o=this._maxNormalLowerBoundaryIndex();return n>=o?o:n},r.prototype.lowerBoundary=function(e){var t=this._maxNormalLowerBoundaryIndex();if(e>=t){if(e===t)return 2*Math.exp((e-(1<<this._scale))/this._scaleFactor);throw new nr("overflow: "+e+" is > maximum lower boundary: "+t)}var n=this._minNormalLowerBoundaryIndex();if(e<=n){if(e===n)return Zn;if(e===n-1)return Math.exp((e+(1<<this._scale))/this._scaleFactor)/2;throw new nr("overflow: "+e+" is < minimum lower boundary: "+n)}return Math.exp(e*this._inverseFactor)},Object.defineProperty(r.prototype,"scale",{get:function(){return this._scale},enumerable:!1,configurable:!0}),r.prototype._minNormalLowerBoundaryIndex=function(){return xa<<this._scale},r.prototype._maxNormalLowerBoundaryIndex=function(){return(Da+1<<this._scale)-1},r}(),_o=-10,ho=20,V_=Array.from({length:31},function(r,e){return e>10?new H_(e-10):new G_(e-10)});function po(r){if(r>ho||r<_o)throw new nr("expected scale >= "+_o+" && <= "+ho+", got: "+r);return V_[r+10]}var j_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},gr=function(){function r(e,t){this.low=e,this.high=t}return r.combine=function(e,t){return new r(Math.min(e.low,t.low),Math.max(e.high,t.high))},r}(),F_=20,X_=160,Sn=2,$_=function(){function r(e,t,n,o,i,a,s,c,u,l,f){e===void 0&&(e=e),t===void 0&&(t=X_),n===void 0&&(n=!0),o===void 0&&(o=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=Number.POSITIVE_INFINITY),c===void 0&&(c=Number.NEGATIVE_INFINITY),u===void 0&&(u=new fo),l===void 0&&(l=new fo),f===void 0&&(f=po(F_)),this.startTime=e,this._maxSize=t,this._recordMinMax=n,this._sum=o,this._count=i,this._zeroCount=a,this._min=s,this._max=c,this._positive=u,this._negative=l,this._mapping=f,this._maxSize<Sn&&(R.warn("Exponential Histogram Max Size set to "+this._maxSize+",                 changing to the minimum size of: "+Sn),this._maxSize=Sn)}return r.prototype.record=function(e){this.updateByIncrement(e,1)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return{hasMinMax:this._recordMinMax,min:this.min,max:this.max,sum:this.sum,positive:{offset:this.positive.offset,bucketCounts:this.positive.counts()},negative:{offset:this.negative.offset,bucketCounts:this.negative.counts()},count:this.count,scale:this.scale,zeroCount:this.zeroCount}},Object.defineProperty(r.prototype,"sum",{get:function(){return this._sum},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"min",{get:function(){return this._min},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"max",{get:function(){return this._max},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"zeroCount",{get:function(){return this._zeroCount},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scale",{get:function(){return this._count===this._zeroCount?0:this._mapping.scale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"positive",{get:function(){return this._positive},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"negative",{get:function(){return this._negative},enumerable:!1,configurable:!0}),r.prototype.updateByIncrement=function(e,t){if(!Number.isNaN(e)){if(e>this._max&&(this._max=e),e<this._min&&(this._min=e),this._count+=t,e===0){this._zeroCount+=t;return}this._sum+=e*t,e>0?this._updateBuckets(this._positive,e,t):this._updateBuckets(this._negative,-e,t)}},r.prototype.merge=function(e){this._count===0?(this._min=e.min,this._max=e.max):e.count!==0&&(e.min<this.min&&(this._min=e.min),e.max>this.max&&(this._max=e.max)),this.startTime=e.startTime,this._sum+=e.sum,this._count+=e.count,this._zeroCount+=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._mergeBuckets(this.positive,e,e.positive,t),this._mergeBuckets(this.negative,e,e.negative,t)},r.prototype.diff=function(e){this._min=1/0,this._max=-1/0,this._sum-=e.sum,this._count-=e.count,this._zeroCount-=e.zeroCount;var t=this._minScale(e);this._downscale(this.scale-t),this._diffBuckets(this.positive,e,e.positive,t),this._diffBuckets(this.negative,e,e.negative,t)},r.prototype.clone=function(){return new r(this.startTime,this._maxSize,this._recordMinMax,this._sum,this._count,this._zeroCount,this._min,this._max,this.positive.clone(),this.negative.clone(),this._mapping)},r.prototype._updateBuckets=function(e,t,n){var o=this._mapping.mapToIndex(t),i=!1,a=0,s=0;if(e.length===0?(e.indexStart=o,e.indexEnd=e.indexStart,e.indexBase=e.indexStart):o<e.indexStart&&e.indexEnd-o>=this._maxSize?(i=!0,s=o,a=e.indexEnd):o>e.indexEnd&&o-e.indexStart>=this._maxSize&&(i=!0,s=e.indexStart,a=o),i){var c=this._changeScale(a,s);this._downscale(c),o=this._mapping.mapToIndex(t)}this._incrementIndexBy(e,o,n)},r.prototype._incrementIndexBy=function(e,t,n){if(n!==0){if(e.length===0&&(e.indexStart=e.indexEnd=e.indexBase=t),t<e.indexStart){var o=e.indexEnd-t;o>=e.backing.length&&this._grow(e,o+1),e.indexStart=t}else if(t>e.indexEnd){var o=t-e.indexStart;o>=e.backing.length&&this._grow(e,o+1),e.indexEnd=t}var i=t-e.indexBase;i<0&&(i+=e.backing.length),e.incrementBucket(i,n)}},r.prototype._grow=function(e,t){var n=e.backing.length,o=e.indexBase-e.indexStart,i=n-o,a=U_(t);a>this._maxSize&&(a=this._maxSize);var s=a-o;e.backing.growTo(a,i,s)},r.prototype._changeScale=function(e,t){for(var n=0;e-t>=this._maxSize;)e>>=1,t>>=1,n++;return n},r.prototype._downscale=function(e){if(e!==0){if(e<0)throw new Error("impossible change of scale: "+this.scale);var t=this._mapping.scale-e;this._positive.downscale(e),this._negative.downscale(e),this._mapping=po(t)}},r.prototype._minScale=function(e){var t=Math.min(this.scale,e.scale),n=gr.combine(this._highLowAtScale(this.positive,this.scale,t),this._highLowAtScale(e.positive,e.scale,t)),o=gr.combine(this._highLowAtScale(this.negative,this.scale,t),this._highLowAtScale(e.negative,e.scale,t));return Math.min(t-this._changeScale(n.high,n.low),t-this._changeScale(o.high,o.low))},r.prototype._highLowAtScale=function(e,t,n){if(e.length===0)return new gr(0,-1);var o=t-n;return new gr(e.indexStart>>o,e.indexEnd>>o)},r.prototype._mergeBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,s=0;s<n.length;s++)this._incrementIndexBy(e,i+s>>a,n.at(s))},r.prototype._diffBuckets=function(e,t,n,o){for(var i=n.offset,a=t.scale-o,s=0;s<n.length;s++){var c=i+s>>a,u=c-e.indexBase;u<0&&(u+=e.backing.length),e.decrementBucket(u,n.at(s))}e.trim()},r}(),z_=function(){function r(e,t){this._maxSize=e,this._recordMinMax=t,this.kind=he.EXPONENTIAL_HISTOGRAM}return r.prototype.createAccumulation=function(e){return new $_(e,this._maxSize,this._recordMinMax)},r.prototype.merge=function(e,t){var n=t.clone();return n.merge(e),n},r.prototype.diff=function(e,t){var n=t.clone();return n.diff(e),n},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:Vt.EXPONENTIAL_HISTOGRAM,dataPoints:n.map(function(i){var a=j_(i,2),s=a[0],c=a[1],u=c.toPointValue(),l=e.type===Z.GAUGE||e.type===Z.UP_DOWN_COUNTER||e.type===Z.OBSERVABLE_GAUGE||e.type===Z.OBSERVABLE_UP_DOWN_COUNTER;return{attributes:s,startTime:c.startTime,endTime:o,value:{min:u.hasMinMax?u.min:void 0,max:u.hasMinMax?u.max:void 0,sum:l?void 0:u.sum,positive:{offset:u.positive.offset,bucketCounts:u.positive.bucketCounts},negative:{offset:u.negative.offset,bucketCounts:u.negative.bucketCounts},count:u.count,scale:u.scale,zeroCount:u.zeroCount}}})}},r}(),Z_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},On=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=[0,0]),this.startTime=e,this._current=t,this.sampleTime=n}return r.prototype.record=function(e){this._current=e,this.sampleTime=oe(Date.now())},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),W_=function(){function r(){this.kind=he.LAST_VALUE}return r.prototype.createAccumulation=function(e){return new On(e)},r.prototype.merge=function(e,t){var n=yr(t.sampleTime)>=yr(e.sampleTime)?t:e;return new On(e.startTime,n.toPointValue(),n.sampleTime)},r.prototype.diff=function(e,t){var n=yr(t.sampleTime)>=yr(e.sampleTime)?t:e;return new On(t.startTime,n.toPointValue(),n.sampleTime)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:Vt.GAUGE,dataPoints:n.map(function(i){var a=Z_(i,2),s=a[0],c=a[1];return{attributes:s,startTime:c.startTime,endTime:o,value:c.toPointValue()}})}},r}(),Y_=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},ze=function(){function r(e,t,n,o){n===void 0&&(n=0),o===void 0&&(o=!1),this.startTime=e,this.monotonic=t,this._current=n,this.reset=o}return r.prototype.record=function(e){this.monotonic&&e<0||(this._current+=e)},r.prototype.setStartTime=function(e){this.startTime=e},r.prototype.toPointValue=function(){return this._current},r}(),vo=function(){function r(e){this.monotonic=e,this.kind=he.SUM}return r.prototype.createAccumulation=function(e){return new ze(e,this.monotonic)},r.prototype.merge=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return t.reset?new ze(t.startTime,this.monotonic,o,t.reset):new ze(e.startTime,this.monotonic,n+o)},r.prototype.diff=function(e,t){var n=e.toPointValue(),o=t.toPointValue();return this.monotonic&&n>o?new ze(t.startTime,this.monotonic,o,!0):new ze(t.startTime,this.monotonic,o-n)},r.prototype.toMetricData=function(e,t,n,o){return{descriptor:e,aggregationTemporality:t,dataPointType:Vt.SUM,dataPoints:n.map(function(i){var a=Y_(i,2),s=a[0],c=a[1];return{attributes:s,startTime:c.startTime,endTime:o,value:c.toPointValue()}}),isMonotonic:this.monotonic}},r}(),Ee=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),qt=function(){function r(){}return r.Drop=function(){return Ba},r.Sum=function(){return Ga},r.LastValue=function(){return Ha},r.Histogram=function(){return Va},r.ExponentialHistogram=function(){return nh},r.Default=function(){return ih},r}(),K_=function(r){Ee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new A_,e}(qt),q_=function(r){Ee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){switch(t.type){case Z.COUNTER:case Z.OBSERVABLE_COUNTER:case Z.HISTOGRAM:return e.MONOTONIC_INSTANCE;default:return e.NON_MONOTONIC_INSTANCE}},e.MONOTONIC_INSTANCE=new vo(!0),e.NON_MONOTONIC_INSTANCE=new vo(!1),e}(qt),Q_=function(r){Ee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new W_,e}(qt),J_=function(r){Ee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.createAggregator=function(t){return e.DEFAULT_INSTANCE},e.DEFAULT_INSTANCE=new Ma([0,5,10,25,50,75,100,250,500,750,1e3,2500,5e3,7500,1e4],!0),e}(qt),th=function(r){Ee(e,r);function e(t,n){n===void 0&&(n=!0);var o=r.call(this)||this;if(o._recordMinMax=n,t==null)throw new Error("ExplicitBucketHistogramAggregation should be created with explicit boundaries, if a single bucket histogram is required, please pass an empty array");t=t.concat(),t=t.sort(function(s,c){return s-c});var i=t.lastIndexOf(-1/0),a=t.indexOf(1/0);return a===-1&&(a=void 0),o._boundaries=t.slice(i+1,a),o}return e.prototype.createAggregator=function(t){return new Ma(this._boundaries,this._recordMinMax)},e}(qt),eh=function(r){Ee(e,r);function e(t,n){t===void 0&&(t=160),n===void 0&&(n=!0);var o=r.call(this)||this;return o._maxSize=t,o._recordMinMax=n,o}return e.prototype.createAggregator=function(t){return new z_(this._maxSize,this._recordMinMax)},e}(qt),rh=function(r){Ee(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._resolve=function(t){switch(t.type){case Z.COUNTER:case Z.UP_DOWN_COUNTER:case Z.OBSERVABLE_COUNTER:case Z.OBSERVABLE_UP_DOWN_COUNTER:return Ga;case Z.GAUGE:case Z.OBSERVABLE_GAUGE:return Ha;case Z.HISTOGRAM:return t.advice.explicitBucketBoundaries?new th(t.advice.explicitBucketBoundaries):Va}return R.warn("Unable to recognize instrument type: "+t.type),Ba},e.prototype.createAggregator=function(t){return this._resolve(t).createAggregator(t)},e}(qt),Ba=new K_,Ga=new q_,Ha=new Q_,Va=new J_,nh=new eh,ih=new rh,oh=function(r){return qt.Default()},ah=function(r){return xt.CUMULATIVE},bn=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},wn=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Eo=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},uh=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},sh=function(){function r(e){var t,n,o;this._shutdown=!1,this._aggregationSelector=(t=e?.aggregationSelector)!==null&&t!==void 0?t:oh,this._aggregationTemporalitySelector=(n=e?.aggregationTemporalitySelector)!==null&&n!==void 0?n:ah,this._metricProducers=(o=e?.metricProducers)!==null&&o!==void 0?o:[],this._cardinalitySelector=e?.cardinalitySelector}return r.prototype.setMetricProducer=function(e){if(this._sdkMetricProducer)throw new Error("MetricReader can not be bound to a MeterProvider again.");this._sdkMetricProducer=e,this.onInitialized()},r.prototype.selectAggregation=function(e){return this._aggregationSelector(e)},r.prototype.selectAggregationTemporality=function(e){return this._aggregationTemporalitySelector(e)},r.prototype.selectCardinalityLimit=function(e){return this._cardinalitySelector?this._cardinalitySelector(e):2e3},r.prototype.onInitialized=function(){},r.prototype.collect=function(e){return bn(this,void 0,void 0,function(){var t,n,o,i,a,s;return wn(this,function(c){switch(c.label){case 0:if(this._sdkMetricProducer===void 0)throw new Error("MetricReader is not bound to a MetricProducer");if(this._shutdown)throw new Error("MetricReader is shutdown");return[4,Promise.all(uh([this._sdkMetricProducer.collect({timeoutMillis:e?.timeoutMillis})],Eo(this._metricProducers.map(function(u){return u.collect({timeoutMillis:e?.timeoutMillis})})),!1))];case 1:return t=Eo.apply(void 0,[c.sent()]),n=t[0],o=t.slice(1),i=n.errors.concat(lo(o,function(u){return u.errors})),a=n.resourceMetrics.resource,s=n.resourceMetrics.scopeMetrics.concat(lo(o,function(u){return u.resourceMetrics.scopeMetrics})),[2,{resourceMetrics:{resource:a,scopeMetrics:s},errors:i}]}})})},r.prototype.shutdown=function(e){return bn(this,void 0,void 0,function(){return wn(this,function(t){switch(t.label){case 0:return this._shutdown?(R.error("Cannot call shutdown twice."),[2]):e?.timeoutMillis!=null?[3,2]:[4,this.onShutdown()];case 1:return t.sent(),[3,4];case 2:return[4,rr(this.onShutdown(),e.timeoutMillis)];case 3:t.sent(),t.label=4;case 4:return this._shutdown=!0,[2]}})})},r.prototype.forceFlush=function(e){return bn(this,void 0,void 0,function(){return wn(this,function(t){switch(t.label){case 0:return this._shutdown?(R.warn("Cannot forceFlush on already shutdown MetricReader."),[2]):e?.timeoutMillis!=null?[3,2]:[4,this.onForceFlush()];case 1:return t.sent(),[2];case 2:return[4,rr(this.onForceFlush(),e.timeoutMillis)];case 3:return t.sent(),[2]}})})},r}(),ch=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),mr=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Sr=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},lh=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},fh=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},dh=function(r){ch(e,r);function e(t){var n,o,i,a,s=r.call(this,{aggregationSelector:(n=t.exporter.selectAggregation)===null||n===void 0?void 0:n.bind(t.exporter),aggregationTemporalitySelector:(o=t.exporter.selectAggregationTemporality)===null||o===void 0?void 0:o.bind(t.exporter),metricProducers:t.metricProducers})||this;if(t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<=0)throw Error("exportIntervalMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportTimeoutMillis<=0)throw Error("exportTimeoutMillis must be greater than 0");if(t.exportTimeoutMillis!==void 0&&t.exportIntervalMillis!==void 0&&t.exportIntervalMillis<t.exportTimeoutMillis)throw Error("exportIntervalMillis must be greater than or equal to exportTimeoutMillis");return s._exportInterval=(i=t.exportIntervalMillis)!==null&&i!==void 0?i:6e4,s._exportTimeout=(a=t.exportTimeoutMillis)!==null&&a!==void 0?a:3e4,s._exporter=t.exporter,s}return e.prototype._runOnce=function(){return mr(this,void 0,void 0,function(){var t;return Sr(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,rr(this._doRun(),this._exportTimeout)];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),t instanceof Ia?(R.error("Export took longer than %s milliseconds and timed out.",this._exportTimeout),[2]):(qi(t),[3,3]);case 3:return[2]}})})},e.prototype._doRun=function(){var t,n;return mr(this,void 0,void 0,function(){var o,i,a,s,c,u;return Sr(this,function(l){switch(l.label){case 0:return[4,this.collect({timeoutMillis:this._exportTimeout})];case 1:if(o=l.sent(),i=o.resourceMetrics,a=o.errors,a.length>0&&(u=R).error.apply(u,fh(["PeriodicExportingMetricReader: metrics collection errors"],lh(a),!1)),!i.resource.asyncAttributesPending)return[3,5];l.label=2;case 2:return l.trys.push([2,4,,5]),[4,(n=(t=i.resource).waitForAsyncAttributes)===null||n===void 0?void 0:n.call(t)];case 3:return l.sent(),[3,5];case 4:return s=l.sent(),R.debug("Error while resolving async portion of resource: ",s),qi(s),[3,5];case 5:return i.scopeMetrics.length===0?[2]:[4,Wf._export(this._exporter,i)];case 6:if(c=l.sent(),c.code!==Bt.SUCCESS)throw new Error("PeriodicExportingMetricReader: metrics export failed (error "+c.error+")");return[2]}})})},e.prototype.onInitialized=function(){var t=this;this._interval=setInterval(function(){t._runOnce()},this._exportInterval),this._interval},e.prototype.onForceFlush=function(){return mr(this,void 0,void 0,function(){return Sr(this,function(t){switch(t.label){case 0:return[4,this._runOnce()];case 1:return t.sent(),[4,this._exporter.forceFlush()];case 2:return t.sent(),[2]}})})},e.prototype.onShutdown=function(){return mr(this,void 0,void 0,function(){return Sr(this,function(t){switch(t.label){case 0:return this._interval&&clearInterval(this._interval),[4,this.onForceFlush()];case 1:return t.sent(),[4,this._exporter.shutdown()];case 2:return t.sent(),[2]}})})},e}(sh),_h=function(){function r(){this._registeredViews=[]}return r.prototype.addView=function(e){this._registeredViews.push(e)},r.prototype.findViews=function(e,t){var n=this,o=this._registeredViews.filter(function(i){return n._matchInstrument(i.instrumentSelector,e)&&n._matchMeter(i.meterSelector,t)});return o},r.prototype._matchInstrument=function(e,t){return(e.getType()===void 0||t.type===e.getType())&&e.getNameFilter().match(t.name)&&e.getUnitFilter().match(t.unit)},r.prototype._matchMeter=function(e,t){return e.getNameFilter().match(t.name)&&(t.version===void 0||e.getVersionFilter().match(t.version))&&(t.schemaUrl===void 0||e.getSchemaUrlFilter().match(t.schemaUrl))},r}(),ye=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),zr=function(){function r(e,t){this._writableMetricStorage=e,this._descriptor=t}return r.prototype._record=function(e,t,n){if(t===void 0&&(t={}),n===void 0&&(n=$.active()),typeof e!="number"){R.warn("non-number value provided to metric "+this._descriptor.name+": "+e);return}this._descriptor.valueType===ne.INT&&!Number.isInteger(e)&&(R.warn("INT value type cannot accept a floating-point value for "+this._descriptor.name+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._writableMetricStorage.record(e,t,n,oe(Date.now()))},r}(),hh=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,o){this._record(t,n,o)},e}(zr),ph=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.add=function(t,n,o){if(t<0){R.warn("negative value provided to counter "+this._descriptor.name+": "+t);return}this._record(t,n,o)},e}(zr),vh=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,o){this._record(t,n,o)},e}(zr),Eh=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.record=function(t,n,o){if(t<0){R.warn("negative value provided to histogram "+this._descriptor.name+": "+t);return}this._record(t,n,o)},e}(zr),Zr=function(){function r(e,t,n){this._observableRegistry=n,this._descriptor=e,this._metricStorages=t}return r.prototype.addCallback=function(e){this._observableRegistry.addCallback(e,this)},r.prototype.removeCallback=function(e){this._observableRegistry.removeCallback(e,this)},r}(),yh=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Zr),Th=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Zr),gh=function(r){ye(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e}(Zr);function Yn(r){return r instanceof Zr}var mh=function(){function r(e){this._meterSharedState=e}return r.prototype.createGauge=function(e,t){var n=te(e,Z.GAUGE,t),o=this._meterSharedState.registerMetricStorage(n);return new vh(o,n)},r.prototype.createHistogram=function(e,t){var n=te(e,Z.HISTOGRAM,t),o=this._meterSharedState.registerMetricStorage(n);return new Eh(o,n)},r.prototype.createCounter=function(e,t){var n=te(e,Z.COUNTER,t),o=this._meterSharedState.registerMetricStorage(n);return new ph(o,n)},r.prototype.createUpDownCounter=function(e,t){var n=te(e,Z.UP_DOWN_COUNTER,t),o=this._meterSharedState.registerMetricStorage(n);return new hh(o,n)},r.prototype.createObservableGauge=function(e,t){var n=te(e,Z.OBSERVABLE_GAUGE,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new Th(n,o,this._meterSharedState.observableRegistry)},r.prototype.createObservableCounter=function(e,t){var n=te(e,Z.OBSERVABLE_COUNTER,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new yh(n,o,this._meterSharedState.observableRegistry)},r.prototype.createObservableUpDownCounter=function(e,t){var n=te(e,Z.OBSERVABLE_UP_DOWN_COUNTER,t),o=this._meterSharedState.registerAsyncMetricStorage(n);return new gh(n,o,this._meterSharedState.observableRegistry)},r.prototype.addBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.addBatchCallback(e,t)},r.prototype.removeBatchObservableCallback=function(e,t){this._meterSharedState.observableRegistry.removeBatchCallback(e,t)},r}(),ja=function(){function r(e){this._instrumentDescriptor=e}return r.prototype.getInstrumentDescriptor=function(){return this._instrumentDescriptor},r.prototype.updateDescription=function(e){this._instrumentDescriptor=te(this._instrumentDescriptor.name,this._instrumentDescriptor.type,{description:e,valueType:this._instrumentDescriptor.valueType,unit:this._instrumentDescriptor.unit,advice:this._instrumentDescriptor.advice})},r}(),Sh=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yo=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Oh=function(){function r(e){this._hash=e,this._valueMap=new Map,this._keyMap=new Map}return r.prototype.get=function(e,t){return t??(t=this._hash(e)),this._valueMap.get(t)},r.prototype.getOrDefault=function(e,t){var n=this._hash(e);if(this._valueMap.has(n))return this._valueMap.get(n);var o=t();return this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,o),o},r.prototype.set=function(e,t,n){n??(n=this._hash(e)),this._keyMap.has(n)||this._keyMap.set(n,e),this._valueMap.set(n,t)},r.prototype.has=function(e,t){return t??(t=this._hash(e)),this._valueMap.has(t)},r.prototype.keys=function(){var e,t;return yo(this,function(n){switch(n.label){case 0:e=this._keyMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},r.prototype.entries=function(){var e,t;return yo(this,function(n){switch(n.label){case 0:e=this._valueMap.entries(),t=e.next(),n.label=1;case 1:return t.done===!0?[3,3]:[4,[this._keyMap.get(t.value[0]),t.value[1],t.value[0]]];case 2:return n.sent(),t=e.next(),[3,1];case 3:return[2]}})},Object.defineProperty(r.prototype,"size",{get:function(){return this._valueMap.size},enumerable:!1,configurable:!0}),r}(),fe=function(r){Sh(e,r);function e(){return r.call(this,Ca)||this}return e}(Oh),bh=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Fa=function(){function r(e,t){this._aggregator=e,this._activeCollectionStorage=new fe,this._cumulativeMemoStorage=new fe,this._overflowAttributes={"otel.metric.overflow":!0},this._cardinalityLimit=(t??2e3)-1,this._overflowHashCode=Ca(this._overflowAttributes)}return r.prototype.record=function(e,t,n,o){var i=this,a=this._activeCollectionStorage.get(t);if(!a){if(this._activeCollectionStorage.size>=this._cardinalityLimit){var s=this._activeCollectionStorage.getOrDefault(this._overflowAttributes,function(){return i._aggregator.createAccumulation(o)});s?.record(e);return}a=this._aggregator.createAccumulation(o),this._activeCollectionStorage.set(t,a)}a?.record(e)},r.prototype.batchCumulate=function(e,t){var n=this;Array.from(e.entries()).forEach(function(o){var i=bh(o,3),a=i[0],s=i[1],c=i[2],u=n._aggregator.createAccumulation(t);u?.record(s);var l=u;if(n._cumulativeMemoStorage.has(a,c)){var f=n._cumulativeMemoStorage.get(a,c);l=n._aggregator.diff(f,u)}else if(n._cumulativeMemoStorage.size>=n._cardinalityLimit&&(a=n._overflowAttributes,c=n._overflowHashCode,n._cumulativeMemoStorage.has(a,c))){var f=n._cumulativeMemoStorage.get(a,c);l=n._aggregator.diff(f,u)}if(n._activeCollectionStorage.has(a,c)){var m=n._activeCollectionStorage.get(a,c);l=n._aggregator.merge(m,l)}n._cumulativeMemoStorage.set(a,u,c),n._activeCollectionStorage.set(a,l,c)})},r.prototype.collect=function(){var e=this._activeCollectionStorage;return this._activeCollectionStorage=new fe,e},r}(),An=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},To=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Xa=function(){function r(e,t){var n=this;this._aggregator=e,this._unreportedAccumulations=new Map,this._reportHistory=new Map,t.forEach(function(o){n._unreportedAccumulations.set(o,[])})}return r.prototype.buildMetrics=function(e,t,n,o){this._stashAccumulations(n);var i=this._getMergedUnreportedAccumulations(e),a=i,s;if(this._reportHistory.has(e)){var c=this._reportHistory.get(e),u=c.collectionTime;s=c.aggregationTemporality,s===xt.CUMULATIVE?a=r.merge(c.accumulations,i,this._aggregator):a=r.calibrateStartTime(c.accumulations,i,u)}else s=e.selectAggregationTemporality(t.type);this._reportHistory.set(e,{accumulations:a,collectionTime:o,aggregationTemporality:s});var l=wh(a);if(l.length!==0)return this._aggregator.toMetricData(t,s,l,o)},r.prototype._stashAccumulations=function(e){var t,n,o=this._unreportedAccumulations.keys();try{for(var i=An(o),a=i.next();!a.done;a=i.next()){var s=a.value,c=this._unreportedAccumulations.get(s);c===void 0&&(c=[],this._unreportedAccumulations.set(s,c)),c.push(e)}}catch(u){t={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}},r.prototype._getMergedUnreportedAccumulations=function(e){var t,n,o=new fe,i=this._unreportedAccumulations.get(e);if(this._unreportedAccumulations.set(e,[]),i===void 0)return o;try{for(var a=An(i),s=a.next();!s.done;s=a.next()){var c=s.value;o=r.merge(o,c,this._aggregator)}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return o},r.merge=function(e,t,n){for(var o=e,i=t.entries(),a=i.next();a.done!==!0;){var s=To(a.value,3),c=s[0],u=s[1],l=s[2];if(e.has(c,l)){var f=e.get(c,l),m=n.merge(f,u);o.set(c,m,l)}else o.set(c,u,l);a=i.next()}return o},r.calibrateStartTime=function(e,t,n){var o,i;try{for(var a=An(e.keys()),s=a.next();!s.done;s=a.next()){var c=To(s.value,2),u=c[0],l=c[1],f=t.get(u,l);f?.setStartTime(n)}}catch(m){o={error:m}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(o)throw o.error}}return t},r}();function wh(r){return Array.from(r.entries())}var Ah=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Rh=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Lh=function(r){Ah(e,r);function e(t,n,o,i,a){var s=r.call(this,t)||this;return s._attributesProcessor=o,s._aggregationCardinalityLimit=a,s._deltaMetricStorage=new Fa(n,s._aggregationCardinalityLimit),s._temporalMetricStorage=new Xa(n,i),s}return e.prototype.record=function(t,n){var o=this,i=new fe;Array.from(t.entries()).forEach(function(a){var s=Rh(a,2),c=s[0],u=s[1];i.set(o._attributesProcessor.process(c),u)}),this._deltaMetricStorage.batchCumulate(i,n)},e.prototype.collect=function(t,n){var o=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,o,n)},e}(ja);function go(r,e){var t="";return r.unit!==e.unit&&(t+="	- Unit '"+r.unit+"' does not match '"+e.unit+`'
`),r.type!==e.type&&(t+="	- Type '"+r.type+"' does not match '"+e.type+`'
`),r.valueType!==e.valueType&&(t+="	- Value Type '"+r.valueType+"' does not match '"+e.valueType+`'
`),r.description!==e.description&&(t+="	- Description '"+r.description+"' does not match '"+e.description+`'
`),t}function Ph(r,e){return"	- use valueType '"+r.valueType+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function Nh(r,e){return"	- use unit '"+r.unit+"' on instrument creation or use an instrument name other than '"+e.name+"'"}function Ch(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+"'"}function Ih(r,e){var t={name:e.name,type:e.type,unit:e.unit},n=JSON.stringify(t);return"	- create a new view with a name other than '"+r.name+"' and InstrumentSelector '"+n+`'
    	- OR - create a new view with the name `+r.name+" and description '"+r.description+"' and InstrumentSelector "+n+`
    	- OR - create a new view with the name `+e.name+" and description '"+r.description+"' and InstrumentSelector "+n}function mo(r,e){return r.valueType!==e.valueType?Ph(r,e):r.unit!==e.unit?Nh(r,e):r.type!==e.type?Ch(r,e):r.description!==e.description?Ih(r,e):""}var Rn=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mh=function(){function r(){this._sharedRegistry=new Map,this._perCollectorRegistry=new Map}return r.create=function(){return new r},r.prototype.getStorages=function(e){var t,n,o,i,a=[];try{for(var s=Rn(this._sharedRegistry.values()),c=s.next();!c.done;c=s.next()){var u=c.value;a=a.concat(u)}}catch(D){t={error:D}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}var l=this._perCollectorRegistry.get(e);if(l!=null)try{for(var f=Rn(l.values()),m=f.next();!m.done;m=f.next()){var u=m.value;a=a.concat(u)}}catch(D){o={error:D}}finally{try{m&&!m.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return a},r.prototype.register=function(e){this._registerStorage(e,this._sharedRegistry)},r.prototype.registerForCollector=function(e,t){var n=this._perCollectorRegistry.get(e);n==null&&(n=new Map,this._perCollectorRegistry.set(e,n)),this._registerStorage(t,n)},r.prototype.findOrUpdateCompatibleStorage=function(e){var t=this._sharedRegistry.get(e.name);return t===void 0?null:this._findOrUpdateCompatibleStorage(e,t)},r.prototype.findOrUpdateCompatibleCollectorStorage=function(e,t){var n=this._perCollectorRegistry.get(e);if(n===void 0)return null;var o=n.get(t.name);return o===void 0?null:this._findOrUpdateCompatibleStorage(t,o)},r.prototype._registerStorage=function(e,t){var n=e.getInstrumentDescriptor(),o=t.get(n.name);if(o===void 0){t.set(n.name,[e]);return}o.push(e)},r.prototype._findOrUpdateCompatibleStorage=function(e,t){var n,o,i=null;try{for(var a=Rn(t),s=a.next();!s.done;s=a.next()){var c=s.value,u=c.getInstrumentDescriptor();L_(u,e)?(u.description!==e.description&&(e.description.length>u.description.length&&c.updateDescription(e.description),R.warn("A view or instrument with the name ",e.name,` has already been registered, but has a different description and is incompatible with another registered view.
`,`Details:
`,go(u,e),`The longer description will be used.
To resolve the conflict:`,mo(u,e))),i=c):R.warn("A view or instrument with the name ",e.name,` has already been registered and is incompatible with another registered view.
`,`Details:
`,go(u,e),`To resolve the conflict:
`,mo(u,e))}}catch(l){n={error:l}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return i},r}(),xh=function(){function r(e){this._backingStorages=e}return r.prototype.record=function(e,t,n,o){this._backingStorages.forEach(function(i){i.record(e,t,n,o)})},r}(),Dh=function(){function r(e,t){this._instrumentName=e,this._valueType=t,this._buffer=new fe}return r.prototype.observe=function(e,t){if(t===void 0&&(t={}),typeof e!="number"){R.warn("non-number value provided to metric "+this._instrumentName+": "+e);return}this._valueType===ne.INT&&!Number.isInteger(e)&&(R.warn("INT value type cannot accept a floating-point value for "+this._instrumentName+", ignoring the fractional digits."),e=Math.trunc(e),!Number.isInteger(e))||this._buffer.set(t,e)},r}(),kh=function(){function r(){this._buffer=new Map}return r.prototype.observe=function(e,t,n){if(n===void 0&&(n={}),!!Yn(e)){var o=this._buffer.get(e);if(o==null&&(o=new fe,this._buffer.set(e,o)),typeof t!="number"){R.warn("non-number value provided to metric "+e._descriptor.name+": "+t);return}e._descriptor.valueType===ne.INT&&!Number.isInteger(t)&&(R.warn("INT value type cannot accept a floating-point value for "+e._descriptor.name+", ignoring the fractional digits."),t=Math.trunc(t),!Number.isInteger(t))||o.set(n,t)}},r}(),Ln=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Pn=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},So=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Oo=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Uh=function(){function r(){this._callbacks=[],this._batchCallbacks=[]}return r.prototype.addCallback=function(e,t){var n=this._findCallback(e,t);n>=0||this._callbacks.push({callback:e,instrument:t})},r.prototype.removeCallback=function(e,t){var n=this._findCallback(e,t);n<0||this._callbacks.splice(n,1)},r.prototype.addBatchCallback=function(e,t){var n=new Set(t.filter(Yn));if(n.size===0){R.error("BatchObservableCallback is not associated with valid instruments",t);return}var o=this._findBatchCallback(e,n);o>=0||this._batchCallbacks.push({callback:e,instruments:n})},r.prototype.removeBatchCallback=function(e,t){var n=new Set(t.filter(Yn)),o=this._findBatchCallback(e,n);o<0||this._batchCallbacks.splice(o,1)},r.prototype.observe=function(e,t){return Ln(this,void 0,void 0,function(){var n,o,i,a;return Pn(this,function(s){switch(s.label){case 0:return n=this._observeCallbacks(e,t),o=this._observeBatchCallbacks(e,t),[4,m_(Oo(Oo([],So(n),!1),So(o),!1))];case 1:return i=s.sent(),a=i.filter(S_).map(function(c){return c.reason}),[2,a]}})})},r.prototype._observeCallbacks=function(e,t){var n=this;return this._callbacks.map(function(o){var i=o.callback,a=o.instrument;return Ln(n,void 0,void 0,function(){var s,c;return Pn(this,function(u){switch(u.label){case 0:return s=new Dh(a._descriptor.name,a._descriptor.valueType),c=Promise.resolve(i(s)),t!=null&&(c=rr(c,t)),[4,c];case 1:return u.sent(),a._metricStorages.forEach(function(l){l.record(s._buffer,e)}),[2]}})})})},r.prototype._observeBatchCallbacks=function(e,t){var n=this;return this._batchCallbacks.map(function(o){var i=o.callback,a=o.instruments;return Ln(n,void 0,void 0,function(){var s,c;return Pn(this,function(u){switch(u.label){case 0:return s=new kh,c=Promise.resolve(i(s)),t!=null&&(c=rr(c,t)),[4,c];case 1:return u.sent(),a.forEach(function(l){var f=s._buffer.get(l);f!=null&&l._metricStorages.forEach(function(m){m.record(f,e)})}),[2]}})})})},r.prototype._findCallback=function(e,t){return this._callbacks.findIndex(function(n){return n.callback===e&&n.instrument===t})},r.prototype._findBatchCallback=function(e,t){return this._batchCallbacks.findIndex(function(n){return n.callback===e&&O_(n.instruments,t)})},r}(),Bh=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Gh=function(r){Bh(e,r);function e(t,n,o,i,a){var s=r.call(this,t)||this;return s._attributesProcessor=o,s._aggregationCardinalityLimit=a,s._deltaMetricStorage=new Fa(n,s._aggregationCardinalityLimit),s._temporalMetricStorage=new Xa(n,i),s}return e.prototype.record=function(t,n,o,i){n=this._attributesProcessor.process(n,o),this._deltaMetricStorage.record(t,n,o,i)},e.prototype.collect=function(t,n){var o=this._deltaMetricStorage.collect();return this._temporalMetricStorage.buildMetrics(t,this._instrumentDescriptor,o,n)},e}(ja),$a=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),ci=function(){function r(){}return r.Noop=function(){return Vh},r}(),Hh=function(r){$a(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype.process=function(t,n){return t},e}(ci);(function(r){$a(e,r);function e(t){var n=r.call(this)||this;return n._allowedAttributeNames=t,n}return e.prototype.process=function(t,n){var o=this,i={};return Object.keys(t).filter(function(a){return o._allowedAttributeNames.includes(a)}).forEach(function(a){return i[a]=t[a]}),i},e})(ci);var Vh=new Hh,jh=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Fh=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Xh=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},$h=function(){function r(e,t){this._meterProviderSharedState=e,this._instrumentationScope=t,this.metricStorageRegistry=new Mh,this.observableRegistry=new Uh,this.meter=new mh(this)}return r.prototype.registerMetricStorage=function(e){var t=this._registerMetricStorage(e,Gh);return t.length===1?t[0]:new xh(t)},r.prototype.registerAsyncMetricStorage=function(e){var t=this._registerMetricStorage(e,Lh);return t},r.prototype.collect=function(e,t,n){return jh(this,void 0,void 0,function(){var o,i,a;return Fh(this,function(s){switch(s.label){case 0:return[4,this.observableRegistry.observe(t,n?.timeoutMillis)];case 1:return o=s.sent(),i=this.metricStorageRegistry.getStorages(e),i.length===0?[2,null]:(a=i.map(function(c){return c.collect(e,t)}).filter(T_),a.length===0?[2,{errors:o}]:[2,{scopeMetrics:{scope:this._instrumentationScope,metrics:a},errors:o}])}})})},r.prototype._registerMetricStorage=function(e,t){var n=this,o=this._meterProviderSharedState.viewRegistry.findViews(e,this._instrumentationScope),i=o.map(function(c){var u=R_(c,e),l=n.metricStorageRegistry.findOrUpdateCompatibleStorage(u);if(l!=null)return l;var f=c.aggregation.createAggregator(u),m=new t(u,f,c.attributesProcessor,n._meterProviderSharedState.metricCollectors,c.aggregationCardinalityLimit);return n.metricStorageRegistry.register(m),m});if(i.length===0){var a=this._meterProviderSharedState.selectAggregations(e.type),s=a.map(function(c){var u=Xh(c,2),l=u[0],f=u[1],m=n.metricStorageRegistry.findOrUpdateCompatibleCollectorStorage(l,e);if(m!=null)return m;var D=f.createAggregator(e),G=l.selectCardinalityLimit(e.type),rt=new t(e,D,ci.Noop(),[l],G);return n.metricStorageRegistry.registerForCollector(l,rt),rt});i=i.concat(s)}return i},r}(),zh=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Zh=function(){function r(e){this.resource=e,this.viewRegistry=new _h,this.metricCollectors=[],this.meterSharedStates=new Map}return r.prototype.getMeterSharedState=function(e){var t=g_(e),n=this.meterSharedStates.get(t);return n==null&&(n=new $h(this,e),this.meterSharedStates.set(t,n)),n},r.prototype.selectAggregations=function(e){var t,n,o=[];try{for(var i=zh(this.metricCollectors),a=i.next();!a.done;a=i.next()){var s=a.value;o.push([s,s.selectAggregation(e)])}}catch(c){t={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return o},r}(),Or=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},br=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Wh=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Yh=function(r,e,t){if(t||arguments.length===2)for(var n=0,o=e.length,i;n<o;n++)(i||!(n in e))&&(i||(i=Array.prototype.slice.call(e,0,n)),i[n]=e[n]);return r.concat(i||Array.prototype.slice.call(e))},Kh=function(){function r(e,t){this._sharedState=e,this._metricReader=t}return r.prototype.collect=function(e){return Or(this,void 0,void 0,function(){var t,n,o,i,a=this;return br(this,function(s){switch(s.label){case 0:return t=oe(Date.now()),n=[],o=[],i=Array.from(this._sharedState.meterSharedStates.values()).map(function(c){return Or(a,void 0,void 0,function(){var u;return br(this,function(l){switch(l.label){case 0:return[4,c.collect(this,t,e)];case 1:return u=l.sent(),u?.scopeMetrics!=null&&n.push(u.scopeMetrics),u?.errors!=null&&o.push.apply(o,Yh([],Wh(u.errors),!1)),[2]}})})}),[4,Promise.all(i)];case 1:return s.sent(),[2,{resourceMetrics:{resource:this._sharedState.resource,scopeMetrics:n},errors:o}]}})})},r.prototype.forceFlush=function(e){return Or(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._metricReader.forceFlush(e)];case 1:return t.sent(),[2]}})})},r.prototype.shutdown=function(e){return Or(this,void 0,void 0,function(){return br(this,function(t){switch(t.label){case 0:return[4,this._metricReader.shutdown(e)];case 1:return t.sent(),[2]}})})},r.prototype.selectAggregationTemporality=function(e){return this._metricReader.selectAggregationTemporality(e)},r.prototype.selectAggregation=function(e){return this._metricReader.selectAggregation(e)},r.prototype.selectCardinalityLimit=function(e){var t,n,o;return(o=(n=(t=this._metricReader).selectCardinalityLimit)===null||n===void 0?void 0:n.call(t,e))!==null&&o!==void 0?o:2e3},r}(),bo=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},wo=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Ao=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function qh(r,e){var t=e??ro.empty();return r?ro.default().merge(t):t}var Qh=function(){function r(e){var t,n,o,i,a;if(this._shutdown=!1,this._sharedState=new Zh(qh((a=e?.mergeResourceWithDefaults)!==null&&a!==void 0?a:!0,e?.resource)),e?.views!=null&&e.views.length>0)try{for(var s=Ao(e.views),c=s.next();!c.done;c=s.next()){var u=c.value;this._sharedState.viewRegistry.addView(u)}}catch(D){t={error:D}}finally{try{c&&!c.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(e?.readers!=null&&e.readers.length>0)try{for(var l=Ao(e.readers),f=l.next();!f.done;f=l.next()){var m=f.value;this.addMetricReader(m)}}catch(D){o={error:D}}finally{try{f&&!f.done&&(i=l.return)&&i.call(l)}finally{if(o)throw o.error}}}return r.prototype.getMeter=function(e,t,n){return t===void 0&&(t=""),n===void 0&&(n={}),this._shutdown?(R.warn("A shutdown MeterProvider cannot provide a Meter"),ss()):this._sharedState.getMeterSharedState({name:e,version:t,schemaUrl:n.schemaUrl}).meter},r.prototype.addMetricReader=function(e){var t=new Kh(this._sharedState,e);e.setMetricProducer(t),this._sharedState.metricCollectors.push(t)},r.prototype.shutdown=function(e){return bo(this,void 0,void 0,function(){return wo(this,function(t){switch(t.label){case 0:return this._shutdown?(R.warn("shutdown may only be called once per MeterProvider"),[2]):(this._shutdown=!0,[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.shutdown(e)}))]);case 1:return t.sent(),[2]}})})},r.prototype.forceFlush=function(e){return bo(this,void 0,void 0,function(){return wo(this,function(t){switch(t.label){case 0:return this._shutdown?(R.warn("invalid attempt to force flush after MeterProvider shutdown"),[2]):[4,Promise.all(this._sharedState.metricCollectors.map(function(n){return n.forceFlush(e)}))];case 1:return t.sent(),[2]}})})},r}(),za=function(){function r(e){this._delegate=e}return r.prototype.export=function(e,t){this._delegate.export(e,t)},r.prototype.forceFlush=function(){return this._delegate.forceFlush()},r.prototype.shutdown=function(){return this._delegate.shutdown()},r}(),Jh=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Ro=function(r){Jh(e,r);function e(t,n,o){var i=r.call(this,t)||this;return i.name="OTLPExporterError",i.data=o,i.code=n,i}return e}(Error);function tp(r){if(!Number.isNaN(r)&&Number.isFinite(r)&&r>0)return r;throw new Error("Configuration: timeoutMillis is invalid, expected number greater than 0 (actual: '"+r+"')")}function ep(r){if(r!=null)return function(){return r}}function rp(r,e,t){var n,o,i,a,s,c;return{timeoutMillis:tp((o=(n=r.timeoutMillis)!==null&&n!==void 0?n:e.timeoutMillis)!==null&&o!==void 0?o:t.timeoutMillis),concurrencyLimit:(a=(i=r.concurrencyLimit)!==null&&i!==void 0?i:e.concurrencyLimit)!==null&&a!==void 0?a:t.concurrencyLimit,compression:(c=(s=r.compression)!==null&&s!==void 0?s:e.compression)!==null&&c!==void 0?c:t.compression}}function np(){return{timeoutMillis:1e4,concurrencyLimit:30,compression:"none"}}var ip=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},op=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},ap=function(){function r(e){this._sendingPromises=[],this._concurrencyLimit=e}return r.prototype.pushPromise=function(e){var t=this;if(this.hasReachedLimit())throw new Error("Concurrency Limit reached");this._sendingPromises.push(e);var n=function(){var o=t._sendingPromises.indexOf(e);t._sendingPromises.splice(o,1)};e.then(n,n)},r.prototype.hasReachedLimit=function(){return this._sendingPromises.length>=this._concurrencyLimit},r.prototype.awaitAll=function(){return ip(this,void 0,void 0,function(){return op(this,function(e){switch(e.label){case 0:return[4,Promise.all(this._sendingPromises)];case 1:return e.sent(),[2]}})})},r}();function up(r){return new ap(r.concurrencyLimit)}function sp(r){return Object.prototype.hasOwnProperty.call(r,"partialSuccess")}function cp(){return{handleResponse:function(r){r==null||!sp(r)||r.partialSuccess==null||Object.keys(r.partialSuccess).length===0||R.warn("Received Partial Success response:",JSON.stringify(r.partialSuccess))}}}var lp=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},fp=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},dp=function(){function r(e,t,n,o,i){this._transport=e,this._serializer=t,this._responseHandler=n,this._promiseQueue=o,this._timeout=i,this._diagLogger=R.createComponentLogger({namespace:"OTLPExportDelegate"})}return r.prototype.export=function(e,t){var n=this;if(this._diagLogger.debug("items to be sent",e),this._promiseQueue.hasReachedLimit()){t({code:Bt.FAILED,error:new Error("Concurrent export limit reached")});return}var o=this._serializer.serializeRequest(e);if(o==null){t({code:Bt.FAILED,error:new Error("Nothing to send")});return}this._promiseQueue.pushPromise(this._transport.send(o,this._timeout).then(function(i){if(i.status==="success"){if(i.data!=null)try{n._responseHandler.handleResponse(n._serializer.deserializeResponse(i.data))}catch(a){n._diagLogger.warn("Export succeeded but could not deserialize response - is the response specification compliant?",a,i.data)}t({code:Bt.SUCCESS});return}else if(i.status==="failure"&&i.error){t({code:Bt.FAILED,error:i.error});return}else i.status==="retryable"?t({code:Bt.FAILED,error:new Ro("Export failed with retryable status")}):t({code:Bt.FAILED,error:new Ro("Export failed with unknown error")})},function(i){return t({code:Bt.FAILED,error:i})}))},r.prototype.forceFlush=function(){return this._promiseQueue.awaitAll()},r.prototype.shutdown=function(){return lp(this,void 0,void 0,function(){return fp(this,function(e){switch(e.label){case 0:return this._diagLogger.debug("shutdown started"),[4,this.forceFlush()];case 1:return e.sent(),this._transport.shutdown(),[2]}})})},r}();function _p(r,e){return new dp(r.transport,r.serializer,cp(),r.promiseHandler,e.timeout)}function Za(r,e,t){return _p({transport:t,serializer:e,promiseHandler:up(r)},{timeout:r.timeoutMillis})}function Wa(r){var e=BigInt(1e9);return BigInt(r[0])*e+BigInt(r[1])}function hp(r){var e=Number(BigInt.asUintN(32,r)),t=Number(BigInt.asUintN(32,r>>BigInt(32)));return{low:e,high:t}}function Ya(r){var e=Wa(r);return hp(e)}function pp(r){var e=Wa(r);return e.toString()}var vp=typeof BigInt<"u"?pp:Yt;function Lo(r){return r}function Ka(r){if(r!==void 0)return ai(r)}var Ep={encodeHrTime:Ya,encodeSpanContext:ai,encodeOptionalSpanContext:Ka};function qa(r){var e,t;if(r===void 0)return Ep;var n=(e=r.useLongBits)!==null&&e!==void 0?e:!0,o=(t=r.useHex)!==null&&t!==void 0?t:!1;return{encodeHrTime:n?Ya:vp,encodeSpanContext:o?Lo:ai,encodeOptionalSpanContext:o?Lo:Ka}}var yp=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function Qa(r){return{attributes:Te(r.attributes),droppedAttributesCount:0}}function Ja(r){return{name:r.name,version:r.version}}function Te(r){return Object.keys(r).map(function(e){return tu(e,r[e])})}function tu(r,e){return{key:r,value:eu(e)}}function eu(r){var e=typeof r;return e==="string"?{stringValue:r}:e==="number"?Number.isInteger(r)?{intValue:r}:{doubleValue:r}:e==="boolean"?{boolValue:r}:r instanceof Uint8Array?{bytesValue:r}:Array.isArray(r)?{arrayValue:{values:r.map(eu)}}:e==="object"&&r!=null?{kvlistValue:{values:Object.entries(r).map(function(t){var n=yp(t,2),o=n[0],i=n[1];return tu(o,i)})}}:{}}function Tp(r,e){var t=qa(e);return{resource:Qa(r.resource),schemaUrl:void 0,scopeMetrics:gp(r.scopeMetrics,t)}}function gp(r,e){return Array.from(r.map(function(t){return{scope:Ja(t.scope),metrics:t.metrics.map(function(n){return mp(n,e)}),schemaUrl:t.scope.schemaUrl}}))}function mp(r,e){var t={name:r.descriptor.name,description:r.descriptor.description,unit:r.descriptor.unit},n=wp(r.aggregationTemporality);switch(r.dataPointType){case Vt.SUM:t.sum={aggregationTemporality:n,isMonotonic:r.isMonotonic,dataPoints:Po(r,e)};break;case Vt.GAUGE:t.gauge={dataPoints:Po(r,e)};break;case Vt.HISTOGRAM:t.histogram={aggregationTemporality:n,dataPoints:Op(r,e)};break;case Vt.EXPONENTIAL_HISTOGRAM:t.exponentialHistogram={aggregationTemporality:n,dataPoints:bp(r,e)};break}return t}function Sp(r,e,t){var n={attributes:Te(r.attributes),startTimeUnixNano:t.encodeHrTime(r.startTime),timeUnixNano:t.encodeHrTime(r.endTime)};switch(e){case ne.INT:n.asInt=r.value;break;case ne.DOUBLE:n.asDouble=r.value;break}return n}function Po(r,e){return r.dataPoints.map(function(t){return Sp(t,r.descriptor.valueType,e)})}function Op(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:Te(t.attributes),bucketCounts:n.buckets.counts,explicitBounds:n.buckets.boundaries,count:n.count,sum:n.sum,min:n.min,max:n.max,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function bp(r,e){return r.dataPoints.map(function(t){var n=t.value;return{attributes:Te(t.attributes),count:n.count,min:n.min,max:n.max,sum:n.sum,positive:{offset:n.positive.offset,bucketCounts:n.positive.bucketCounts},negative:{offset:n.negative.offset,bucketCounts:n.negative.bucketCounts},scale:n.scale,zeroCount:n.zeroCount,startTimeUnixNano:e.encodeHrTime(t.startTime),timeUnixNano:e.encodeHrTime(t.endTime)}})}function wp(r){switch(r){case xt.DELTA:return 1;case xt.CUMULATIVE:return 2}}function Ap(r,e){return{resourceMetrics:r.map(function(t){return Tp(t,e)})}}var Rp=function(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lp=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function Pp(r,e){var t,n=r.spanContext(),o=r.status;return{traceId:e.encodeSpanContext(n.traceId),spanId:e.encodeSpanContext(n.spanId),parentSpanId:e.encodeOptionalSpanContext(r.parentSpanId),traceState:(t=n.traceState)===null||t===void 0?void 0:t.serialize(),name:r.name,kind:r.kind==null?0:r.kind+1,startTimeUnixNano:e.encodeHrTime(r.startTime),endTimeUnixNano:e.encodeHrTime(r.endTime),attributes:Te(r.attributes),droppedAttributesCount:r.droppedAttributesCount,events:r.events.map(function(i){return Cp(i,e)}),droppedEventsCount:r.droppedEventsCount,status:{code:o.code,message:o.message},links:r.links.map(function(i){return Np(i,e)}),droppedLinksCount:r.droppedLinksCount}}function Np(r,e){var t;return{attributes:r.attributes?Te(r.attributes):[],spanId:e.encodeSpanContext(r.context.spanId),traceId:e.encodeSpanContext(r.context.traceId),traceState:(t=r.context.traceState)===null||t===void 0?void 0:t.serialize(),droppedAttributesCount:r.droppedAttributesCount||0}}function Cp(r,e){return{attributes:r.attributes?Te(r.attributes):[],name:r.name,timeUnixNano:e.encodeHrTime(r.time),droppedAttributesCount:r.droppedAttributesCount||0}}function Ip(r,e){var t=qa(e);return{resourceSpans:xp(r,t)}}function Mp(r){var e,t,n=new Map;try{for(var o=Rp(r),i=o.next();!i.done;i=o.next()){var a=i.value,s=n.get(a.resource);s||(s=new Map,n.set(a.resource,s));var c=a.instrumentationLibrary.name+"@"+(a.instrumentationLibrary.version||"")+":"+(a.instrumentationLibrary.schemaUrl||""),u=s.get(c);u||(u=[],s.set(c,u)),u.push(a)}}catch(l){e={error:l}}finally{try{i&&!i.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n}function xp(r,e){for(var t=Mp(r),n=[],o=t.entries(),i=o.next();!i.done;){for(var a=Lp(i.value,2),s=a[0],c=a[1],u=[],l=c.values(),f=l.next();!f.done;){var m=f.value;if(m.length>0){var D=m.map(function(rt){return Pp(rt,e)});u.push({scope:Ja(m[0].instrumentationLibrary),spans:D,schemaUrl:m[0].instrumentationLibrary.schemaUrl})}f=l.next()}var G={resource:Qa(s),scopeSpans:u,schemaUrl:void 0};n.push(G),i=o.next()}return n}var Dp={serializeRequest:function(r){var e=Ap([r],{useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},kp={serializeRequest:function(r){var e=Ip(r,{useHex:!0,useLongBits:!1}),t=new TextEncoder;return t.encode(JSON.stringify(e))},deserializeResponse:function(r){var e=new TextDecoder;return JSON.parse(e.decode(r))}},Up=function(r,e,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function s(l){try{u(n.next(l))}catch(f){a(f)}}function c(l){try{u(n.throw(l))}catch(f){a(f)}}function u(l){l.done?i(l.value):o(l.value).then(s,c)}u((n=n.apply(r,e||[])).next())})},Bp=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(u){return function(l){return c([u,l])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,o=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){t.label=u[1];break}if(u[0]===6&&t.label<i[1]){t.label=i[1],i=u;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(u);break}i[2]&&t.ops.pop(),t.trys.pop();continue}u=e.call(r,t)}catch(l){u=[6,l],o=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Gp=5,Hp=1e3,Vp=5e3,jp=1.5,No=.2;function Fp(){return Math.random()*(2*No)-No}var Xp=function(){function r(e){this._transport=e}return r.prototype.retry=function(e,t,n){var o=this;return new Promise(function(i,a){setTimeout(function(){o._transport.send(e,t).then(i,a)},n)})},r.prototype.send=function(e,t){var n;return Up(this,void 0,void 0,function(){var o,i,a,s,c,u,l;return Bp(this,function(f){switch(f.label){case 0:return o=Date.now()+t,[4,this._transport.send(e,t)];case 1:i=f.sent(),a=Gp,s=Hp,f.label=2;case 2:return i.status==="retryable"&&a>0?(a--,c=Math.max(Math.min(s,Vp)+Fp(),0),s=s*jp,u=(n=i.retryInMillis)!==null&&n!==void 0?n:c,l=o-Date.now(),u>l?[2,i]:[4,this.retry(e,l,u)]):[3,4];case 3:return i=f.sent(),[3,2];case 4:return[2,i]}})})},r.prototype.shutdown=function(){return this._transport.shutdown()},r}();function ru(r){return new Xp(r.transport)}function $p(r){var e=[429,502,503,504];return e.includes(r)}function zp(r){if(r!=null){var e=Number.parseInt(r,10);if(Number.isInteger(e))return e>0?e*1e3:-1;var t=new Date(r).getTime()-Date.now();return t>=0?t:0}}var Zp=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Wp=function(){function r(e){this._parameters=e}return r.prototype.send=function(e,t){var n=this;return new Promise(function(o){var i=new XMLHttpRequest;i.timeout=t,i.open("POST",n._parameters.url);var a=n._parameters.headers();Object.entries(a).forEach(function(s){var c=Zp(s,2),u=c[0],l=c[1];i.setRequestHeader(u,l)}),i.ontimeout=function(s){o({status:"failure",error:new Error("XHR request timed out")})},i.onreadystatechange=function(){i.status>=200&&i.status<=299?(R.debug("XHR success"),o({status:"success"})):i.status&&$p(i.status)?o({status:"retryable",retryInMillis:zp(i.getResponseHeader("Retry-After"))}):i.status!==0&&o({status:"failure",error:new Error("XHR request failed with non-retryable status")})},i.onabort=function(){o({status:"failure",error:new Error("XHR request aborted")})},i.onerror=function(){o({status:"failure",error:new Error("XHR request errored")})},i.send(e)})},r.prototype.shutdown=function(){},r}();function Yp(r){return new Wp(r)}var Kp=function(){function r(e){this._params=e}return r.prototype.send=function(e){var t=this;return new Promise(function(n){navigator.sendBeacon(t._params.url,new Blob([e],{type:t._params.blobType}))?(R.debug("SendBeacon success"),n({status:"success"})):n({status:"failure",error:new Error("SendBeacon failed")})})},r.prototype.shutdown=function(){},r}();function qp(r){return new Kp(r)}function Qp(r,e){return Za(r,e,ru({transport:Yp(r)}))}function Jp(r,e){return Za(r,e,ru({transport:qp({url:r.url,blobType:r.headers()["Content-Type"]})}))}var tv=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),o,i=[],a;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(s){a={error:s}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i};function ev(r){return function(){var e,t={};return Object.entries((e=r?.())!==null&&e!==void 0?e:{}).forEach(function(n){var o=tv(n,2),i=o[0],a=o[1];typeof a<"u"?t[i]=String(a):R.warn('Header "'+i+'" has invalid value ('+a+") and will be ignored")}),t}}var pe=function(){return pe=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}return r},pe.apply(this,arguments)};function rv(r,e,t){var n=pe({},t()),o={};return function(){return e!=null&&Object.assign(o,e()),r!=null&&Object.assign(o,r()),Object.assign(o,n)}}function nv(r){if(r!=null)try{return new URL(r),r}catch{throw new Error("Configuration: Could not parse user-provided export URL: '"+r+"'")}}function iv(r,e,t){var n,o,i,a;return pe(pe({},rp(r,e,t)),{headers:rv(ev(r.headers),e.headers,t.headers),url:(o=(n=nv(r.url))!==null&&n!==void 0?n:e.url)!==null&&o!==void 0?o:t.url,agentOptions:(a=(i=r.agentOptions)!==null&&i!==void 0?i:e.agentOptions)!==null&&a!==void 0?a:t.agentOptions})}function ov(r,e){return pe(pe({},np()),{headers:function(){return r},url:"http://localhost:4318/"+e,agentOptions:{keepAlive:!0}})}function av(r,e,t){return iv({url:r.url,timeoutMillis:r.timeoutMillis,headers:ep(r.headers),concurrencyLimit:r.concurrencyLimit},{},ov(t,e))}function nu(r,e,t,n){var o=!!r.headers||typeof navigator.sendBeacon!="function",i=av(r,t,n);return o?Qp(i,e):Jp(i,e)}var uv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),sv=function(r){uv(e,r);function e(t){return t===void 0&&(t={}),r.call(this,nu(t,kp,"v1/traces",{"Content-Type":"application/json"}))||this}return e}(za),Vr;(function(r){r[r.DELTA=0]="DELTA",r[r.CUMULATIVE=1]="CUMULATIVE",r[r.LOWMEMORY=2]="LOWMEMORY"})(Vr||(Vr={}));var cv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Kn=function(){return xt.CUMULATIVE},iu=function(r){switch(r){case Z.COUNTER:case Z.OBSERVABLE_COUNTER:case Z.GAUGE:case Z.HISTOGRAM:case Z.OBSERVABLE_GAUGE:return xt.DELTA;case Z.UP_DOWN_COUNTER:case Z.OBSERVABLE_UP_DOWN_COUNTER:return xt.CUMULATIVE}},ou=function(r){switch(r){case Z.COUNTER:case Z.HISTOGRAM:return xt.DELTA;case Z.GAUGE:case Z.UP_DOWN_COUNTER:case Z.OBSERVABLE_UP_DOWN_COUNTER:case Z.OBSERVABLE_COUNTER:case Z.OBSERVABLE_GAUGE:return xt.CUMULATIVE}};function lv(){var r=Gf(),e=r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE.trim().toLowerCase();return e==="cumulative"?Kn:e==="delta"?iu:e==="lowmemory"?ou:(R.warn("OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE is set to '"+r.OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE+"', but only 'cumulative' and 'delta' are allowed. Using default ('cumulative') instead."),Kn)}function fv(r){return r!=null?r===Vr.DELTA?iu:r===Vr.LOWMEMORY?ou:Kn:lv()}function dv(r){return r?.aggregationPreference?r.aggregationPreference:function(e){return qt.Default()}}var _v=function(r){cv(e,r);function e(t,n){var o=r.call(this,t)||this;return o._aggregationSelector=dv(n),o._aggregationTemporalitySelector=fv(n?.temporalityPreference),o}return e.prototype.selectAggregation=function(t){return this._aggregationSelector(t)},e.prototype.selectAggregationTemporality=function(t){return this._aggregationTemporalitySelector(t)},e}(za),hv=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),pv=function(r){hv(e,r);function e(t){return r.call(this,nu(t??{},Dp,"v1/metrics",{"Content-Type":"application/json"}),t)||this}return e}(_v),Ce;(function(r){r.EVENT_TYPE="event_type",r.TARGET_ELEMENT="target_element",r.TARGET_XPATH="target_xpath",r.HTTP_URL="http.url"})(Ce||(Ce={}));var Co="0.44.1",vv="@opentelemetry/instrumentation-user-interaction",Ev=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),yv="OT_ZONE_CONTEXT",Tv="Navigation:",gv=["click"];function mv(){return!1}var Sv=function(r){Ev(e,r);function e(t){t===void 0&&(t={});var n,o=r.call(this,vv,Co,t)||this;return o.version=Co,o.moduleName="user-interaction",o._spansData=new WeakMap,o._wrappedListeners=new WeakMap,o._eventsSpanMap=new WeakMap,o._eventNames=new Set((n=t?.eventNames)!==null&&n!==void 0?n:gv),o._shouldPreventSpanCreation=typeof t?.shouldPreventSpanCreation=="function"?t.shouldPreventSpanCreation:mv,o}return e.prototype.init=function(){},e.prototype._checkForTimeout=function(t,n){var o=this._spansData.get(n);o&&(t.source==="setTimeout"?o.hrTimeLastTimeout=_e():t.source!=="Promise.then"&&t.source!=="setTimeout"&&(o.hrTimeLastTimeout=void 0))},e.prototype._allowEventName=function(t){return this._eventNames.has(t)},e.prototype._createSpan=function(t,n,o){var i;if(t instanceof HTMLElement&&t.getAttribute&&!t.hasAttribute("disabled")&&this._allowEventName(n)){var a=ui(t,!0);try{var s=this.tracer.startSpan(n,{attributes:(i={},i[Ce.EVENT_TYPE]=n,i[Ce.TARGET_ELEMENT]=t.tagName,i[Ce.TARGET_XPATH]=a,i[Ce.HTTP_URL]=window.location.href,i)},o?it.setSpan($.active(),o):void 0);return this._shouldPreventSpanCreation(n,t,s)===!0?void 0:(this._spansData.set(s,{taskCount:0}),s)}catch(c){this._diag.error("failed to start create new user interaction span",c)}}},e.prototype._decrementTask=function(t){var n=this._spansData.get(t);n&&(n.taskCount--,n.taskCount===0&&this._tryToEndSpan(t,n.hrTimeLastTimeout))},e.prototype._getCurrentSpan=function(t){var n=t.get(yv);return n&&it.getSpan(n)},e.prototype._incrementTask=function(t){var n=this._spansData.get(t);n&&n.taskCount++},e.prototype.addPatchedListener=function(t,n,o,i){var a=this._wrappedListeners.get(o);a||(a=new Map,this._wrappedListeners.set(o,a));var s=a.get(n);return s||(s=new Map,a.set(n,s)),s.has(t)?!1:(s.set(t,i),!0)},e.prototype.removePatchedListener=function(t,n,o){var i=this._wrappedListeners.get(o);if(i){var a=i.get(n);if(a){var s=a.get(t);return s&&(a.delete(t),a.size===0&&(i.delete(n),i.size===0&&this._wrappedListeners.delete(o))),s}}},e.prototype._invokeListener=function(t,n,o){return typeof t=="function"?t.apply(n,o):t.handleEvent(o[0])},e.prototype._patchAddEventListener=function(){var t=this;return function(n){return function(i,a,s){if(!a)return n.call(this,i,a,s);var c=s&&typeof s=="object"&&s.once,u=function(){for(var l=this,f=[],m=0;m<arguments.length;m++)f[m]=arguments[m];var D,G=f[0],rt=G?.target;G&&(D=t._eventsSpanMap.get(G)),c&&t.removePatchedListener(this,i,a);var dt=t._createSpan(rt,i,D);return dt?(G&&t._eventsSpanMap.set(G,dt),$.with(it.setSpan($.active(),dt),function(){var Q=t._invokeListener(a,l,f);return dt.end(),Q})):t._invokeListener(a,this,f)};if(t.addPatchedListener(this,i,a,u))return n.call(this,i,u,s)}}},e.prototype._patchRemoveEventListener=function(){var t=this;return function(n){return function(i,a,s){var c=t.removePatchedListener(this,i,a);return c?n.call(this,i,c,s):n.call(this,i,a,s)}}},e.prototype._getPatchableEventTargets=function(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]},e.prototype._patchHistoryApi=function(){this._unpatchHistoryApi(),this._wrap(history,"replaceState",this._patchHistoryMethod()),this._wrap(history,"pushState",this._patchHistoryMethod()),this._wrap(history,"back",this._patchHistoryMethod()),this._wrap(history,"forward",this._patchHistoryMethod()),this._wrap(history,"go",this._patchHistoryMethod())},e.prototype._patchHistoryMethod=function(){var t=this;return function(n){return function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=""+location.pathname+location.hash+location.search,c=n.apply(this,i),u=""+location.pathname+location.hash+location.search;return s!==u&&t._updateInteractionName(u),c}}},e.prototype._unpatchHistoryApi=function(){nt(history.replaceState)&&this._unwrap(history,"replaceState"),nt(history.pushState)&&this._unwrap(history,"pushState"),nt(history.back)&&this._unwrap(history,"back"),nt(history.forward)&&this._unwrap(history,"forward"),nt(history.go)&&this._unwrap(history,"go")},e.prototype._updateInteractionName=function(t){var n=it.getSpan($.active());n&&typeof n.updateName=="function"&&n.updateName(Tv+" "+t)},e.prototype._patchZoneCancelTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,s=t._getCurrentSpan(a);return s&&t._shouldCountTask(i,a)&&t._decrementTask(s),n.call(this,i)}}},e.prototype._patchZoneScheduleTask=function(){var t=this;return function(n){return function(i){var a=Zone.current,s=t._getCurrentSpan(a);return s&&t._shouldCountTask(i,a)&&(t._incrementTask(s),t._checkForTimeout(i,s)),n.call(this,i)}}},e.prototype._patchZoneRunTask=function(){var t=this;return function(n){return function(i,a,s){var c=Array.isArray(s)&&s[0]instanceof Event?s[0]:void 0,u=c?.target,l,f=this;if(u){if(l=t._createSpan(u,i.eventName),l)return t._incrementTask(l),f.run(function(){try{return $.with(it.setSpan($.active(),l),function(){var m=Zone.current;return i._zone=m,n.call(m,i,a,s)})}finally{t._decrementTask(l)}})}else l=t._getCurrentSpan(f);try{return n.call(f,i,a,s)}finally{l&&t._shouldCountTask(i,f)&&t._decrementTask(l)}}}},e.prototype._shouldCountTask=function(t,n){if(t._zone&&(n=t._zone),!n||!t.data||t.data.isPeriodic)return!1;var o=this._getCurrentSpan(n);return!o||!this._spansData.get(o)?!1:t.type==="macroTask"||t.type==="microTask"},e.prototype._tryToEndSpan=function(t,n){if(t){var o=this._spansData.get(t);o&&(t.end(n),this._spansData.delete(t))}},e.prototype.enable=function(){var t=this,n=this._getZoneWithPrototype();if(this._diag.debug("applying patch to",this.moduleName,this.version,"zone:",!!n),n)nt(n.prototype.runTask)&&(this._unwrap(n.prototype,"runTask"),this._diag.debug("removing previous patch from method runTask")),nt(n.prototype.scheduleTask)&&(this._unwrap(n.prototype,"scheduleTask"),this._diag.debug("removing previous patch from method scheduleTask")),nt(n.prototype.cancelTask)&&(this._unwrap(n.prototype,"cancelTask"),this._diag.debug("removing previous patch from method cancelTask")),this._zonePatched=!0,this._wrap(n.prototype,"runTask",this._patchZoneRunTask()),this._wrap(n.prototype,"scheduleTask",this._patchZoneScheduleTask()),this._wrap(n.prototype,"cancelTask",this._patchZoneCancelTask());else{this._zonePatched=!1;var o=this._getPatchableEventTargets();o.forEach(function(i){nt(i.addEventListener)&&(t._unwrap(i,"addEventListener"),t._diag.debug("removing previous patch from method addEventListener")),nt(i.removeEventListener)&&(t._unwrap(i,"removeEventListener"),t._diag.debug("removing previous patch from method removeEventListener")),t._wrap(i,"addEventListener",t._patchAddEventListener()),t._wrap(i,"removeEventListener",t._patchRemoveEventListener())})}this._patchHistoryApi()},e.prototype.disable=function(){var t=this,n=this._getZoneWithPrototype();if(this._diag.debug("removing patch from",this.moduleName,this.version,"zone:",!!n),n&&this._zonePatched)nt(n.prototype.runTask)&&this._unwrap(n.prototype,"runTask"),nt(n.prototype.scheduleTask)&&this._unwrap(n.prototype,"scheduleTask"),nt(n.prototype.cancelTask)&&this._unwrap(n.prototype,"cancelTask");else{var o=this._getPatchableEventTargets();o.forEach(function(i){nt(i.addEventListener)&&t._unwrap(i,"addEventListener"),nt(i.removeEventListener)&&t._unwrap(i,"removeEventListener")})}this._unpatchHistoryApi()},e.prototype._getZoneWithPrototype=function(){var t=window;return t.Zone},e}(ur);const Ov="0.0.1",bv="maxyloon.dev",au={},uu=1,su=1e3,wv=Dr.default().merge(new Dr({[Dc]:bv,[kc]:Ov})),Av={headers:au,concurrencyLimit:uu,timeout:su},Rv={headers:au,concurrencyLimit:uu,timeout:su},Lv=new sv(Av),Pv=new pv(Rv);new Qh({readers:[new dh({exporter:Pv,exportIntervalMillis:1e3})]});const Nv=new nf({resource:wv,spanProcessors:[new Ql(new Yl),new va(Lv,{maxQueueSize:1e3,maxExportBatchSize:10,scheduledDelayMillis:1e3,exportTimeoutMillis:1e4})]});Nv.register({contextManager:new af,propagator:new dd});Ef({instrumentations:[h_(),new Sv({shouldPreventSpanCreation:(r,e,t)=>(t.setAttribute("target.id",e.id),console.log("shouldPreventSpanCreation",r,e,t),!1),eventNames:["submit","reset","change","input","focus","blur","click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","mouseover","mouseout","contextmenu","keydown","keypress","keyup","copy","cut","paste","drag","dragstart","dragend","dragover","dragenter","dragleave","drop","touchstart","touchmove","touchend","touchcancel","pointerdown","pointerup","pointermove","pointerover","pointerout","pointerenter","pointerleave","pointercancel","play","pause","playing","ended","timeupdate","volumechange","seeking","seeked","waiting","load","unload","DOMContentLoaded","resize","scroll","visibilitychange","fullscreenchange","fullscreenerror","focus","blur","hashchange","beforeunload","online","offline","animationstart","animationend","animationiteration","transitionstart","transitionend","transitionrun","open","message","error","close","customEvent"]})]});
